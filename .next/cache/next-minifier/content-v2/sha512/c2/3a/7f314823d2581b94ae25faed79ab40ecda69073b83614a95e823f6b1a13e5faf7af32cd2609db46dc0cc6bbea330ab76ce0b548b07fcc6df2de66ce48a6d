{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[103],{DB6d:function(e,t,n){\"use strict\";n.r(t),n.d(t,\"default\",(function(){return P}));var r=n(\"ATwu\"),a=n.n(r),s=n(\"MM9K\"),c=n.n(s),o=n(\"cpVT\"),i=n(\"rg98\"),u=n(\"vJKn\"),p=n.n(u),l=n(\"q1tI\"),j=n(\"/MKj\"),d=n(\"20a2\"),h=n(\"7I1n\"),b=n(\"QCuh\"),f=n(\"+i/H\"),O=n(\"w+U0\"),m=n(\"4CJn\"),w=n(\"NyWP\"),v=n.n(w),g=n(\"nKUr\");function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}O.a.login;function P(e){Object(j.c)();var t=Object(d.useRouter)(),n=Object(l.useState)(!1),r=n[0],s=n[1],u=Object(l.useState)(!1),O=u[0],w=u[1],x=Object(l.useState)(\"Username atau Password salah\"),P=(x[0],x[1]),k=Object(l.useState)({}),N=k[0],S=k[1],_=function(){var e=Object(i.a)(p.a.mark((function e(n){var r,a,c,o,i,u;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),w(!1),s(!0),r={identifier:N.username,password:N.password},a=JSON.stringify(r),\"https://js-strapi.keelola.net/api/auth/local\",c={method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:a},e.prev=7,e.next=10,fetch(\"https://js-strapi.keelola.net/api/auth/local\",c);case 10:return o=e.sent,e.next=13,o.json();case 13:if(!(i=e.sent).jwt){e.next=23;break}return v.a.set(null,\"token\",i.jwt,{maxAge:2592e3,path:\"/\",secure:!0,sameSite:\"strict\"}),e.next=18,C(i.jwt);case 18:u=e.sent,v.a.set(null,\"role\",u,{maxAge:2592e3,path:\"/\",secure:!0,sameSite:\"strict\"}),t.replace(\"/dashboard\"),e.next=24;break;case 23:w(!0);case 24:e.next=30;break;case 26:e.prev=26,e.t0=e.catch(7),w(!0),P(\"Kesalahan Pada Server. Silahkan cek kembali\");case 30:s(!1);case 31:case\"end\":return e.stop()}}),e,null,[[7,26]])})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(i.a)(p.a.mark((function e(t){var n,r,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return\"https://js-strapi.keelola.net/api/users/me?populate=role\",n={method:\"GET\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \"+t}},e.next=4,fetch(\"https://js-strapi.keelola.net/api/users/me?populate=role\",n);case 4:return r=e.sent,e.next=7,r.json();case 7:return a=e.sent,console.log(a),e.abrupt(\"return\",a.role.name);case 10:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function E(e){var t=e.target,n=t.name,r=t.value;S(y(y({},N),{},Object(o.a)({},n,r)))}return Object(g.jsx)(m.a,{className:\"isoSignInPage\",children:Object(g.jsx)(\"div\",{className:\"isoLoginContentWrapper\",children:Object(g.jsxs)(\"div\",{className:\"isoLoginContent\",children:[Object(g.jsx)(\"div\",{className:\"isoLogoWrapper\",children:\"JAYA SEHAT\"}),Object(g.jsxs)(\"div\",{className:\"isoSignInForm\",children:[Object(g.jsx)(\"div\",{className:\"isoInputWrapper\",children:Object(g.jsx)(h.c,{onChange:E,name:\"username\",id:\"inputUserName\",size:\"large\",placeholder:\"Username\"})}),Object(g.jsx)(\"div\",{className:\"isoInputWrapper\",children:Object(g.jsx)(h.c,{onChange:E,id:\"inpuPassword\",size:\"large\",name:\"password\",type:\"password\",placeholder:\"Password\"})}),Object(g.jsx)(\"div\",{className:\"isoInputWrapper isoLeftRightComponent\",children:r?Object(g.jsx)(\"div\",{className:\"center\",children:Object(g.jsx)(c.a,{})}):Object(g.jsx)(b.a,{type:\"primary\",onClick:_,children:Object(g.jsx)(f.a,{id:\"page.signInButton\"})})}),O?Object(g.jsx)(a.a,{message:\"Login Error\",description:\"Username atau Password salah\",type:\"error\",closable:!0,onClose:function(e){console.log(e,\"I was closed.\")}}):Object(g.jsx)(\"div\",{})]})]})})})}},hMb1:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/signin\",function(){return n(\"DB6d\")}])},rg98:function(e,t,n){\"use strict\";function r(e,t,n,r,a,s,c){try{var o=e[s](c),i=o.value}catch(u){return void n(u)}o.done?t(i):Promise.resolve(i).then(r,a)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(a,s){var c=e.apply(t,n);function o(e){r(c,a,s,o,i,\"next\",e)}function i(e){r(c,a,s,o,i,\"throw\",e)}o(void 0)}))}}n.d(t,\"a\",(function(){return a}))}},[[\"hMb1\",0,1,2,3,4,5,6,7,9,34]]]);","map":{"version":3,"sources":["static/chunks/pages/signin-3aa011417c0f5718db20.js"],"names":["_N_E","window","push","DB6d","module","__webpack_exports__","__webpack_require__","r","d","SignInPage","antd_lib_alert__WEBPACK_IMPORTED_MODULE_0__","antd_lib_alert__WEBPACK_IMPORTED_MODULE_0___default","n","antd_lib_spin__WEBPACK_IMPORTED_MODULE_1__","antd_lib_spin__WEBPACK_IMPORTED_MODULE_1___default","_Users_yudiananta_Development_NextJS_ERP_Dev_JS_Deploy_JS_Deploy_node_modules_next_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__","_Users_yudiananta_Development_NextJS_ERP_Dev_JS_Deploy_JS_Deploy_node_modules_next_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__","_Users_yudiananta_Development_NextJS_ERP_Dev_JS_Deploy_JS_Deploy_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4__","_Users_yudiananta_Development_NextJS_ERP_Dev_JS_Deploy_JS_Deploy_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default","react__WEBPACK_IMPORTED_MODULE_5__","react_redux__WEBPACK_IMPORTED_MODULE_6__","next_router__WEBPACK_IMPORTED_MODULE_7__","_iso_components_uielements_input__WEBPACK_IMPORTED_MODULE_8__","_iso_components_uielements_button__WEBPACK_IMPORTED_MODULE_9__","_iso_components_utility_intlMessages__WEBPACK_IMPORTED_MODULE_10__","_authentication_actions__WEBPACK_IMPORTED_MODULE_11__","_styled_SignIn_styles__WEBPACK_IMPORTED_MODULE_12__","nookies__WEBPACK_IMPORTED_MODULE_13__","nookies__WEBPACK_IMPORTED_MODULE_13___default","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","apply","_objectSpread","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","defineProperty","login","props","router","_useState","loading","setLoading","_useState2","failedLogin","setFailedLogin","_useState3","setfailedLoginMsg","_useState4","field","setField","handleLogin","_ref","a","mark","_callee","e","credentials","JSONdata","options","req","res","role","wrap","_context","prev","next","preventDefault","identifier","username","password","JSON","stringify","method","headers","body","fetch","sent","json","jwt","set","maxAge","path","secure","sameSite","getUserInformation","replace","t0","stop","_x","this","_ref2","_callee2","_context2","Authorization","console","log","abrupt","name","_x2","setValue","value","className","children","onChange","id","size","placeholder","type","onClick","message","description","closable","onClose","hMb1","exports","__NEXT_P","rg98","asyncGeneratorStep","gen","resolve","reject","_next","_throw","arg","info","error","done","Promise","then","_asyncToGenerator","fn","self","args","err","undefined"],"mappings":"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"},"name":"static/chunks/pages/signin-3aa011417c0f5718db20.js","input":"_N_E =\n(window[\"webpackJsonp_N_E\"] = window[\"webpackJsonp_N_E\"] || []).push([[103],{\n\n/***/ \"DB6d\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return SignInPage; });\n/* harmony import */ var antd_lib_alert__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"ATwu\");\n/* harmony import */ var antd_lib_alert__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(antd_lib_alert__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var antd_lib_spin__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"MM9K\");\n/* harmony import */ var antd_lib_spin__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(antd_lib_spin__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _Users_yudiananta_Development_NextJS_ERP_Dev_JS_Deploy_JS_Deploy_node_modules_next_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"cpVT\");\n/* harmony import */ var _Users_yudiananta_Development_NextJS_ERP_Dev_JS_Deploy_JS_Deploy_node_modules_next_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"rg98\");\n/* harmony import */ var _Users_yudiananta_Development_NextJS_ERP_Dev_JS_Deploy_JS_Deploy_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"vJKn\");\n/* harmony import */ var _Users_yudiananta_Development_NextJS_ERP_Dev_JS_Deploy_JS_Deploy_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_Users_yudiananta_Development_NextJS_ERP_Dev_JS_Deploy_JS_Deploy_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"/MKj\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"20a2\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var _iso_components_uielements_input__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"7I1n\");\n/* harmony import */ var _iso_components_uielements_button__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"QCuh\");\n/* harmony import */ var _iso_components_utility_intlMessages__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(\"+i/H\");\n/* harmony import */ var _authentication_actions__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(\"w+U0\");\n/* harmony import */ var _styled_SignIn_styles__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(\"4CJn\");\n/* harmony import */ var nookies__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(\"NyWP\");\n/* harmony import */ var nookies__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(nookies__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(\"nKUr\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__);\n\n\n\n\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { Object(_Users_yudiananta_Development_NextJS_ERP_Dev_JS_Deploy_JS_Deploy_node_modules_next_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar login = _authentication_actions__WEBPACK_IMPORTED_MODULE_11__[/* default */ \"a\"].login;\nfunction SignInPage(props) {\n  var dispatch = Object(react_redux__WEBPACK_IMPORTED_MODULE_6__[/* useDispatch */ \"c\"])();\n  var router = Object(next_router__WEBPACK_IMPORTED_MODULE_7__[\"useRouter\"])();\n\n  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useState\"])(false),\n      loading = _useState[0],\n      setLoading = _useState[1];\n\n  var _useState2 = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useState\"])(false),\n      failedLogin = _useState2[0],\n      setFailedLogin = _useState2[1];\n\n  var _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useState\"])(\"Username atau Password salah\"),\n      failedLoginMsg = _useState3[0],\n      setfailedLoginMsg = _useState3[1];\n\n  var _useState4 = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useState\"])({}),\n      field = _useState4[0],\n      setField = _useState4[1];\n\n  var handleLogin = /*#__PURE__*/function () {\n    var _ref = Object(_Users_yudiananta_Development_NextJS_ERP_Dev_JS_Deploy_JS_Deploy_node_modules_next_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])( /*#__PURE__*/_Users_yudiananta_Development_NextJS_ERP_Dev_JS_Deploy_JS_Deploy_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default.a.mark(function _callee(e) {\n      var credentials, JSONdata, endpoint, options, req, res, role;\n      return _Users_yudiananta_Development_NextJS_ERP_Dev_JS_Deploy_JS_Deploy_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default.a.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              e.preventDefault();\n              setFailedLogin(false);\n              setLoading(true);\n              credentials = {\n                identifier: field.username,\n                password: field.password\n              };\n              JSONdata = JSON.stringify(credentials);\n              endpoint = \"https://js-strapi.keelola.net/api\" + \"/auth/local\";\n              options = {\n                method: \"POST\",\n                headers: {\n                  \"Content-Type\": \"application/json\"\n                },\n                body: JSONdata\n              };\n              _context.prev = 7;\n              _context.next = 10;\n              return fetch(endpoint, options);\n\n            case 10:\n              req = _context.sent;\n              _context.next = 13;\n              return req.json();\n\n            case 13:\n              res = _context.sent;\n\n              if (!res.jwt) {\n                _context.next = 23;\n                break;\n              }\n\n              // set new token\n              nookies__WEBPACK_IMPORTED_MODULE_13___default.a.set(null, \"token\", res.jwt, {\n                maxAge: 30 * 24 * 60 * 60,\n                path: \"/\",\n                secure: \"https://js-strapi.keelola.net/api\" !== \"development\",\n                sameSite: \"strict\"\n              });\n              _context.next = 18;\n              return getUserInformation(res.jwt);\n\n            case 18:\n              role = _context.sent;\n              // set role token\n              nookies__WEBPACK_IMPORTED_MODULE_13___default.a.set(null, \"role\", role, {\n                maxAge: 30 * 24 * 60 * 60,\n                path: \"/\",\n                secure: \"https://js-strapi.keelola.net/api\" !== \"development\",\n                sameSite: \"strict\"\n              }); // redirect\n\n              router.replace(\"/dashboard\");\n              _context.next = 24;\n              break;\n\n            case 23:\n              setFailedLogin(true);\n\n            case 24:\n              _context.next = 30;\n              break;\n\n            case 26:\n              _context.prev = 26;\n              _context.t0 = _context[\"catch\"](7);\n              setFailedLogin(true);\n              setfailedLoginMsg(\"Kesalahan Pada Server. Silahkan cek kembali\");\n\n            case 30:\n              setLoading(false);\n\n            case 31:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[7, 26]]);\n    }));\n\n    return function handleLogin(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var getUserInformation = /*#__PURE__*/function () {\n    var _ref2 = Object(_Users_yudiananta_Development_NextJS_ERP_Dev_JS_Deploy_JS_Deploy_node_modules_next_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])( /*#__PURE__*/_Users_yudiananta_Development_NextJS_ERP_Dev_JS_Deploy_JS_Deploy_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default.a.mark(function _callee2(jwt) {\n      var endpoint, options, req, res;\n      return _Users_yudiananta_Development_NextJS_ERP_Dev_JS_Deploy_JS_Deploy_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_4___default.a.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              endpoint = \"https://js-strapi.keelola.net/api\" + \"/users/me?populate=role\";\n              options = {\n                method: \"GET\",\n                headers: {\n                  \"Content-Type\": \"application/json\",\n                  Authorization: \"Bearer \" + jwt\n                }\n              };\n              _context2.next = 4;\n              return fetch(endpoint, options);\n\n            case 4:\n              req = _context2.sent;\n              _context2.next = 7;\n              return req.json();\n\n            case 7:\n              res = _context2.sent;\n              console.log(res);\n              return _context2.abrupt(\"return\", res.role.name);\n\n            case 10:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function getUserInformation(_x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var onClose = function onClose(e) {\n    console.log(e, \"I was closed.\");\n  };\n\n  function setValue(e) {\n    var target = e.target;\n    var name = target.name;\n    var value = target.value;\n    setField(_objectSpread(_objectSpread({}, field), {}, Object(_Users_yudiananta_Development_NextJS_ERP_Dev_JS_Deploy_JS_Deploy_node_modules_next_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"])({}, name, value)));\n  } // =========================== UI ===========================\n\n\n  return /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__[\"jsx\"])(_styled_SignIn_styles__WEBPACK_IMPORTED_MODULE_12__[/* default */ \"a\"], {\n    className: \"isoSignInPage\",\n    children: /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__[\"jsx\"])(\"div\", {\n      className: \"isoLoginContentWrapper\",\n      children: /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__[\"jsxs\"])(\"div\", {\n        className: \"isoLoginContent\",\n        children: [/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__[\"jsx\"])(\"div\", {\n          className: \"isoLogoWrapper\",\n          children: \"JAYA SEHAT\"\n        }), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__[\"jsxs\"])(\"div\", {\n          className: \"isoSignInForm\",\n          children: [/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__[\"jsx\"])(\"div\", {\n            className: \"isoInputWrapper\",\n            children: /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__[\"jsx\"])(_iso_components_uielements_input__WEBPACK_IMPORTED_MODULE_8__[/* default */ \"c\"], {\n              onChange: setValue,\n              name: \"username\",\n              id: \"inputUserName\",\n              size: \"large\",\n              placeholder: \"Username\"\n            })\n          }), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__[\"jsx\"])(\"div\", {\n            className: \"isoInputWrapper\",\n            children: /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__[\"jsx\"])(_iso_components_uielements_input__WEBPACK_IMPORTED_MODULE_8__[/* default */ \"c\"], {\n              onChange: setValue,\n              id: \"inpuPassword\",\n              size: \"large\",\n              name: \"password\",\n              type: \"password\",\n              placeholder: \"Password\"\n            })\n          }), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__[\"jsx\"])(\"div\", {\n            className: \"isoInputWrapper isoLeftRightComponent\",\n            children: loading ? /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__[\"jsx\"])(\"div\", {\n              className: \"center\",\n              children: /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__[\"jsx\"])(antd_lib_spin__WEBPACK_IMPORTED_MODULE_1___default.a, {})\n            }) : /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__[\"jsx\"])(_iso_components_uielements_button__WEBPACK_IMPORTED_MODULE_9__[/* default */ \"a\"], {\n              type: \"primary\",\n              onClick: handleLogin,\n              children: /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__[\"jsx\"])(_iso_components_utility_intlMessages__WEBPACK_IMPORTED_MODULE_10__[/* default */ \"a\"], {\n                id: \"page.signInButton\"\n              })\n            })\n          }), failedLogin ? /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__[\"jsx\"])(antd_lib_alert__WEBPACK_IMPORTED_MODULE_0___default.a, {\n            message: \"Login Error\",\n            description: \"Username atau Password salah\",\n            type: \"error\",\n            closable: true,\n            onClose: onClose\n          }) : /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__[\"jsx\"])(\"div\", {})]\n        })]\n      })\n    })\n  });\n}\n\n/***/ }),\n\n/***/ \"hMb1\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/signin\",\n      function () {\n        return __webpack_require__(\"DB6d\");\n      }\n    ]);\n  \n\n/***/ }),\n\n/***/ \"rg98\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return _asyncToGenerator; });\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\n/***/ })\n\n},[[\"hMb1\",0,1,2,3,4,5,6,7,9,34]]]);","inputSourceMap":{"version":3,"sources":["/Users/yudiananta/Development/NextJS/ERP Dev/JS Deploy/JS-Deploy/node_modules/next/dist/build/webpack/loaders/next-babel-loader.js??ref--4!/Users/yudiananta/Development/NextJS/ERP Dev/JS Deploy/JS-Deploy/pages/signin.js","/Users/yudiananta/Development/NextJS/ERP Dev/JS Deploy/JS-Deploy/node_modules/next/dist/build/webpack/loaders/next-client-pages-loader.js?page=%2Fsignin&absolutePagePath=private-next-pages%2Fsignin.js!","/Users/yudiananta/Development/NextJS/ERP Dev/JS Deploy/JS-Deploy/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"],"names":[],"mappings":"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","file":"x","sourcesContent":["import _Alert from \"antd/lib/alert\";\nimport _Spin from \"antd/lib/spin\";\nimport _defineProperty from \"/Users/yudiananta/Development/NextJS/ERP Dev/JS Deploy/JS-Deploy/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"/Users/yudiananta/Development/NextJS/ERP Dev/JS Deploy/JS-Deploy/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport _regeneratorRuntime from \"/Users/yudiananta/Development/NextJS/ERP Dev/JS Deploy/JS-Deploy/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport React, { useState } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { useRouter } from \"next/router\";\nimport Input from \"@iso/components/uielements/input\";\nimport Button from \"@iso/components/uielements/button\";\nimport IntlMessages from \"@iso/components/utility/intlMessages\";\nimport authActions from \"../authentication/actions\";\nimport SignInStyleWrapper from \"../styled/SignIn.styles\";\nimport nookies from \"nookies\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar login = authActions.login;\nexport default function SignInPage(props) {\n  var dispatch = useDispatch();\n  var router = useRouter();\n\n  var _useState = useState(false),\n      loading = _useState[0],\n      setLoading = _useState[1];\n\n  var _useState2 = useState(false),\n      failedLogin = _useState2[0],\n      setFailedLogin = _useState2[1];\n\n  var _useState3 = useState(\"Username atau Password salah\"),\n      failedLoginMsg = _useState3[0],\n      setfailedLoginMsg = _useState3[1];\n\n  var _useState4 = useState({}),\n      field = _useState4[0],\n      setField = _useState4[1];\n\n  var handleLogin = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      var credentials, JSONdata, endpoint, options, req, res, role;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              e.preventDefault();\n              setFailedLogin(false);\n              setLoading(true);\n              credentials = {\n                identifier: field.username,\n                password: field.password\n              };\n              JSONdata = JSON.stringify(credentials);\n              endpoint = process.env.NEXT_PUBLIC_URL + \"/auth/local\";\n              options = {\n                method: \"POST\",\n                headers: {\n                  \"Content-Type\": \"application/json\"\n                },\n                body: JSONdata\n              };\n              _context.prev = 7;\n              _context.next = 10;\n              return fetch(endpoint, options);\n\n            case 10:\n              req = _context.sent;\n              _context.next = 13;\n              return req.json();\n\n            case 13:\n              res = _context.sent;\n\n              if (!res.jwt) {\n                _context.next = 23;\n                break;\n              }\n\n              // set new token\n              nookies.set(null, \"token\", res.jwt, {\n                maxAge: 30 * 24 * 60 * 60,\n                path: \"/\",\n                secure: process.env.NEXT_PUBLIC_URL !== \"development\",\n                sameSite: \"strict\"\n              });\n              _context.next = 18;\n              return getUserInformation(res.jwt);\n\n            case 18:\n              role = _context.sent;\n              // set role token\n              nookies.set(null, \"role\", role, {\n                maxAge: 30 * 24 * 60 * 60,\n                path: \"/\",\n                secure: process.env.NEXT_PUBLIC_URL !== \"development\",\n                sameSite: \"strict\"\n              }); // redirect\n\n              router.replace(\"/dashboard\");\n              _context.next = 24;\n              break;\n\n            case 23:\n              setFailedLogin(true);\n\n            case 24:\n              _context.next = 30;\n              break;\n\n            case 26:\n              _context.prev = 26;\n              _context.t0 = _context[\"catch\"](7);\n              setFailedLogin(true);\n              setfailedLoginMsg(\"Kesalahan Pada Server. Silahkan cek kembali\");\n\n            case 30:\n              setLoading(false);\n\n            case 31:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[7, 26]]);\n    }));\n\n    return function handleLogin(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var getUserInformation = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(jwt) {\n      var endpoint, options, req, res;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              endpoint = process.env.NEXT_PUBLIC_URL + \"/users/me?populate=role\";\n              options = {\n                method: \"GET\",\n                headers: {\n                  \"Content-Type\": \"application/json\",\n                  Authorization: \"Bearer \" + jwt\n                }\n              };\n              _context2.next = 4;\n              return fetch(endpoint, options);\n\n            case 4:\n              req = _context2.sent;\n              _context2.next = 7;\n              return req.json();\n\n            case 7:\n              res = _context2.sent;\n              console.log(res);\n              return _context2.abrupt(\"return\", res.role.name);\n\n            case 10:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function getUserInformation(_x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var onClose = function onClose(e) {\n    console.log(e, \"I was closed.\");\n  };\n\n  function setValue(e) {\n    var target = e.target;\n    var name = target.name;\n    var value = target.value;\n    setField(_objectSpread(_objectSpread({}, field), {}, _defineProperty({}, name, value)));\n  } // =========================== UI ===========================\n\n\n  return /*#__PURE__*/_jsx(SignInStyleWrapper, {\n    className: \"isoSignInPage\",\n    children: /*#__PURE__*/_jsx(\"div\", {\n      className: \"isoLoginContentWrapper\",\n      children: /*#__PURE__*/_jsxs(\"div\", {\n        className: \"isoLoginContent\",\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          className: \"isoLogoWrapper\",\n          children: \"JAYA SEHAT\"\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"isoSignInForm\",\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: \"isoInputWrapper\",\n            children: /*#__PURE__*/_jsx(Input, {\n              onChange: setValue,\n              name: \"username\",\n              id: \"inputUserName\",\n              size: \"large\",\n              placeholder: \"Username\"\n            })\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"isoInputWrapper\",\n            children: /*#__PURE__*/_jsx(Input, {\n              onChange: setValue,\n              id: \"inpuPassword\",\n              size: \"large\",\n              name: \"password\",\n              type: \"password\",\n              placeholder: \"Password\"\n            })\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"isoInputWrapper isoLeftRightComponent\",\n            children: loading ? /*#__PURE__*/_jsx(\"div\", {\n              className: \"center\",\n              children: /*#__PURE__*/_jsx(_Spin, {})\n            }) : /*#__PURE__*/_jsx(Button, {\n              type: \"primary\",\n              onClick: handleLogin,\n              children: /*#__PURE__*/_jsx(IntlMessages, {\n                id: \"page.signInButton\"\n              })\n            })\n          }), failedLogin ? /*#__PURE__*/_jsx(_Alert, {\n            message: \"Login Error\",\n            description: \"Username atau Password salah\",\n            type: \"error\",\n            closable: true,\n            onClose: onClose\n          }) : /*#__PURE__*/_jsx(\"div\", {})]\n        })]\n      })\n    })\n  });\n}","\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/signin\",\n      function () {\n        return require(\"private-next-pages/signin.js\");\n      }\n    ]);\n  ","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}"]}}