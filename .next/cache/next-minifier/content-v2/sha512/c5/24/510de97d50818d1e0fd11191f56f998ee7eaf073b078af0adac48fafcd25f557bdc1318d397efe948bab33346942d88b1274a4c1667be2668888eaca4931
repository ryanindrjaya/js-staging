{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[53],{\"85bS\":function(t,e,a){\"use strict\";a.r(e);var n=a(\"rg98\"),r=a(\"vJKn\"),i=a.n(r),s=(a(\"q1tI\"),a(\"NyWP\")),o=a.n(s),c=(a(\"wd/R\"),o.a.get(null,\"token\"));var u=function(){var t=Object(n.a)(i.a.mark((function t(e,a,n){var r,s,o,u;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=\"https://js-strapi.keelola.net/api\"+\"/inventory-details?filters[locations][id][$eq]=\".concat(n,\"&filters[products][id][$eq]=\").concat(a,\"&filters[expired_date][$eq]=2024-10-01&populate=*\"),s={method:\"GET\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \"+c.token}},t.next=4,fetch(r,s);case 4:return o=t.sent,t.next=7,o.json();case 7:(u=t.sent).data.length>0?l(u.data[0],e,a,n):d(e,a,n),p(e);case 10:case\"end\":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),l=function(){var t=Object(n.a)(i.a.mark((function t(e,a,n,r){var s,o,u,l,d,p,b;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=e.attributes.stock,o=s+a.data.stock,e.attributes.stock=o,e.attributes.locations=a.data.locations,e.attributes.products=a.data.products,u={data:e.attributes},l=JSON.stringify(u),d=\"https://js-strapi.keelola.net/api/inventory-details/\"+e.id,p={method:\"PUT\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \"+c.token},body:l},t.next=11,fetch(d,p);case 11:return b=t.sent,t.next=14,b.json();case 14:t.sent,200===b.status&&h(r,n,a.data.stock,a);case 16:case\"end\":return t.stop()}}),t)})));return function(e,a,n,r){return t.apply(this,arguments)}}(),d=function(){var t=Object(n.a)(i.a.mark((function t(e,a,n){var r,s,o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=JSON.stringify(e),\"https://js-strapi.keelola.net/api/inventory-details\",s={method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \"+c.token},body:r},t.next=5,fetch(\"https://js-strapi.keelola.net/api/inventory-details\",s);case 5:return o=t.sent,t.next=8,o.json();case 8:t.sent,200===o.status&&h(n,a,e.data.stock,e);case 10:case\"end\":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),p=function(){var t=Object(n.a)(i.a.mark((function t(e){var a,n,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=JSON.stringify(e),\"https://js-strapi.keelola.net/api/inventory-histories\",n={method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \"+c.token},body:a},t.next=5,fetch(\"https://js-strapi.keelola.net/api/inventory-histories\",n);case 5:return r=t.sent,t.next=8,r.json();case 8:t.sent;case 9:case\"end\":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),h=function(){var t=Object(n.a)(i.a.mark((function t(e,a,n,r){var s,o,u,l,d;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=\"https://js-strapi.keelola.net/api\"+\"/inventories?filters[locations][id][$eq]=\".concat(e,\"&filters[products][id][$eq]=\").concat(a,\"&populate=locations\"),o={method:\"GET\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \"+c.token}},t.next=4,fetch(s,o);case 4:return u=t.sent,t.next=7,u.json();case 7:if(!((l=t.sent).data.length>0)){t.next=14;break}return d=l.data[0].attributes.total_stock+n,t.next=12,b(l.data[0].id,l.data[0].attributes,d);case 12:t.next=16;break;case 14:return t.next=16,f(r,e);case 16:case\"end\":return t.stop()}}),t)})));return function(e,a,n,r){return t.apply(this,arguments)}}(),b=function(){var t=Object(n.a)(i.a.mark((function t(e,a,n){var r,s,o,u;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.total_stock=n,a.locations={id:a.locations.data[0].id},r={data:a},s=JSON.stringify(r),o=\"https://js-strapi.keelola.net/api/inventories/\"+e,u={method:\"PUT\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \"+c.token},body:s},t.next=8,fetch(o,u);case 8:t.sent;case 9:case\"end\":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),f=function(){var t=Object(n.a)(i.a.mark((function t(e,a){var n,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.data.total_stock=e.data.stock,e.data.locations={id:a},n=JSON.stringify(e),\"https://js-strapi.keelola.net/api/inventories\",r={method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \"+c.token},body:n},t.next=7,fetch(\"https://js-strapi.keelola.net/api/inventories\",r);case 7:t.sent;case 8:case\"end\":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}();e.default=function(t){t.attributes.purchasing_details.data.forEach((function(t){var e=new Date(t.attributes.expired_date),a=t.attributes.batch,n=t.attributes.unit_order,r=parseInt(t.attributes.total_order),i=t.attributes.product.data,s=function(t,e){for(var a=1,n=0,r=\"\",i=1;i<6;i++)e.attributes[\"unit_\".concat(i)]===t&&(n=i),e.attributes[\"unit_\".concat(i)]&&(r=e.attributes[\"unit_\".concat(i)]);for(var s=n+1;s<6;s++)0===(a*=e.attributes[\"qty_\".concat(s)])&&(a=1);return{total:a,productSmallestUnit:r}}(n,i),o=s.total*r,c=t.attributes.location.data,l={data:{expired_date:e,batch:a,products:{id:i.id},stock:o,smallest_unit:s.productSmallestUnit,locations:{id:c.id},keterangan:\"Pembelian\"}};u(l,i.id,c.id)}))}},AYpC:function(t,e,a){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/dashboard/pembelian/pembelian_barang\",function(){return a(\"t4Ct\")}])},HWoU:function(t,e,a){\"use strict\";var n=a(\"284h\"),r=a(\"TqRt\");Object.defineProperty(e,\"__esModule\",{value:!0}),e.default=void 0;var i=r(a(\"3tO9\")),s=n(a(\"q1tI\")),o=r(a(\"lYt9\")),c=r(a(\"KQxl\")),u=function(t,e){return s.createElement(c.default,(0,i.default)((0,i.default)({},t),{},{ref:e,icon:o.default}))};u.displayName=\"CalculatorOutlined\";var l=s.forwardRef(u);e.default=l},kc6U:function(t,e,a){\"use strict\";a.d(e,\"a\",(function(){return E}));var n=a(\"aOJk\"),r=a.n(n),i=a(\"EQeY\"),s=a.n(i),o=a(\"HWoU\"),c=a.n(o),u=a(\"MUZu\"),l=a.n(u),d=a(\"3YMB\"),p=a.n(d),h=a(\"wIya\"),b=a.n(h),f=a(\"FAat\"),j=a.n(f),v=a(\"d76Q\"),m=a.n(v),x=a(\"+P9B\"),g=a.n(x),k=a(\"xvhg\"),y=a(\"q1tI\"),O=a.n(y),w=a(\"G7Ku\"),_=a(\"jmRU\"),C=a(\"qw/b\"),N=a(\"3Yy8\"),S=a(\"oun0\"),T=a(\"vWxj\"),P=a(\"nKUr\");function D(t){var e=t.onConfirm,a=t.onCancel,n=t.title,r=t.message,i=t.id,s=O.a.useState(!1),o=Object(k.a)(s,2),c=o[0],u=o[1],l=function(){u(!1)},d=function(){a(),l()};return Object(P.jsxs)(\"div\",{children:[Object(P.jsxs)(\"button\",{className:\"hover:bg-red-400 text-red-600 hover:text-white transition-colors  text-xs font-normal py-2 px-2 rounded-md\",onClick:function(){u(!0)},children:[Object(P.jsx)(g.a,{className:\"mr-2 mt-0.5 float float-left\"}),\" Batalkan\"]}),Object(P.jsxs)(_.a,{open:c,onClose:d,\"aria-labelledby\":\"alert-dialog-title\",\"aria-describedby\":\"alert-dialog-description\",children:[Object(P.jsxs)(T.a,{id:\"alert-dialog-title\",className:\"font-bold\",children:[\" \",n]}),Object(P.jsx)(N.a,{children:Object(P.jsx)(S.a,{id:\"alert-dialog-description\",children:r})}),Object(P.jsxs)(C.a,{children:[Object(P.jsx)(w.a,{onClick:d,children:\"Tidak\"}),Object(P.jsx)(w.a,{onClick:function(){e(i),l()},className:\"text-red-500\",children:\"Ya\"})]})]})]})}var B=a(\"20a2\"),z=a(\"IdFE\");function E(t){var e,a,n=t.data,i=t.onDelete,o=t.onUpdate,u=t.onPageChange,d=t.onChangeStatus,h=Object(B.useRouter)(),f=j.a.Option,v=\"#F50\",x=\"#87D068\",g=\"#F4B042\",k=function(){console.log(\"onCancel\")};var y=new Intl.NumberFormat(\"id-ID\",{style:\"currency\",currency:\"IDR\",maximumFractionDigits:0}),O=function(t){return Object(P.jsxs)(\"div\",{children:[Object(P.jsx)(\"div\",{children:Object(P.jsxs)(\"button\",{onClick:function(){return function(t){h.push(\"pembelian_barang/print/\"+t.id)}(t)},className:\" hover:text-cyan-700 transition-colors  text-xs font-normal py-2 px-2 rounded-md \",children:[Object(P.jsx)(b.a,{className:\"mr-2 mt-0.5 float float-left\"}),\"Cetak\"]})}),Object(P.jsx)(\"div\",{children:Object(P.jsxs)(\"button\",{onClick:function(){return function(t){h.push(\"pembelian_barang/print/\"+t.id)}(t)},className:\" hover:text-cyan-700 transition-colors  text-xs font-normal py-2 px-2 rounded-md \",children:[Object(P.jsx)(p.a,{className:\"mr-2 mt-0.5 float float-left\"}),\"Lihat\"]})}),\"Diterima\"===t.attributes.status?Object(P.jsx)(\"div\",{}):Object(P.jsxs)(\"button\",{onClick:function(){return e=t.id,void o(e);var e},className:\" hover:text-cyan-700 transition-colors  text-xs font-normal py-2 px-2 rounded-md \",children:[Object(P.jsx)(l.a,{className:\"mr-2 mt-0.5 float float-left\"}),\"Edit\"]}),Object(P.jsx)(D,{onCancel:k,onConfirm:function(e){return function(t,e){console.log(t),i(t,e)}(e,t)},title:\"Batalkan Transaksi\",message:\"Transaksi yang dibatalkan tidak dapat dikembalikan lagi. Lanjutkan?\",id:t.id}),Object(P.jsx)(\"div\",{className:\"mt-4\",children:Object(P.jsxs)(\"button\",{onClick:function(){return function(t){h.push(\"pembelian_barang/pembayaran/\"+t.id)}(t)},className:\" hover:text-cyan-700 transition-colors  text-xs font-normal py-2 px-2 rounded-md \",children:[Object(P.jsx)(c.a,{className:\"mr-2 mt-0.5 float float-left\"}),\"Pembayaran\"]})}),Object(P.jsx)(\"div\",{children:Object(P.jsxs)(\"button\",{onClick:function(){return function(t){h.push(\"retur/\"+t.id)}(t)},className:\" hover:text-cyan-700 transition-colors  text-xs font-normal py-2 px-2 rounded-md \",children:[Object(P.jsx)(z.B,{className:\"mr-2 mt-0.5 float float-left\"}),\"Retur Pembelian\"]})})]})},w=[{name:\"NO LPB\",width:\"180px\",selector:function(t){var e,a;return null!==(e=null===(a=t.attributes)||void 0===a?void 0:a.no_purchasing)&&void 0!==e?e:\"-\"}},{name:\"Supplier\",width:\"180px\",selector:function(t){var e,a;return null!==(e=null===(a=t.attributes)||void 0===a?void 0:a.supplier.data.attributes.name)&&void 0!==e?e:\"-\"}},{name:\"Nota Supplier\",width:\"180px\",selector:function(t){var e,a;return null!==(e=null===(a=t.attributes)||void 0===a?void 0:a.no_nota_suppplier)&&void 0!==e?e:\"-\"}},{name:\"Tanggal\",width:\"150px\",selector:function(t){var e;return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"id-ID\";return new Date(t).toLocaleDateString(e)}(null===(e=t.attributes)||void 0===e?void 0:e.date_purchasing)}},{name:\"Lokasi\",width:\"200px\",selector:function(t){var e;return null===(e=t.attributes)||void 0===e?void 0:e.location.data.attributes.name}},{name:\"Status\",width:\"200px\",selector:function(t){return Object(P.jsx)(P.Fragment,{children:Object(P.jsxs)(j.a,{defaultValue:t.attributes.status,bordered:!1,disabled:\"Selesai\"===t.attributes.status||\"Dibatalkan\"===t.attributes.status,onChange:function(e){return d(e,t)},style:{width:\"150px\"},children:[Object(P.jsx)(f,{value:\"Diproses\",className:\"text-black\",children:Object(P.jsx)(s.a,{color:\"default\",children:\"Diproses\"})},\"Diproses\"),Object(P.jsx)(f,{value:\"Dibatalkan\",className:\"text-black\",children:Object(P.jsx)(s.a,{color:\"error\",children:\"Dibatalkan\"})},\"Dibatalkan\"),Object(P.jsx)(f,{value:\"Selesai\",className:\"text-black\",children:Object(P.jsx)(s.a,{color:\"success\",children:\"Selesai\"})},\"Selesai\")]})})}},{name:\"Tempo\",width:\"150px\",selector:function(t){var e,a,n,r,i,o,c=new Date(null===(e=t.attributes)||void 0===e?void 0:e.date_purchasing),u=parseInt(null!==(a=null===(n=t.attributes)||void 0===n?void 0:n.tempo_days)&&void 0!==a?a:0),l=new Date,d=!1,p=null===(r=t.attributes)||void 0===r?void 0:r.status_pembayaran,h=null===(i=t.attributes)||void 0===i?void 0:i.purchasing_payments.data;return\"Hari\"===(null===(o=t.attributes)||void 0===o?void 0:o.tempo_time)?c.setDate(c.getDate()+u):c.setDate(c.getMonth()+u),c<l&&(d=!0),d?\"Belum Lunas\"===p?Object(P.jsx)(s.a,{color:\"red\",children:\"Tempo\"}):\"Lunas\"===p?Object(P.jsx)(s.a,{color:\"green\",children:\"Selesai\"}):Object(P.jsx)(s.a,{color:g,children:\"Menunggu\"}):\"Belum Lunas\"===p&&h.length>0?Object(P.jsx)(s.a,{color:v,children:\"Tempo\"}):\"Lunas\"===p&&h.length>0?Object(P.jsx)(s.a,{color:x,children:\"Selesai\"}):Object(P.jsx)(s.a,{color:g,children:\"Menunggu\"})}},{name:\"Pembayaran\",width:\"150px\",selector:function(t){var e,a,n=null===(e=t.attributes.purchasing_payments)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.length,r=t.attributes.purchasing_payments.data[n-1];return(null===r||void 0===r?void 0:r.attributes.payment_remaining)===(null===r||void 0===r?void 0:r.attributes.total_payment)?Object(P.jsx)(s.a,{color:v,children:\"Belum Dibayar\"}):(null===r||void 0===r?void 0:r.attributes.payment_remaining)>0&&(null===r||void 0===r?void 0:r.attributes.payment_remaining)<(null===r||void 0===r?void 0:r.attributes.total_payment)?Object(P.jsx)(s.a,{color:g,children:\"Dibayar Sebagian\"}):(null===r||void 0===r?void 0:r.attributes.payment_remaining)<=0?Object(P.jsx)(s.a,{color:x,children:\"Selesai\"}):Object(P.jsx)(s.a,{color:g,children:\"Dibayar Sebagian\"})}},{name:\"Total Beli\",width:\"150px\",selector:function(t){var e,a;return y.format(null!==(e=null===(a=t.attributes)||void 0===a?void 0:a.total_purchasing)&&void 0!==e?e:0)}},{name:\"Tindakan\",width:\"250px\",selector:function(t){return Object(P.jsx)(P.Fragment,{children:Object(P.jsx)(r.a,{content:O(t),placement:\"bottom\",trigger:\"click\",children:Object(P.jsx)(\"button\",{className:\" text-cyan-700  transition-colors  text-xs font-normal py-2 rounded-md \",children:\"Tindakan\"})})})}}];return Object(P.jsx)(m.a,{customStyles:{headerStyle:{textAlign:\"center\"},headCells:{style:{color:\"white\",background:\"#036B82\"}}},onChangePage:u,paginationRowsPerPageOptions:[10],paginationTotalRows:null===n||void 0===n||null===(e=n.meta)||void 0===e||null===(a=e.pagination)||void 0===a?void 0:a.total,columns:w,data:n.data,pagination:!0,noDataComponent:\"Belum ada data Pembelian\"})}},lYt9:function(t,e,a){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});e.default={icon:{tag:\"svg\",attrs:{viewBox:\"64 64 896 896\",focusable:\"false\"},children:[{tag:\"path\",attrs:{d:\"M251.2 387H320v68.8c0 1.8 1.8 3.2 4 3.2h48c2.2 0 4-1.4 4-3.3V387h68.8c1.8 0 3.2-1.8 3.2-4v-48c0-2.2-1.4-4-3.3-4H376v-68.8c0-1.8-1.8-3.2-4-3.2h-48c-2.2 0-4 1.4-4 3.2V331h-68.8c-1.8 0-3.2 1.8-3.2 4v48c0 2.2 1.4 4 3.2 4zm328 0h193.6c1.8 0 3.2-1.8 3.2-4v-48c0-2.2-1.4-4-3.3-4H579.2c-1.8 0-3.2 1.8-3.2 4v48c0 2.2 1.4 4 3.2 4zm0 265h193.6c1.8 0 3.2-1.8 3.2-4v-48c0-2.2-1.4-4-3.3-4H579.2c-1.8 0-3.2 1.8-3.2 4v48c0 2.2 1.4 4 3.2 4zm0 104h193.6c1.8 0 3.2-1.8 3.2-4v-48c0-2.2-1.4-4-3.3-4H579.2c-1.8 0-3.2 1.8-3.2 4v48c0 2.2 1.4 4 3.2 4zm-195.7-81l61.2-74.9c4.3-5.2.7-13.1-5.9-13.1H388c-2.3 0-4.5 1-5.9 2.9l-34 41.6-34-41.6a7.85 7.85 0 00-5.9-2.9h-50.9c-6.6 0-10.2 7.9-5.9 13.1l61.2 74.9-62.7 76.8c-4.4 5.2-.8 13.1 5.8 13.1h50.8c2.3 0 4.5-1 5.9-2.9l35.5-43.5 35.5 43.5c1.5 1.8 3.7 2.9 5.9 2.9h50.8c6.6 0 10.2-7.9 5.9-13.1L383.5 675zM880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-36 732H180V180h664v664z\"}}]},name:\"calculator\",theme:\"outlined\"}},rg98:function(t,e,a){\"use strict\";function n(t,e,a,n,r,i,s){try{var o=t[i](s),c=o.value}catch(u){return void a(u)}o.done?e(c):Promise.resolve(c).then(n,r)}function r(t){return function(){var e=this,a=arguments;return new Promise((function(r,i){var s=t.apply(e,a);function o(t){n(s,r,i,o,c,\"next\",t)}function c(t){n(s,r,i,o,c,\"throw\",t)}o(void 0)}))}}a.d(e,\"a\",(function(){return r}))},t4Ct:function(t,e,a){\"use strict\";a.r(e);var n=a(\"rR1Q\"),r=a.n(n),i=a(\"iJl9\"),s=a.n(i),o=a(\"rg98\"),c=a(\"vJKn\"),u=a.n(c),l=a(\"g4pe\"),d=a.n(l),p=a(\"q1tI\"),h=a(\"kM/w\"),b=a(\"0Jbt\"),f=a(\"PKTO\"),j=a(\"20a2\"),v=a(\"xBBV\"),m=a(\"kc6U\"),x=a(\"NyWP\"),g=a.n(x),k=a(\"85bS\"),y=a(\"nKUr\");w.getInitialProps=function(){var t=Object(o.a)(u.a.mark((function t(e){var a,n,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=g.a.get(e),t.next=3,O(a);case 3:return r=t.sent,t.next=6,r.json();case 6:return n=t.sent,t.abrupt(\"return\",{props:{data:n}});case 8:case\"end\":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();var O=function(){var t=Object(o.a)(u.a.mark((function t(e){var a,n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return\"https://js-strapi.keelola.net/api/purchasings?populate=deep\",a={method:\"GET\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \"+e.token}},t.next=4,fetch(\"https://js-strapi.keelola.net/api/purchasings?populate=deep\",a);case 4:return n=t.sent,t.abrupt(\"return\",n);case 6:case\"end\":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();function w(t){var e=t.props.data,a=Object(p.useState)(e),n=a[0],i=a[1],c=Object(p.useState)(!1),l=c[0],x=(c[1],s.a.Search),O=Object(j.useRouter)(),w=function(){var t=Object(o.a)(u.a.mark((function t(e){var a,n,r,s,o;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=g.a.get(null,\"token\"),n=\"https://js-strapi.keelola.net/api/purchases?pagination[page]=\"+e,r={method:\"GET\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \"+a.token}},t.prev=3,t.next=6,fetch(n,r);case 6:return s=t.sent,t.next=9,s.json();case 9:(o=t.sent)?i((function(t){return{data:filterDuplicateData(t.data.concat(o.data)),meta:t.meta}})):console.log(\"something is wrong\"),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(3),console.log(t.t0);case 16:case\"end\":return t.stop()}}),t,null,[[3,13]])})));return function(e){return t.apply(this,arguments)}}(),_=function(){var t=Object(o.a)(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case\"end\":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),C=function(){var t=Object(o.a)(u.a.mark((function t(e,a){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:N(\"Dibatalkan\",a);case 1:case\"end\":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),N=function(t,e){e.attributes.status=t;var a=e;\"Selesai\"===t&&Object(k.default)(e),S(a,a.id)},S=function(){var t=Object(o.a)(u.a.mark((function t(e,a){var n,r,s,o,c,l,d,p,h,b,f,j,v,m,x,k;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(c in delete e.attributes.purchase,e.attributes)null!==e.attributes[c]&&void 0!==e.attributes[c]||delete e.attributes[c];return null!==(null===(n=e.attributes)||void 0===n||null===(r=n.document)||void 0===r?void 0:r.data)&&void 0!==(null===(s=e.attributes)||void 0===s||null===(o=s.document)||void 0===o?void 0:o.data)||null===(l=e.attributes)||void 0===l||delete l.document,d=[],p=[],e.attributes.purchasing_details.data.forEach((function(t){d.push({id:t.id})})),e.attributes.purchasing_payments.data.forEach((function(t){p.push({id:t.id})})),e.attributes.supplier={id:e.attributes.supplier.data.id},e.attributes.location={id:e.attributes.location.data.id},e.attributes.purchasing_details=d,e.attributes.purchasing_payments=p,h={data:e.attributes},b=JSON.stringify(h),f=g.a.get(null,\"token\"),j=\"https://js-strapi.keelola.net/api/purchasings/\"+a,v={method:\"PUT\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \"+f.token},body:b},t.next=18,fetch(j,v);case 18:return m=t.sent,t.next=21,m.json();case 21:if(x=t.sent,200!==m.status){t.next=30;break}return t.next=25,T(f);case 25:k=t.sent,\"Dibatalkan\"===x.data.attributes.status?O.reload():i(k),P(\"success\",\"Status berhasil dirubah\",\"Status berhasil dirubah. Silahkan cek detail LPB\"),t.next=31;break;case 30:P(\"error\",\"Status gagal dirubah\",\"Tedapat kesalahan yang menyebabkan status tidak dapat dirubah\");case 31:case\"end\":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),T=function(){var t=Object(o.a)(u.a.mark((function t(e){var a,n,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return\"https://js-strapi.keelola.net/api/purchasings?populate=deep\",a={method:\"GET\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \"+e.token}},t.next=4,fetch(\"https://js-strapi.keelola.net/api/purchasings?populate=deep\",a);case 4:return n=t.sent,r=n.json(),t.abrupt(\"return\",r);case 7:case\"end\":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),P=function(t,e,a){r.a[t]({message:e,description:a})};return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(d.a,{children:Object(y.jsx)(\"title\",{children:\"Pembelian Barang\"})}),Object(y.jsx)(b.a,{children:Object(y.jsxs)(f.a,{style:{},children:[Object(y.jsx)(v.a,{titleText:\"Lembar Pembelian Barang\"}),Object(y.jsxs)(h.a,{children:[Object(y.jsxs)(\"div\",{className:\"w-full flex justify-between\",children:[Object(y.jsx)(x,{className:\"\",loading:l,onChange:function(t){return _(t)},placeholder:\"Cari Pembelian\",style:{width:200}}),Object(y.jsx)(\"button\",{onClick:function(){O.push(\"/dashboard/pembelian/pembelian_barang/tambah\")},type:\"button\",className:\"bg-cyan-700 rounded px-5 py-2 hover:bg-cyan-800  shadow-sm flex float-right mb-5\",children:Object(y.jsx)(\"div\",{className:\"text-white text-center text-sm font-bold\",children:Object(y.jsx)(\"a\",{className:\"text-white no-underline text-xs sm:text-xs\",children:\"+ Tambah\"})})})]}),Object(y.jsx)(m.a,{data:n,onUpdate:function(t){P(\"info\",\"Work In Progress\",\"Hai, Fitur ini sedang dikerjakan. Silahkan tunggu pembaruan selanjutnya\")},onDelete:C,onPageChange:w,onChangeStatus:N})]})]})})]})}e.default=w}},[[\"AYpC\",0,1,13,21,2,3,4,5,6,7,9,8,10,12,11,14,17,18,19,20,23]]]);","map":{"version":3,"sources":["static/chunks/pages/dashboard/pembelian/pembelian_barang-e9ba2375a69e29dd54bf.js"],"names":["_N_E","window","push","module","__webpack_exports__","__webpack_require__","r","_Users_yudiananta_Development_NextJS_ERP_Dev_JS_Deploy_ERP_Sejati_node_modules_next_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__","_Users_yudiananta_Development_NextJS_ERP_Dev_JS_Deploy_ERP_Sejati_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__","_Users_yudiananta_Development_NextJS_ERP_Dev_JS_Deploy_ERP_Sejati_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default","n","nookies__WEBPACK_IMPORTED_MODULE_3__","nookies__WEBPACK_IMPORTED_MODULE_3___default","cookies","a","get","checkDetailStock","_ref","Object","mark","_callee","data","productId","locationId","endpoint","options","req","res","wrap","_context","prev","next","concat","method","headers","Authorization","token","fetch","sent","json","length","updateAPI","createAPI","createInventoryHistory","stop","_x","_x2","_x3","apply","this","arguments","_ref2","_callee2","resData","currentStock","finalStock","newData","JSONdata","_context2","attributes","stock","locations","products","JSON","stringify","id","body","status","createInventoryAPI","_x4","_x5","_x6","_x7","_ref3","_callee3","_context3","_x8","_x9","_x10","_ref4","_callee4","_context4","_x11","_ref5","_callee5","quantity","totalStock","_context5","total_stock","putExistingData","createNewData","_x12","_x13","_x14","_x15","_ref6","_callee6","putData","_context6","_x16","_x17","_x18","_ref7","_callee7","_context7","_x19","_x20","purchasing_details","forEach","element","expiredDate","Date","expired_date","batch","unitOrder","unit_order","totalOrder","parseInt","total_order","product","result","unit","total","productIndex","productSmallestUnit","index","_index","calculateTotalUnit","totalQty","location","smallest_unit","keterangan","AYpC","exports","__NEXT_P","HWoU","_interopRequireWildcard","_interopRequireDefault","defineProperty","value","default","_objectSpread2","React","_CalculatorOutlined","_AntdIcon","CalculatorOutlined","props","ref","createElement","icon","displayName","_default","forwardRef","kc6U","d","ReactDataTable","popover","popover_default","tag","tag_default","CalculatorOutlined_default","EditOutlined","EditOutlined_default","UnorderedListOutlined","UnorderedListOutlined_default","PrinterOutlined","PrinterOutlined_default","lib_select","select_default","index_cjs","index_cjs_default","CloseOutlined","CloseOutlined_default","slicedToArray","react","react_default","Button","Dialog","DialogActions","DialogContent","DialogContentText","DialogTitle","jsx_runtime","AlertDialog","onConfirm","onCancel","title","message","_React$useState","useState","_React$useState2","open","setOpen","handleClose","handleCancel","children","className","onClick","onClose","next_router","index_esm","_data$meta","_data$meta$pagination","onDelete","onUpdate","onPageChange","onChangeStatus","router","Option","tagRed","tagGreen","tagOrange","console","log","formatter","Intl","NumberFormat","style","currency","maximumFractionDigits","content","row","print","lihat","e","_onConfirm","pembayaran","retur","columns","name","width","selector","_row$attributes$no_pu","_row$attributes","no_purchasing","_row$attributes$suppl","_row$attributes2","supplier","_row$attributes$no_no","_row$attributes3","no_nota_suppplier","_row$attributes4","locale","undefined","toLocaleDateString","formatMyDate","date_purchasing","_row$attributes5","defaultValue","bordered","disabled","onChange","color","_row$attributes6","_row$attributes$tempo","_row$attributes7","_row$attributes8","_row$attributes9","_row$attributes10","tempoDate","tempoTime","tempo_days","today","isTempo","statusPembayaran","status_pembayaran","purchasingHistory","purchasing_payments","tempo_time","setDate","getDate","getMonth","_row$attributes$purch","_row$attributes$purch2","lastIndex","lastPayment","payment_remaining","total_payment","_row$attributes$total","_row$attributes11","format","total_purchasing","placement","trigger","customStyles","headerStyle","textAlign","headCells","background","onChangePage","paginationRowsPerPageOptions","paginationTotalRows","meta","pagination","noDataComponent","lYt9","attrs","viewBox","focusable","theme","rg98","asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","error","done","Promise","then","_asyncToGenerator","fn","self","args","err","t4Ct","antd_lib_notification__WEBPACK_IMPORTED_MODULE_0__","antd_lib_notification__WEBPACK_IMPORTED_MODULE_0___default","antd_lib_input__WEBPACK_IMPORTED_MODULE_1__","antd_lib_input__WEBPACK_IMPORTED_MODULE_1___default","_Users_yudiananta_Development_NextJS_ERP_Dev_JS_Deploy_ERP_Sejati_node_modules_next_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__","_Users_yudiananta_Development_NextJS_ERP_Dev_JS_Deploy_ERP_Sejati_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3__","_Users_yudiananta_Development_NextJS_ERP_Dev_JS_Deploy_ERP_Sejati_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default","next_head__WEBPACK_IMPORTED_MODULE_4__","next_head__WEBPACK_IMPORTED_MODULE_4___default","react__WEBPACK_IMPORTED_MODULE_5__","_iso_components_utility_layoutContent__WEBPACK_IMPORTED_MODULE_6__","_containers_DashboardLayout_DashboardLayout__WEBPACK_IMPORTED_MODULE_7__","_iso_components_utility_layoutWrapper_js__WEBPACK_IMPORTED_MODULE_8__","next_router__WEBPACK_IMPORTED_MODULE_9__","_components_TitlePage_TitlePage__WEBPACK_IMPORTED_MODULE_10__","_components_ReactDataTable_Purchases_PurchasingTable__WEBPACK_IMPORTED_MODULE_11__","nookies__WEBPACK_IMPORTED_MODULE_12__","nookies__WEBPACK_IMPORTED_MODULE_12___default","_utility_createInventory__WEBPACK_IMPORTED_MODULE_13__","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__","Pembelian","getInitialProps","context","fetchData","abrupt","_useState","purchase","setPurchase","_useState2","isSearching","Search","handlePageChange","page","prevData","filterDuplicateData","t0","onSearch","dataStatus","handleChangeStatus","_ref8","values","_values$attributes","_values$attributes$do","_values$attributes2","_values$attributes2$d","_values$attributes3","newValues","response","document","reload","openNotificationWithIcon","_ref9","_callee8","_context8","type","description","titleText","loading","placeholder"],"mappings":"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"},"name":"static/chunks/pages/dashboard/pembelian/pembelian_barang-e9ba2375a69e29dd54bf.js","input":"_N_E =\n(window[\"webpackJsonp_N_E\"] = window[\"webpackJsonp_N_E\"] || []).push([[53],{\n\n/***/ \"85bS\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _Users_yudiananta_Development_NextJS_ERP_Dev_JS_Deploy_ERP_Sejati_node_modules_next_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"rg98\");\n/* harmony import */ var _Users_yudiananta_Development_NextJS_ERP_Dev_JS_Deploy_ERP_Sejati_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"vJKn\");\n/* harmony import */ var _Users_yudiananta_Development_NextJS_ERP_Dev_JS_Deploy_ERP_Sejati_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_Users_yudiananta_Development_NextJS_ERP_Dev_JS_Deploy_ERP_Sejati_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var nookies__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"NyWP\");\n/* harmony import */ var nookies__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(nookies__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"wd/R\");\n/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_4__);\n\n\n\n\n\n// In this scenario, we will look up for data in inventory details with params exp.date, productId, and LocationId\n// if data is already exist, then we should update the stock inventory details with the exp.date\n// if they are not, then we create a new inventory details\n// It happens with master inventory too. So basicly, we gonna check first. If exist, then UPDATE.\nvar cookies = nookies__WEBPACK_IMPORTED_MODULE_3___default.a.get(null, \"token\");\n\nvar calculateTotalUnit = function calculateTotalUnit(unit, product) {\n  var total = 1;\n  var productIndex = 0;\n  var productSmallestUnit = \"\";\n\n  for (var index = 1; index < 6; index++) {\n    if (product.attributes[\"unit_\".concat(index)] === unit) {\n      productIndex = index;\n    }\n\n    if (product.attributes[\"unit_\".concat(index)]) {\n      productSmallestUnit = product.attributes[\"unit_\".concat(index)];\n    }\n  }\n\n  for (var _index = productIndex + 1; _index < 6; _index++) {\n    total = total * product.attributes[\"qty_\".concat(_index)];\n\n    if (total === 0) {\n      total = 1;\n    }\n  }\n\n  return {\n    total: total,\n    productSmallestUnit: productSmallestUnit\n  };\n};\n\nfunction createInventory(data) {\n  var purchasingDetails = data.attributes.purchasing_details.data;\n  purchasingDetails.forEach(function (element) {\n    var expiredDate = new Date(element.attributes.expired_date);\n    var batch = element.attributes.batch;\n    var unitOrder = element.attributes.unit_order;\n    var totalOrder = parseInt(element.attributes.total_order);\n    var product = element.attributes.product.data;\n    var result = calculateTotalUnit(unitOrder, product);\n    var totalQty = result.total * totalOrder;\n    var location = element.attributes.location.data;\n    var data = {\n      data: {\n        expired_date: expiredDate,\n        batch: batch,\n        products: {\n          id: product.id\n        },\n        stock: totalQty,\n        smallest_unit: result.productSmallestUnit,\n        locations: {\n          id: location.id\n        },\n        keterangan: \"Pembelian\"\n      }\n    }; // check existing stock\n\n    checkDetailStock(data, product.id, location.id); //\n  });\n}\n\nvar checkDetailStock = /*#__PURE__*/function () {\n  var _ref = Object(_Users_yudiananta_Development_NextJS_ERP_Dev_JS_Deploy_ERP_Sejati_node_modules_next_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])( /*#__PURE__*/_Users_yudiananta_Development_NextJS_ERP_Dev_JS_Deploy_ERP_Sejati_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee(data, productId, locationId) {\n    var endpoint, options, req, res;\n    return _Users_yudiananta_Development_NextJS_ERP_Dev_JS_Deploy_ERP_Sejati_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            endpoint = \"https://js-strapi.keelola.net/api\" + \"/inventory-details?filters[locations][id][$eq]=\".concat(locationId, \"&filters[products][id][$eq]=\").concat(productId, \"&filters[expired_date][$eq]=2024-10-01&populate=*\");\n            options = {\n              method: \"GET\",\n              headers: {\n                \"Content-Type\": \"application/json\",\n                Authorization: \"Bearer \" + cookies.token\n              }\n            };\n            _context.next = 4;\n            return fetch(endpoint, options);\n\n          case 4:\n            req = _context.sent;\n            _context.next = 7;\n            return req.json();\n\n          case 7:\n            res = _context.sent;\n\n            if (res.data.length > 0) {\n              updateAPI(res.data[0], data, productId, locationId);\n            } else {\n              createAPI(data, productId, locationId);\n            }\n\n            createInventoryHistory(data);\n\n          case 10:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function checkDetailStock(_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar updateAPI = /*#__PURE__*/function () {\n  var _ref2 = Object(_Users_yudiananta_Development_NextJS_ERP_Dev_JS_Deploy_ERP_Sejati_node_modules_next_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])( /*#__PURE__*/_Users_yudiananta_Development_NextJS_ERP_Dev_JS_Deploy_ERP_Sejati_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee2(resData, data, productId, locationId) {\n    var currentStock, finalStock, newData, JSONdata, endpoint, options, req, res;\n    return _Users_yudiananta_Development_NextJS_ERP_Dev_JS_Deploy_ERP_Sejati_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            currentStock = resData.attributes.stock;\n            finalStock = currentStock + data.data.stock;\n            resData.attributes.stock = finalStock;\n            resData.attributes.locations = data.data.locations;\n            resData.attributes.products = data.data.products;\n            newData = {\n              data: resData.attributes\n            };\n            JSONdata = JSON.stringify(newData);\n            endpoint = \"https://js-strapi.keelola.net/api\" + \"/inventory-details/\" + resData.id;\n            options = {\n              method: \"PUT\",\n              headers: {\n                \"Content-Type\": \"application/json\",\n                Authorization: \"Bearer \" + cookies.token\n              },\n              body: JSONdata\n            };\n            _context2.next = 11;\n            return fetch(endpoint, options);\n\n          case 11:\n            req = _context2.sent;\n            _context2.next = 14;\n            return req.json();\n\n          case 14:\n            res = _context2.sent;\n\n            if (req.status === 200) {\n              createInventoryAPI(locationId, productId, data.data.stock, data);\n            }\n\n          case 16:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n\n  return function updateAPI(_x4, _x5, _x6, _x7) {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\nvar createAPI = /*#__PURE__*/function () {\n  var _ref3 = Object(_Users_yudiananta_Development_NextJS_ERP_Dev_JS_Deploy_ERP_Sejati_node_modules_next_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])( /*#__PURE__*/_Users_yudiananta_Development_NextJS_ERP_Dev_JS_Deploy_ERP_Sejati_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee3(data, productId, locationId) {\n    var JSONdata, endpoint, options, req, res;\n    return _Users_yudiananta_Development_NextJS_ERP_Dev_JS_Deploy_ERP_Sejati_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            JSONdata = JSON.stringify(data);\n            endpoint = \"https://js-strapi.keelola.net/api\" + \"/inventory-details\";\n            options = {\n              method: \"POST\",\n              headers: {\n                \"Content-Type\": \"application/json\",\n                Authorization: \"Bearer \" + cookies.token\n              },\n              body: JSONdata\n            };\n            _context3.next = 5;\n            return fetch(endpoint, options);\n\n          case 5:\n            req = _context3.sent;\n            _context3.next = 8;\n            return req.json();\n\n          case 8:\n            res = _context3.sent;\n\n            if (req.status === 200) {\n              // check data location\n              createInventoryAPI(locationId, productId, data.data.stock, data);\n            }\n\n          case 10:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n\n  return function createAPI(_x8, _x9, _x10) {\n    return _ref3.apply(this, arguments);\n  };\n}();\n\nvar createInventoryHistory = /*#__PURE__*/function () {\n  var _ref4 = Object(_Users_yudiananta_Development_NextJS_ERP_Dev_JS_Deploy_ERP_Sejati_node_modules_next_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])( /*#__PURE__*/_Users_yudiananta_Development_NextJS_ERP_Dev_JS_Deploy_ERP_Sejati_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee4(data) {\n    var JSONdata, endpoint, options, req, res;\n    return _Users_yudiananta_Development_NextJS_ERP_Dev_JS_Deploy_ERP_Sejati_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            JSONdata = JSON.stringify(data);\n            endpoint = \"https://js-strapi.keelola.net/api\" + \"/inventory-histories\";\n            options = {\n              method: \"POST\",\n              headers: {\n                \"Content-Type\": \"application/json\",\n                Authorization: \"Bearer \" + cookies.token\n              },\n              body: JSONdata\n            };\n            _context4.next = 5;\n            return fetch(endpoint, options);\n\n          case 5:\n            req = _context4.sent;\n            _context4.next = 8;\n            return req.json();\n\n          case 8:\n            res = _context4.sent;\n\n          case 9:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4);\n  }));\n\n  return function createInventoryHistory(_x11) {\n    return _ref4.apply(this, arguments);\n  };\n}(); // ======================= MASTER INVENTORY =======================\n\n\nvar createInventoryAPI = /*#__PURE__*/function () {\n  var _ref5 = Object(_Users_yudiananta_Development_NextJS_ERP_Dev_JS_Deploy_ERP_Sejati_node_modules_next_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])( /*#__PURE__*/_Users_yudiananta_Development_NextJS_ERP_Dev_JS_Deploy_ERP_Sejati_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee5(locationId, productId, quantity, data) {\n    var endpoint, options, req, res, totalStock;\n    return _Users_yudiananta_Development_NextJS_ERP_Dev_JS_Deploy_ERP_Sejati_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee5$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            endpoint = \"https://js-strapi.keelola.net/api\" + \"/inventories?filters[locations][id][$eq]=\".concat(locationId, \"&filters[products][id][$eq]=\").concat(productId, \"&populate=locations\");\n            options = {\n              method: \"GET\",\n              headers: {\n                \"Content-Type\": \"application/json\",\n                Authorization: \"Bearer \" + cookies.token\n              }\n            };\n            _context5.next = 4;\n            return fetch(endpoint, options);\n\n          case 4:\n            req = _context5.sent;\n            _context5.next = 7;\n            return req.json();\n\n          case 7:\n            res = _context5.sent;\n\n            if (!(res.data.length > 0)) {\n              _context5.next = 14;\n              break;\n            }\n\n            // put existing data\n            totalStock = res.data[0].attributes.total_stock + quantity;\n            _context5.next = 12;\n            return putExistingData(res.data[0].id, res.data[0].attributes, totalStock);\n\n          case 12:\n            _context5.next = 16;\n            break;\n\n          case 14:\n            _context5.next = 16;\n            return createNewData(data, locationId);\n\n          case 16:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    }, _callee5);\n  }));\n\n  return function createInventoryAPI(_x12, _x13, _x14, _x15) {\n    return _ref5.apply(this, arguments);\n  };\n}();\n\nvar putExistingData = /*#__PURE__*/function () {\n  var _ref6 = Object(_Users_yudiananta_Development_NextJS_ERP_Dev_JS_Deploy_ERP_Sejati_node_modules_next_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])( /*#__PURE__*/_Users_yudiananta_Development_NextJS_ERP_Dev_JS_Deploy_ERP_Sejati_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee6(id, data, totalStock) {\n    var putData, JSONdata, endpoint, options, req;\n    return _Users_yudiananta_Development_NextJS_ERP_Dev_JS_Deploy_ERP_Sejati_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee6$(_context6) {\n      while (1) {\n        switch (_context6.prev = _context6.next) {\n          case 0:\n            data.total_stock = totalStock;\n            data.locations = {\n              id: data.locations.data[0].id\n            };\n            putData = {\n              data: data\n            };\n            JSONdata = JSON.stringify(putData);\n            endpoint = \"https://js-strapi.keelola.net/api\" + \"/inventories/\" + id;\n            options = {\n              method: \"PUT\",\n              headers: {\n                \"Content-Type\": \"application/json\",\n                Authorization: \"Bearer \" + cookies.token\n              },\n              body: JSONdata\n            };\n            _context6.next = 8;\n            return fetch(endpoint, options);\n\n          case 8:\n            req = _context6.sent;\n\n          case 9:\n          case \"end\":\n            return _context6.stop();\n        }\n      }\n    }, _callee6);\n  }));\n\n  return function putExistingData(_x16, _x17, _x18) {\n    return _ref6.apply(this, arguments);\n  };\n}();\n\nvar createNewData = /*#__PURE__*/function () {\n  var _ref7 = Object(_Users_yudiananta_Development_NextJS_ERP_Dev_JS_Deploy_ERP_Sejati_node_modules_next_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])( /*#__PURE__*/_Users_yudiananta_Development_NextJS_ERP_Dev_JS_Deploy_ERP_Sejati_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee7(data, locationId) {\n    var JSONdata, endpoint, options, req;\n    return _Users_yudiananta_Development_NextJS_ERP_Dev_JS_Deploy_ERP_Sejati_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee7$(_context7) {\n      while (1) {\n        switch (_context7.prev = _context7.next) {\n          case 0:\n            data.data.total_stock = data.data.stock;\n            data.data.locations = {\n              id: locationId\n            };\n            JSONdata = JSON.stringify(data);\n            endpoint = \"https://js-strapi.keelola.net/api\" + \"/inventories\";\n            options = {\n              method: \"POST\",\n              headers: {\n                \"Content-Type\": \"application/json\",\n                Authorization: \"Bearer \" + cookies.token\n              },\n              body: JSONdata\n            };\n            _context7.next = 7;\n            return fetch(endpoint, options);\n\n          case 7:\n            req = _context7.sent;\n\n          case 8:\n          case \"end\":\n            return _context7.stop();\n        }\n      }\n    }, _callee7);\n  }));\n\n  return function createNewData(_x19, _x20) {\n    return _ref7.apply(this, arguments);\n  };\n}();\n\nvar getUserLocation = /*#__PURE__*/function () {\n  var _ref8 = Object(_Users_yudiananta_Development_NextJS_ERP_Dev_JS_Deploy_ERP_Sejati_node_modules_next_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])( /*#__PURE__*/_Users_yudiananta_Development_NextJS_ERP_Dev_JS_Deploy_ERP_Sejati_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee8(cookies) {\n    var endpoint, options, req, res;\n    return _Users_yudiananta_Development_NextJS_ERP_Dev_JS_Deploy_ERP_Sejati_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee8$(_context8) {\n      while (1) {\n        switch (_context8.prev = _context8.next) {\n          case 0:\n            endpoint = \"https://js-strapi.keelola.net/api\" + \"/users/me?populate=*\";\n            options = {\n              method: \"GET\",\n              headers: {\n                \"Content-Type\": \"application/json\",\n                Authorization: \"Bearer \" + cookies.token\n              },\n              body: JSONdata\n            };\n            _context8.next = 4;\n            return fetch(endpoint, options);\n\n          case 4:\n            req = _context8.sent;\n            _context8.next = 7;\n            return req.json();\n\n          case 7:\n            res = _context8.sent;\n            return _context8.abrupt(\"return\", res);\n\n          case 9:\n          case \"end\":\n            return _context8.stop();\n        }\n      }\n    }, _callee8);\n  }));\n\n  return function getUserLocation(_x21) {\n    return _ref8.apply(this, arguments);\n  };\n}();\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (createInventory);\n\n/***/ }),\n\n/***/ \"AYpC\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/dashboard/pembelian/pembelian_barang\",\n      function () {\n        return __webpack_require__(\"t4Ct\");\n      }\n    ]);\n  \n\n/***/ }),\n\n/***/ \"HWoU\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _interopRequireWildcard = __webpack_require__(\"284h\");\n\nvar _interopRequireDefault = __webpack_require__(\"TqRt\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _objectSpread2 = _interopRequireDefault(__webpack_require__(\"3tO9\"));\n\nvar React = _interopRequireWildcard(__webpack_require__(\"q1tI\"));\n\nvar _CalculatorOutlined = _interopRequireDefault(__webpack_require__(\"lYt9\"));\n\nvar _AntdIcon = _interopRequireDefault(__webpack_require__(\"KQxl\"));\n\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nvar CalculatorOutlined = function CalculatorOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(_AntdIcon.default, (0, _objectSpread2.default)((0, _objectSpread2.default)({}, props), {}, {\n    ref: ref,\n    icon: _CalculatorOutlined.default\n  }));\n};\n\nCalculatorOutlined.displayName = 'CalculatorOutlined';\n\nvar _default = /*#__PURE__*/React.forwardRef(CalculatorOutlined);\n\nexports.default = _default;\n\n/***/ }),\n\n/***/ \"kc6U\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, \"a\", function() { return /* binding */ ReactDataTable; });\n\n// EXTERNAL MODULE: ./node_modules/antd/lib/popover/index.js\nvar popover = __webpack_require__(\"aOJk\");\nvar popover_default = /*#__PURE__*/__webpack_require__.n(popover);\n\n// EXTERNAL MODULE: ./node_modules/antd/lib/tag/index.js\nvar tag = __webpack_require__(\"EQeY\");\nvar tag_default = /*#__PURE__*/__webpack_require__.n(tag);\n\n// EXTERNAL MODULE: ./node_modules/@ant-design/icons/lib/icons/CalculatorOutlined.js\nvar CalculatorOutlined = __webpack_require__(\"HWoU\");\nvar CalculatorOutlined_default = /*#__PURE__*/__webpack_require__.n(CalculatorOutlined);\n\n// EXTERNAL MODULE: ./node_modules/@ant-design/icons/lib/icons/EditOutlined.js\nvar EditOutlined = __webpack_require__(\"MUZu\");\nvar EditOutlined_default = /*#__PURE__*/__webpack_require__.n(EditOutlined);\n\n// EXTERNAL MODULE: ./node_modules/@ant-design/icons/lib/icons/UnorderedListOutlined.js\nvar UnorderedListOutlined = __webpack_require__(\"3YMB\");\nvar UnorderedListOutlined_default = /*#__PURE__*/__webpack_require__.n(UnorderedListOutlined);\n\n// EXTERNAL MODULE: ./node_modules/@ant-design/icons/lib/icons/PrinterOutlined.js\nvar PrinterOutlined = __webpack_require__(\"wIya\");\nvar PrinterOutlined_default = /*#__PURE__*/__webpack_require__.n(PrinterOutlined);\n\n// EXTERNAL MODULE: ./node_modules/antd/lib/select/index.js\nvar lib_select = __webpack_require__(\"FAat\");\nvar select_default = /*#__PURE__*/__webpack_require__.n(lib_select);\n\n// EXTERNAL MODULE: ./node_modules/react-data-table-component/dist/index.cjs.js\nvar index_cjs = __webpack_require__(\"d76Q\");\nvar index_cjs_default = /*#__PURE__*/__webpack_require__.n(index_cjs);\n\n// EXTERNAL MODULE: ./node_modules/@ant-design/icons/lib/icons/CloseOutlined.js\nvar CloseOutlined = __webpack_require__(\"+P9B\");\nvar CloseOutlined_default = /*#__PURE__*/__webpack_require__.n(CloseOutlined);\n\n// EXTERNAL MODULE: ./node_modules/next/node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 3 modules\nvar slicedToArray = __webpack_require__(\"xvhg\");\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(\"q1tI\");\nvar react_default = /*#__PURE__*/__webpack_require__.n(react);\n\n// EXTERNAL MODULE: ./node_modules/@mui/material/esm/Button/Button.js + 12 modules\nvar Button = __webpack_require__(\"G7Ku\");\n\n// EXTERNAL MODULE: ./node_modules/@mui/material/esm/Dialog/Dialog.js + 29 modules\nvar Dialog = __webpack_require__(\"jmRU\");\n\n// EXTERNAL MODULE: ./node_modules/@mui/material/esm/DialogActions/DialogActions.js + 1 modules\nvar DialogActions = __webpack_require__(\"qw/b\");\n\n// EXTERNAL MODULE: ./node_modules/@mui/material/esm/DialogContent/DialogContent.js + 1 modules\nvar DialogContent = __webpack_require__(\"3Yy8\");\n\n// EXTERNAL MODULE: ./node_modules/@mui/material/esm/DialogContentText/DialogContentText.js + 1 modules\nvar DialogContentText = __webpack_require__(\"oun0\");\n\n// EXTERNAL MODULE: ./node_modules/@mui/material/esm/DialogTitle/DialogTitle.js\nvar DialogTitle = __webpack_require__(\"vWxj\");\n\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(\"nKUr\");\n\n// CONCATENATED MODULE: ./components/Alert/AlertCancel.js\n\n\n\n\n\n\n\n\n\n\n\nfunction AlertDialog(_ref) {\n  var onConfirm = _ref.onConfirm,\n      onCancel = _ref.onCancel,\n      title = _ref.title,\n      message = _ref.message,\n      id = _ref.id;\n\n  var _React$useState = react_default.a.useState(false),\n      _React$useState2 = Object(slicedToArray[\"a\" /* default */])(_React$useState, 2),\n      open = _React$useState2[0],\n      setOpen = _React$useState2[1];\n\n  var handleClickOpen = function handleClickOpen() {\n    setOpen(true);\n  };\n\n  var handleClose = function handleClose() {\n    setOpen(false);\n  };\n\n  var handleConfirm = function handleConfirm() {\n    onConfirm(id);\n    handleClose();\n  };\n\n  var handleCancel = function handleCancel() {\n    onCancel();\n    handleClose();\n  };\n\n  return /*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\", {\n    children: [/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"button\", {\n      className: \"hover:bg-red-400 text-red-600 hover:text-white transition-colors  text-xs font-normal py-2 px-2 rounded-md\",\n      onClick: handleClickOpen,\n      children: [/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CloseOutlined_default.a, {\n        className: \"mr-2 mt-0.5 float float-left\"\n      }), \" Batalkan\"]\n    }), /*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Dialog[\"a\" /* default */], {\n      open: open,\n      onClose: handleCancel,\n      \"aria-labelledby\": \"alert-dialog-title\",\n      \"aria-describedby\": \"alert-dialog-description\",\n      children: [/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(DialogTitle[\"a\" /* default */], {\n        id: \"alert-dialog-title\",\n        className: \"font-bold\",\n        children: [\" \", title]\n      }), /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(DialogContent[\"a\" /* default */], {\n        children: /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(DialogContentText[\"a\" /* default */], {\n          id: \"alert-dialog-description\",\n          children: message\n        })\n      }), /*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(DialogActions[\"a\" /* default */], {\n        children: [/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button[\"a\" /* default */], {\n          onClick: handleCancel,\n          children: \"Tidak\"\n        }), /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button[\"a\" /* default */], {\n          onClick: handleConfirm,\n          className: \"text-red-500\",\n          children: \"Ya\"\n        })]\n      })]\n    })]\n  });\n}\n// EXTERNAL MODULE: ./node_modules/next/router.js\nvar next_router = __webpack_require__(\"20a2\");\n\n// EXTERNAL MODULE: ./node_modules/react-icons/io/index.esm.js\nvar index_esm = __webpack_require__(\"IdFE\");\n\n// CONCATENATED MODULE: ./components/ReactDataTable/Purchases/PurchasingTable.js\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction ReactDataTable(_ref) {\n  var _data$meta, _data$meta$pagination;\n\n  var data = _ref.data,\n      onDelete = _ref.onDelete,\n      onUpdate = _ref.onUpdate,\n      onPageChange = _ref.onPageChange,\n      onChangeStatus = _ref.onChangeStatus;\n  var router = Object(next_router[\"useRouter\"])();\n  var Option = select_default.a.Option;\n  var tagRed = \"#F50\";\n  var tagGreen = \"#87D068\";\n  var tagOrange = \"#F4B042\";\n\n  var print = function print(row) {\n    router.push(\"pembelian_barang/print/\" + row.id); // router.push('/dashboard')\n  };\n\n  var lihat = function lihat(row) {\n    router.push(\"pembelian_barang/print/\" + row.id);\n  };\n\n  var pembayaran = function pembayaran(row) {\n    router.push(\"pembelian_barang/pembayaran/\" + row.id);\n  };\n\n  var retur = function retur(row) {\n    router.push(\"retur/\" + row.id);\n  };\n\n  var _onConfirm = function onConfirm(id, row) {\n    console.log(id);\n    onDelete(id, row);\n  };\n\n  var onCancel = function onCancel() {\n    console.log(\"onCancel\");\n  };\n\n  var onEdit = function onEdit(id) {\n    onUpdate(id);\n  };\n\n  function formatMyDate(value) {\n    var locale = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"id-ID\";\n    return new Date(value).toLocaleDateString(locale);\n  }\n\n  var formatter = new Intl.NumberFormat(\"id-ID\", {\n    style: \"currency\",\n    currency: \"IDR\",\n    maximumFractionDigits: 0\n  });\n\n  var content = function content(row) {\n    return /*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\", {\n      children: [/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\", {\n        children: /*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"button\", {\n          onClick: function onClick() {\n            return print(row);\n          },\n          className: \" hover:text-cyan-700 transition-colors  text-xs font-normal py-2 px-2 rounded-md \",\n          children: [/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(PrinterOutlined_default.a, {\n            className: \"mr-2 mt-0.5 float float-left\"\n          }), \"Cetak\"]\n        })\n      }), /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\", {\n        children: /*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"button\", {\n          onClick: function onClick() {\n            return lihat(row);\n          },\n          className: \" hover:text-cyan-700 transition-colors  text-xs font-normal py-2 px-2 rounded-md \",\n          children: [/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(UnorderedListOutlined_default.a, {\n            className: \"mr-2 mt-0.5 float float-left\"\n          }), \"Lihat\"]\n        })\n      }), row.attributes.status === \"Diterima\" ? /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\", {}) : /*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"button\", {\n        onClick: function onClick() {\n          return onEdit(row.id);\n        },\n        className: \" hover:text-cyan-700 transition-colors  text-xs font-normal py-2 px-2 rounded-md \",\n        children: [/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(EditOutlined_default.a, {\n          className: \"mr-2 mt-0.5 float float-left\"\n        }), \"Edit\"]\n      }), /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(AlertDialog, {\n        onCancel: onCancel,\n        onConfirm: function onConfirm(e) {\n          return _onConfirm(e, row);\n        },\n        title: \"Batalkan Transaksi\",\n        message: \"Transaksi yang dibatalkan tidak dapat dikembalikan lagi. Lanjutkan?\",\n        id: row.id\n      }), /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\", {\n        className: \"mt-4\",\n        children: /*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"button\", {\n          onClick: function onClick() {\n            return pembayaran(row);\n          },\n          className: \" hover:text-cyan-700 transition-colors  text-xs font-normal py-2 px-2 rounded-md \",\n          children: [/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CalculatorOutlined_default.a, {\n            className: \"mr-2 mt-0.5 float float-left\"\n          }), \"Pembayaran\"]\n        })\n      }), /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\", {\n        children: /*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"button\", {\n          onClick: function onClick() {\n            return retur(row);\n          },\n          className: \" hover:text-cyan-700 transition-colors  text-xs font-normal py-2 px-2 rounded-md \",\n          children: [/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(index_esm[\"B\" /* IoIosSwap */], {\n            className: \"mr-2 mt-0.5 float float-left\"\n          }), \"Retur Pembelian\"]\n        })\n      })]\n    });\n  };\n\n  var customStyles = {\n    headerStyle: {\n      textAlign: \"center\"\n    },\n    headCells: {\n      style: {\n        color: \"white\",\n        background: \"#036B82\"\n      }\n    }\n  };\n  var columns = [{\n    name: \"NO LPB\",\n    width: \"180px\",\n    selector: function selector(row) {\n      var _row$attributes$no_pu, _row$attributes;\n\n      return (_row$attributes$no_pu = (_row$attributes = row.attributes) === null || _row$attributes === void 0 ? void 0 : _row$attributes.no_purchasing) !== null && _row$attributes$no_pu !== void 0 ? _row$attributes$no_pu : \"-\";\n    }\n  }, {\n    name: \"Supplier\",\n    width: \"180px\",\n    selector: function selector(row) {\n      var _row$attributes$suppl, _row$attributes2;\n\n      return (_row$attributes$suppl = (_row$attributes2 = row.attributes) === null || _row$attributes2 === void 0 ? void 0 : _row$attributes2.supplier.data.attributes.name) !== null && _row$attributes$suppl !== void 0 ? _row$attributes$suppl : \"-\";\n    }\n  }, {\n    name: \"Nota Supplier\",\n    width: \"180px\",\n    selector: function selector(row) {\n      var _row$attributes$no_no, _row$attributes3;\n\n      return (_row$attributes$no_no = (_row$attributes3 = row.attributes) === null || _row$attributes3 === void 0 ? void 0 : _row$attributes3.no_nota_suppplier) !== null && _row$attributes$no_no !== void 0 ? _row$attributes$no_no : \"-\";\n    }\n  }, {\n    name: \"Tanggal\",\n    width: \"150px\",\n    selector: function selector(row) {\n      var _row$attributes4;\n\n      return formatMyDate((_row$attributes4 = row.attributes) === null || _row$attributes4 === void 0 ? void 0 : _row$attributes4.date_purchasing);\n    }\n  }, {\n    name: \"Lokasi\",\n    width: \"200px\",\n    selector: function selector(row) {\n      var _row$attributes5;\n\n      return (_row$attributes5 = row.attributes) === null || _row$attributes5 === void 0 ? void 0 : _row$attributes5.location.data.attributes.name;\n    }\n  }, {\n    name: \"Status\",\n    width: \"200px\",\n    selector: function selector(row) {\n      return /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(jsx_runtime[\"Fragment\"], {\n        children: /*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(select_default.a, {\n          defaultValue: row.attributes.status,\n          bordered: false,\n          disabled: row.attributes.status === \"Selesai\" || row.attributes.status === \"Dibatalkan\",\n          onChange: function onChange(e) {\n            return onChangeStatus(e, row);\n          },\n          style: {\n            width: \"150px\"\n          },\n          children: [/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Option, {\n            value: \"Diproses\",\n            className: \"text-black\",\n            children: /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(tag_default.a, {\n              color: \"default\",\n              children: \"Diproses\"\n            })\n          }, \"Diproses\"), /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Option, {\n            value: \"Dibatalkan\",\n            className: \"text-black\",\n            children: /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(tag_default.a, {\n              color: \"error\",\n              children: \"Dibatalkan\"\n            })\n          }, \"Dibatalkan\"), /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Option, {\n            value: \"Selesai\",\n            className: \"text-black\",\n            children: /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(tag_default.a, {\n              color: \"success\",\n              children: \"Selesai\"\n            })\n          }, \"Selesai\")]\n        })\n      });\n    }\n  }, {\n    name: \"Tempo\",\n    width: \"150px\",\n    selector: function selector(row) {\n      var _row$attributes6, _row$attributes$tempo, _row$attributes7, _row$attributes8, _row$attributes9, _row$attributes10;\n\n      var tempoDate = new Date((_row$attributes6 = row.attributes) === null || _row$attributes6 === void 0 ? void 0 : _row$attributes6.date_purchasing);\n      var tempoTime = parseInt((_row$attributes$tempo = (_row$attributes7 = row.attributes) === null || _row$attributes7 === void 0 ? void 0 : _row$attributes7.tempo_days) !== null && _row$attributes$tempo !== void 0 ? _row$attributes$tempo : 0);\n      var today = new Date();\n      var isTempo = false;\n      var statusPembayaran = (_row$attributes8 = row.attributes) === null || _row$attributes8 === void 0 ? void 0 : _row$attributes8.status_pembayaran;\n      var purchasingHistory = (_row$attributes9 = row.attributes) === null || _row$attributes9 === void 0 ? void 0 : _row$attributes9.purchasing_payments.data;\n\n      if (((_row$attributes10 = row.attributes) === null || _row$attributes10 === void 0 ? void 0 : _row$attributes10.tempo_time) === \"Hari\") {\n        tempoDate.setDate(tempoDate.getDate() + tempoTime);\n      } else {\n        tempoDate.setDate(tempoDate.getMonth() + tempoTime);\n      }\n\n      if (tempoDate < today) {\n        isTempo = true;\n      }\n\n      if (isTempo) {\n        if (statusPembayaran === \"Belum Lunas\") {\n          return /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(tag_default.a, {\n            color: \"red\",\n            children: \"Tempo\"\n          });\n        } else if (statusPembayaran === \"Lunas\") {\n          return /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(tag_default.a, {\n            color: \"green\",\n            children: \"Selesai\"\n          });\n        }\n      } else {\n        if (statusPembayaran === \"Belum Lunas\" && purchasingHistory.length > 0) {\n          return /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(tag_default.a, {\n            color: tagRed,\n            children: \"Tempo\"\n          });\n        } else if (statusPembayaran === \"Lunas\" && purchasingHistory.length > 0) {\n          return /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(tag_default.a, {\n            color: tagGreen,\n            children: \"Selesai\"\n          });\n        } else {\n          return /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(tag_default.a, {\n            color: tagOrange,\n            children: \"Menunggu\"\n          });\n        }\n      }\n\n      return /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(tag_default.a, {\n        color: tagOrange,\n        children: \"Menunggu\"\n      });\n    }\n  }, {\n    name: \"Pembayaran\",\n    width: \"150px\",\n    selector: function selector(row) {\n      var _row$attributes$purch, _row$attributes$purch2;\n\n      var lastIndex = (_row$attributes$purch = row.attributes.purchasing_payments) === null || _row$attributes$purch === void 0 ? void 0 : (_row$attributes$purch2 = _row$attributes$purch.data) === null || _row$attributes$purch2 === void 0 ? void 0 : _row$attributes$purch2.length;\n      var lastPayment = row.attributes.purchasing_payments.data[lastIndex - 1];\n\n      if ((lastPayment === null || lastPayment === void 0 ? void 0 : lastPayment.attributes.payment_remaining) === (lastPayment === null || lastPayment === void 0 ? void 0 : lastPayment.attributes.total_payment)) {\n        return /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(tag_default.a, {\n          color: tagRed,\n          children: \"Belum Dibayar\"\n        });\n      } else if ((lastPayment === null || lastPayment === void 0 ? void 0 : lastPayment.attributes.payment_remaining) > 0 && (lastPayment === null || lastPayment === void 0 ? void 0 : lastPayment.attributes.payment_remaining) < (lastPayment === null || lastPayment === void 0 ? void 0 : lastPayment.attributes.total_payment)) {\n        return /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(tag_default.a, {\n          color: tagOrange,\n          children: \"Dibayar Sebagian\"\n        });\n      } else if ((lastPayment === null || lastPayment === void 0 ? void 0 : lastPayment.attributes.payment_remaining) <= 0) {\n        return /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(tag_default.a, {\n          color: tagGreen,\n          children: \"Selesai\"\n        });\n      } else {\n        return /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(tag_default.a, {\n          color: tagOrange,\n          children: \"Dibayar Sebagian\"\n        });\n      }\n    }\n  }, {\n    name: \"Total Beli\",\n    width: \"150px\",\n    selector: function selector(row) {\n      var _row$attributes$total, _row$attributes11;\n\n      return formatter.format((_row$attributes$total = (_row$attributes11 = row.attributes) === null || _row$attributes11 === void 0 ? void 0 : _row$attributes11.total_purchasing) !== null && _row$attributes$total !== void 0 ? _row$attributes$total : 0);\n    }\n  }, {\n    name: \"Tindakan\",\n    width: \"250px\",\n    selector: function selector(row) {\n      return /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(jsx_runtime[\"Fragment\"], {\n        children: /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(popover_default.a, {\n          content: content(row),\n          placement: \"bottom\",\n          trigger: \"click\",\n          children: /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\", {\n            className: \" text-cyan-700  transition-colors  text-xs font-normal py-2 rounded-md \",\n            children: \"Tindakan\"\n          })\n        })\n      });\n    }\n  }];\n  return /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(index_cjs_default.a, {\n    customStyles: customStyles,\n    onChangePage: onPageChange,\n    paginationRowsPerPageOptions: [10],\n    paginationTotalRows: data === null || data === void 0 ? void 0 : (_data$meta = data.meta) === null || _data$meta === void 0 ? void 0 : (_data$meta$pagination = _data$meta.pagination) === null || _data$meta$pagination === void 0 ? void 0 : _data$meta$pagination.total,\n    columns: columns,\n    data: data.data,\n    pagination: true,\n    noDataComponent: \"Belum ada data Pembelian\"\n  });\n}\n\n/***/ }),\n\n/***/ \"lYt9\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n// This icon file is generated automatically.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar CalculatorOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M251.2 387H320v68.8c0 1.8 1.8 3.2 4 3.2h48c2.2 0 4-1.4 4-3.3V387h68.8c1.8 0 3.2-1.8 3.2-4v-48c0-2.2-1.4-4-3.3-4H376v-68.8c0-1.8-1.8-3.2-4-3.2h-48c-2.2 0-4 1.4-4 3.2V331h-68.8c-1.8 0-3.2 1.8-3.2 4v48c0 2.2 1.4 4 3.2 4zm328 0h193.6c1.8 0 3.2-1.8 3.2-4v-48c0-2.2-1.4-4-3.3-4H579.2c-1.8 0-3.2 1.8-3.2 4v48c0 2.2 1.4 4 3.2 4zm0 265h193.6c1.8 0 3.2-1.8 3.2-4v-48c0-2.2-1.4-4-3.3-4H579.2c-1.8 0-3.2 1.8-3.2 4v48c0 2.2 1.4 4 3.2 4zm0 104h193.6c1.8 0 3.2-1.8 3.2-4v-48c0-2.2-1.4-4-3.3-4H579.2c-1.8 0-3.2 1.8-3.2 4v48c0 2.2 1.4 4 3.2 4zm-195.7-81l61.2-74.9c4.3-5.2.7-13.1-5.9-13.1H388c-2.3 0-4.5 1-5.9 2.9l-34 41.6-34-41.6a7.85 7.85 0 00-5.9-2.9h-50.9c-6.6 0-10.2 7.9-5.9 13.1l61.2 74.9-62.7 76.8c-4.4 5.2-.8 13.1 5.8 13.1h50.8c2.3 0 4.5-1 5.9-2.9l35.5-43.5 35.5 43.5c1.5 1.8 3.7 2.9 5.9 2.9h50.8c6.6 0 10.2-7.9 5.9-13.1L383.5 675zM880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-36 732H180V180h664v664z\" } }] }, \"name\": \"calculator\", \"theme\": \"outlined\" };\nexports.default = CalculatorOutlined;\n\n\n/***/ }),\n\n/***/ \"rg98\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return _asyncToGenerator; });\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\n/***/ }),\n\n/***/ \"t4Ct\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var antd_lib_notification__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"rR1Q\");\n/* harmony import */ var antd_lib_notification__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(antd_lib_notification__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var antd_lib_input__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"iJl9\");\n/* harmony import */ var antd_lib_input__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(antd_lib_input__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _Users_yudiananta_Development_NextJS_ERP_Dev_JS_Deploy_ERP_Sejati_node_modules_next_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"rg98\");\n/* harmony import */ var _Users_yudiananta_Development_NextJS_ERP_Dev_JS_Deploy_ERP_Sejati_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"vJKn\");\n/* harmony import */ var _Users_yudiananta_Development_NextJS_ERP_Dev_JS_Deploy_ERP_Sejati_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_Users_yudiananta_Development_NextJS_ERP_Dev_JS_Deploy_ERP_Sejati_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var next_head__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"g4pe\");\n/* harmony import */ var next_head__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_head__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _iso_components_utility_layoutContent__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"kM/w\");\n/* harmony import */ var _containers_DashboardLayout_DashboardLayout__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"0Jbt\");\n/* harmony import */ var _iso_components_utility_layoutWrapper_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"PKTO\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"20a2\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var _components_TitlePage_TitlePage__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(\"xBBV\");\n/* harmony import */ var _components_ReactDataTable_Purchases_PurchasingTable__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(\"kc6U\");\n/* harmony import */ var nookies__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(\"NyWP\");\n/* harmony import */ var nookies__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(nookies__WEBPACK_IMPORTED_MODULE_12__);\n/* harmony import */ var _utility_createInventory__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(\"85bS\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(\"nKUr\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nPembelian.getInitialProps = /*#__PURE__*/function () {\n  var _ref = Object(_Users_yudiananta_Development_NextJS_ERP_Dev_JS_Deploy_ERP_Sejati_node_modules_next_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"])( /*#__PURE__*/_Users_yudiananta_Development_NextJS_ERP_Dev_JS_Deploy_ERP_Sejati_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default.a.mark(function _callee(context) {\n    var cookies, data, req;\n    return _Users_yudiananta_Development_NextJS_ERP_Dev_JS_Deploy_ERP_Sejati_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default.a.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            cookies = nookies__WEBPACK_IMPORTED_MODULE_12___default.a.get(context);\n            _context.next = 3;\n            return fetchData(cookies);\n\n          case 3:\n            req = _context.sent;\n            _context.next = 6;\n            return req.json();\n\n          case 6:\n            data = _context.sent;\n            return _context.abrupt(\"return\", {\n              props: {\n                data: data\n              }\n            });\n\n          case 8:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function (_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar fetchData = /*#__PURE__*/function () {\n  var _ref2 = Object(_Users_yudiananta_Development_NextJS_ERP_Dev_JS_Deploy_ERP_Sejati_node_modules_next_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"])( /*#__PURE__*/_Users_yudiananta_Development_NextJS_ERP_Dev_JS_Deploy_ERP_Sejati_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default.a.mark(function _callee2(cookies) {\n    var endpoint, options, req;\n    return _Users_yudiananta_Development_NextJS_ERP_Dev_JS_Deploy_ERP_Sejati_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default.a.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            endpoint = \"https://js-strapi.keelola.net/api\" + \"/purchasings?populate=deep\";\n            options = {\n              method: \"GET\",\n              headers: {\n                \"Content-Type\": \"application/json\",\n                Authorization: \"Bearer \" + cookies.token\n              }\n            };\n            _context2.next = 4;\n            return fetch(endpoint, options);\n\n          case 4:\n            req = _context2.sent;\n            return _context2.abrupt(\"return\", req);\n\n          case 6:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n\n  return function fetchData(_x2) {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\nfunction Pembelian(_ref3) {\n  var props = _ref3.props;\n  var data = props.data;\n\n  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useState\"])(data),\n      purchase = _useState[0],\n      setPurchase = _useState[1];\n\n  var _useState2 = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useState\"])(false),\n      isSearching = _useState2[0],\n      setIsSearching = _useState2[1];\n\n  var Search = antd_lib_input__WEBPACK_IMPORTED_MODULE_1___default.a.Search;\n  var router = Object(next_router__WEBPACK_IMPORTED_MODULE_9__[\"useRouter\"])();\n\n  var handleAdd = function handleAdd() {\n    router.push(\"/dashboard/pembelian/pembelian_barang/tambah\");\n  };\n\n  var handleUpdate = function handleUpdate(id) {\n    // router.push(\"/dashboard/pembelian/order_pembelian/edit/\" + id);\n    openNotificationWithIcon(\"info\", \"Work In Progress\", \"Hai, Fitur ini sedang dikerjakan. Silahkan tunggu pembaruan selanjutnya\");\n  };\n\n  var handlePageChange = /*#__PURE__*/function () {\n    var _ref4 = Object(_Users_yudiananta_Development_NextJS_ERP_Dev_JS_Deploy_ERP_Sejati_node_modules_next_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"])( /*#__PURE__*/_Users_yudiananta_Development_NextJS_ERP_Dev_JS_Deploy_ERP_Sejati_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default.a.mark(function _callee3(page) {\n      var cookies, endpoint, options, req, res;\n      return _Users_yudiananta_Development_NextJS_ERP_Dev_JS_Deploy_ERP_Sejati_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default.a.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              cookies = nookies__WEBPACK_IMPORTED_MODULE_12___default.a.get(null, \"token\");\n              endpoint = \"https://js-strapi.keelola.net/api\" + \"/purchases?pagination[page]=\" + page;\n              options = {\n                method: \"GET\",\n                headers: {\n                  \"Content-Type\": \"application/json\",\n                  Authorization: \"Bearer \" + cookies.token\n                }\n              };\n              _context3.prev = 3;\n              _context3.next = 6;\n              return fetch(endpoint, options);\n\n            case 6:\n              req = _context3.sent;\n              _context3.next = 9;\n              return req.json();\n\n            case 9:\n              res = _context3.sent;\n\n              if (res) {\n                setPurchase(function (prevData) {\n                  return {\n                    data: filterDuplicateData(prevData.data.concat(res.data)),\n                    meta: prevData.meta\n                  };\n                });\n              } else {\n                console.log(\"something is wrong\");\n              }\n\n              _context3.next = 16;\n              break;\n\n            case 13:\n              _context3.prev = 13;\n              _context3.t0 = _context3[\"catch\"](3);\n              console.log(_context3.t0);\n\n            case 16:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, null, [[3, 13]]);\n    }));\n\n    return function handlePageChange(_x3) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  var onSearch = /*#__PURE__*/function () {\n    var _ref5 = Object(_Users_yudiananta_Development_NextJS_ERP_Dev_JS_Deploy_ERP_Sejati_node_modules_next_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"])( /*#__PURE__*/_Users_yudiananta_Development_NextJS_ERP_Dev_JS_Deploy_ERP_Sejati_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default.a.mark(function _callee4(e) {\n      return _Users_yudiananta_Development_NextJS_ERP_Dev_JS_Deploy_ERP_Sejati_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default.a.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n\n    return function onSearch(_x4) {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n\n  var searchQuery = /*#__PURE__*/function () {\n    var _ref6 = Object(_Users_yudiananta_Development_NextJS_ERP_Dev_JS_Deploy_ERP_Sejati_node_modules_next_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"])( /*#__PURE__*/_Users_yudiananta_Development_NextJS_ERP_Dev_JS_Deploy_ERP_Sejati_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default.a.mark(function _callee5(keywords) {\n      return _Users_yudiananta_Development_NextJS_ERP_Dev_JS_Deploy_ERP_Sejati_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default.a.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5);\n    }));\n\n    return function searchQuery(_x5) {\n      return _ref6.apply(this, arguments);\n    };\n  }();\n\n  var handleCancel = /*#__PURE__*/function () {\n    var _ref7 = Object(_Users_yudiananta_Development_NextJS_ERP_Dev_JS_Deploy_ERP_Sejati_node_modules_next_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"])( /*#__PURE__*/_Users_yudiananta_Development_NextJS_ERP_Dev_JS_Deploy_ERP_Sejati_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default.a.mark(function _callee6(id, row) {\n      return _Users_yudiananta_Development_NextJS_ERP_Dev_JS_Deploy_ERP_Sejati_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default.a.wrap(function _callee6$(_context6) {\n        while (1) {\n          switch (_context6.prev = _context6.next) {\n            case 0:\n              onChangeStatus(\"Dibatalkan\", row);\n\n            case 1:\n            case \"end\":\n              return _context6.stop();\n          }\n        }\n      }, _callee6);\n    }));\n\n    return function handleCancel(_x6, _x7) {\n      return _ref7.apply(this, arguments);\n    };\n  }();\n\n  var onChangeStatus = function onChangeStatus(status, row) {\n    row.attributes.status = status;\n    var dataStatus = row;\n\n    if (status === \"Selesai\") {\n      // invetory handle\n      Object(_utility_createInventory__WEBPACK_IMPORTED_MODULE_13__[\"default\"])(row);\n    }\n\n    handleChangeStatus(dataStatus, dataStatus.id);\n  };\n\n  var handleChangeStatus = /*#__PURE__*/function () {\n    var _ref8 = Object(_Users_yudiananta_Development_NextJS_ERP_Dev_JS_Deploy_ERP_Sejati_node_modules_next_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"])( /*#__PURE__*/_Users_yudiananta_Development_NextJS_ERP_Dev_JS_Deploy_ERP_Sejati_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default.a.mark(function _callee7(values, id) {\n      var _values$attributes, _values$attributes$do, _values$attributes2, _values$attributes2$d;\n\n      var key, _values$attributes3, purchasing_details, purchasing_payments, newValues, JSONdata, cookies, endpoint, options, req, res, response;\n\n      return _Users_yudiananta_Development_NextJS_ERP_Dev_JS_Deploy_ERP_Sejati_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default.a.wrap(function _callee7$(_context7) {\n        while (1) {\n          switch (_context7.prev = _context7.next) {\n            case 0:\n              // // clean object\n              delete values.attributes.purchase;\n\n              for (key in values.attributes) {\n                if (values.attributes[key] === null || values.attributes[key] === undefined) {\n                  delete values.attributes[key];\n                }\n              }\n\n              if (((_values$attributes = values.attributes) === null || _values$attributes === void 0 ? void 0 : (_values$attributes$do = _values$attributes.document) === null || _values$attributes$do === void 0 ? void 0 : _values$attributes$do.data) === null || ((_values$attributes2 = values.attributes) === null || _values$attributes2 === void 0 ? void 0 : (_values$attributes2$d = _values$attributes2.document) === null || _values$attributes2$d === void 0 ? void 0 : _values$attributes2$d.data) === undefined) {\n                (_values$attributes3 = values.attributes) === null || _values$attributes3 === void 0 ? true : delete _values$attributes3.document;\n              }\n\n              purchasing_details = [];\n              purchasing_payments = [];\n              values.attributes.purchasing_details.data.forEach(function (element) {\n                purchasing_details.push({\n                  id: element.id\n                });\n              });\n              values.attributes.purchasing_payments.data.forEach(function (element) {\n                purchasing_payments.push({\n                  id: element.id\n                });\n              });\n              values.attributes.supplier = {\n                id: values.attributes.supplier.data.id\n              };\n              values.attributes.location = {\n                id: values.attributes.location.data.id\n              };\n              values.attributes.purchasing_details = purchasing_details;\n              values.attributes.purchasing_payments = purchasing_payments;\n              newValues = {\n                data: values.attributes\n              };\n              JSONdata = JSON.stringify(newValues);\n              cookies = nookies__WEBPACK_IMPORTED_MODULE_12___default.a.get(null, \"token\");\n              endpoint = \"https://js-strapi.keelola.net/api\" + \"/purchasings/\" + id;\n              options = {\n                method: \"PUT\",\n                headers: {\n                  \"Content-Type\": \"application/json\",\n                  Authorization: \"Bearer \" + cookies.token\n                },\n                body: JSONdata\n              };\n              _context7.next = 18;\n              return fetch(endpoint, options);\n\n            case 18:\n              req = _context7.sent;\n              _context7.next = 21;\n              return req.json();\n\n            case 21:\n              res = _context7.sent;\n\n              if (!(req.status === 200)) {\n                _context7.next = 30;\n                break;\n              }\n\n              _context7.next = 25;\n              return fetchData(cookies);\n\n            case 25:\n              response = _context7.sent;\n\n              if (res.data.attributes.status === \"Dibatalkan\") {\n                router.reload();\n              } else {\n                setPurchase(response);\n              }\n\n              openNotificationWithIcon(\"success\", \"Status berhasil dirubah\", \"Status berhasil dirubah. Silahkan cek detail LPB\");\n              _context7.next = 31;\n              break;\n\n            case 30:\n              openNotificationWithIcon(\"error\", \"Status gagal dirubah\", \"Tedapat kesalahan yang menyebabkan status tidak dapat dirubah\");\n\n            case 31:\n            case \"end\":\n              return _context7.stop();\n          }\n        }\n      }, _callee7);\n    }));\n\n    return function handleChangeStatus(_x8, _x9) {\n      return _ref8.apply(this, arguments);\n    };\n  }();\n\n  var fetchData = /*#__PURE__*/function () {\n    var _ref9 = Object(_Users_yudiananta_Development_NextJS_ERP_Dev_JS_Deploy_ERP_Sejati_node_modules_next_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"])( /*#__PURE__*/_Users_yudiananta_Development_NextJS_ERP_Dev_JS_Deploy_ERP_Sejati_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default.a.mark(function _callee8(cookies) {\n      var endpoint, options, req, res;\n      return _Users_yudiananta_Development_NextJS_ERP_Dev_JS_Deploy_ERP_Sejati_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default.a.wrap(function _callee8$(_context8) {\n        while (1) {\n          switch (_context8.prev = _context8.next) {\n            case 0:\n              endpoint = \"https://js-strapi.keelola.net/api\" + \"/purchasings?populate=deep\";\n              options = {\n                method: \"GET\",\n                headers: {\n                  \"Content-Type\": \"application/json\",\n                  Authorization: \"Bearer \" + cookies.token\n                }\n              };\n              _context8.next = 4;\n              return fetch(endpoint, options);\n\n            case 4:\n              req = _context8.sent;\n              res = req.json();\n              return _context8.abrupt(\"return\", res);\n\n            case 7:\n            case \"end\":\n              return _context8.stop();\n          }\n        }\n      }, _callee8);\n    }));\n\n    return function fetchData(_x10) {\n      return _ref9.apply(this, arguments);\n    };\n  }();\n\n  var openNotificationWithIcon = function openNotificationWithIcon(type, title, message) {\n    antd_lib_notification__WEBPACK_IMPORTED_MODULE_0___default.a[type]({\n      message: title,\n      description: message\n    });\n  };\n\n  return /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__[\"jsxs\"])(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__[\"Fragment\"], {\n    children: [/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__[\"jsx\"])(next_head__WEBPACK_IMPORTED_MODULE_4___default.a, {\n      children: /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__[\"jsx\"])(\"title\", {\n        children: \"Pembelian Barang\"\n      })\n    }), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__[\"jsx\"])(_containers_DashboardLayout_DashboardLayout__WEBPACK_IMPORTED_MODULE_7__[/* default */ \"a\"], {\n      children: /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__[\"jsxs\"])(_iso_components_utility_layoutWrapper_js__WEBPACK_IMPORTED_MODULE_8__[/* default */ \"a\"], {\n        style: {},\n        children: [/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__[\"jsx\"])(_components_TitlePage_TitlePage__WEBPACK_IMPORTED_MODULE_10__[/* default */ \"a\"], {\n          titleText: \"Lembar Pembelian Barang\"\n        }), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__[\"jsxs\"])(_iso_components_utility_layoutContent__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"], {\n          children: [/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__[\"jsxs\"])(\"div\", {\n            className: \"w-full flex justify-between\",\n            children: [/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__[\"jsx\"])(Search, {\n              className: \"\",\n              loading: isSearching,\n              onChange: function onChange(e) {\n                return onSearch(e);\n              },\n              placeholder: \"Cari Pembelian\",\n              style: {\n                width: 200\n              }\n            }), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__[\"jsx\"])(\"button\", {\n              onClick: handleAdd,\n              type: \"button\",\n              className: \"bg-cyan-700 rounded px-5 py-2 hover:bg-cyan-800  shadow-sm flex float-right mb-5\",\n              children: /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__[\"jsx\"])(\"div\", {\n                className: \"text-white text-center text-sm font-bold\",\n                children: /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__[\"jsx\"])(\"a\", {\n                  className: \"text-white no-underline text-xs sm:text-xs\",\n                  children: \"+ Tambah\"\n                })\n              })\n            })]\n          }), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__[\"jsx\"])(_components_ReactDataTable_Purchases_PurchasingTable__WEBPACK_IMPORTED_MODULE_11__[/* default */ \"a\"], {\n            data: purchase,\n            onUpdate: handleUpdate,\n            onDelete: handleCancel,\n            onPageChange: handlePageChange,\n            onChangeStatus: onChangeStatus\n          })]\n        })]\n      })\n    })]\n  });\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Pembelian);\n\n/***/ })\n\n},[[\"AYpC\",0,1,13,21,2,3,4,5,6,7,9,8,10,12,11,14,17,18,19,20,23]]]);","inputSourceMap":{"version":3,"sources":["/Users/yudiananta/Development/NextJS/ERP Dev/JS Deploy/ERP-Sejati/node_modules/next/dist/build/webpack/loaders/next-babel-loader.js??ref--4!/Users/yudiananta/Development/NextJS/ERP Dev/JS Deploy/ERP-Sejati/pages/dashboard/pembelian/utility/createInventory.js","/Users/yudiananta/Development/NextJS/ERP Dev/JS Deploy/ERP-Sejati/node_modules/next/dist/build/webpack/loaders/next-client-pages-loader.js?page=%2Fdashboard%2Fpembelian%2Fpembelian_barang&absolutePagePath=private-next-pages%2Fdashboard%2Fpembelian%2Fpembelian_barang%2Findex.js!","/Users/yudiananta/Development/NextJS/ERP Dev/JS Deploy/ERP-Sejati/node_modules/@ant-design/icons/lib/icons/CalculatorOutlined.js","/Users/yudiananta/Development/NextJS/ERP Dev/JS Deploy/ERP-Sejati/node_modules/next/dist/build/webpack/loaders/next-babel-loader.js??ref--4!/Users/yudiananta/Development/NextJS/ERP Dev/JS Deploy/ERP-Sejati/components/Alert/AlertCancel.js","/Users/yudiananta/Development/NextJS/ERP Dev/JS Deploy/ERP-Sejati/node_modules/next/dist/build/webpack/loaders/next-babel-loader.js??ref--4!/Users/yudiananta/Development/NextJS/ERP Dev/JS Deploy/ERP-Sejati/components/ReactDataTable/Purchases/PurchasingTable.js","/Users/yudiananta/Development/NextJS/ERP Dev/JS Deploy/ERP-Sejati/node_modules/@ant-design/icons-svg/lib/asn/CalculatorOutlined.js","/Users/yudiananta/Development/NextJS/ERP Dev/JS Deploy/ERP-Sejati/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","/Users/yudiananta/Development/NextJS/ERP Dev/JS Deploy/ERP-Sejati/node_modules/next/dist/build/webpack/loaders/next-babel-loader.js??ref--4!/Users/yudiananta/Development/NextJS/ERP Dev/JS Deploy/ERP-Sejati/pages/dashboard/pembelian/pembelian_barang/index.js"],"names":[],"mappings":";;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA6K;AACf;AACpI;AACI;AACG;AACjC;AACA;AACA;AACA;AACA,cAAc,8CAAO;;AAErB;AACA;AACA;AACA;;AAEA,qBAAqB,WAAW;AAChC;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,qCAAqC,YAAY;AACjD;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,MAAM;;AAEN,oDAAoD;AACpD,GAAG;AACH;;AAEA;AACA,aAAa,mMAAiB,eAAe,iKAAmB;AAChE;AACA,WAAW,iKAAmB;AAC9B;AACA;AACA;AACA,uBAAuB,mCAA2B;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,aAAa;AACb;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA,CAAC;;AAED;AACA,cAAc,mMAAiB,eAAe,iKAAmB;AACjE;AACA,WAAW,iKAAmB;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,mCAA2B;AAClD;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA,CAAC;;AAED;AACA,cAAc,mMAAiB,eAAe,iKAAmB;AACjE;AACA,WAAW,iKAAmB;AAC9B;AACA;AACA;AACA;AACA,uBAAuB,mCAA2B;AAClD;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA,CAAC;;AAED;AACA,cAAc,mMAAiB,eAAe,iKAAmB;AACjE;AACA,WAAW,iKAAmB;AAC9B;AACA;AACA;AACA;AACA,uBAAuB,mCAA2B;AAClD;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA,CAAC,GAAG;;;AAGJ;AACA,cAAc,mMAAiB,eAAe,iKAAmB;AACjE;AACA,WAAW,iKAAmB;AAC9B;AACA;AACA;AACA,uBAAuB,mCAA2B;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA,CAAC;;AAED;AACA,cAAc,mMAAiB,eAAe,iKAAmB;AACjE;AACA,WAAW,iKAAmB;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,mCAA2B;AAClD;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA,CAAC;;AAED;AACA,cAAc,mMAAiB,eAAe,iKAAmB;AACjE;AACA,WAAW,iKAAmB;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,mCAA2B;AAClD;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG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3B,+BAA+B,2BAAK;AACpC;AACA;AACA,WAAW;AACX;AACA,kCAAkC,0BAAI,CAAC,8BAAS;AAChD;AACA,WAAW;AACX,SAAS;AACT,OAAO;AACP,KAAK;AACL;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,0BAA0B,0BAAI,CAAC,uBAAS;AACxC,+BAA+B,2BAAK,CAAC,gBAAO;AAC5C;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;AACX,kCAAkC,0BAAI;AACtC;AACA;AACA,mCAAmC,0BAAI,CAAC,aAAI;AAC5C;AACA;AACA,aAAa;AACb,WAAW,4BAA4B,0BAAI;AAC3C;AACA;AACA,mCAAmC,0BAAI,CAAC,aAAI;AAC5C;AACA;AACA,aAAa;AACb,WAAW,8BAA8B,0BAAI;AAC7C;AACA;AACA,mCAAmC,0BAAI,CAAC,aAAI;AAC5C;AACA;AACA,aAAa;AACb,WAAW;AACX,SAAS;AACT,OAAO;AACP;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,8BAA8B,0BAAI,CAAC,aAAI;AACvC;AACA;AACA,WAAW;AACX,SAAS;AACT,8BAA8B,0BAAI,CAAC,aAAI;AACvC;AACA;AACA,WAAW;AACX;AACA,OAAO;AACP;AACA,8BAA8B,0BAAI,CAAC,aAAI;AACvC;AACA;AACA,WAAW;AACX,SAAS;AACT,8BAA8B,0BAAI,CAAC,aAAI;AACvC;AACA;AACA,WAAW;AACX,SAAS;AACT,8BAA8B,0BAAI,CAAC,aAAI;AACvC;AACA;AACA,WAAW;AACX;AACA;;AAEA,0BAA0B,0BAAI,CAAC,aAAI;AACnC;AACA;AACA,OAAO;AACP;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,4BAA4B,0BAAI,CAAC,aAAI;AACrC;AACA;AACA,SAAS;AACT,OAAO;AACP,4BAA4B,0BAAI,CAAC,aAAI;AACrC;AACA;AACA,SAAS;AACT,OAAO;AACP,4BAA4B,0BAAI,CAAC,aAAI;AACrC;AACA;AACA,SAAS;AACT,OAAO;AACP,4BAA4B,0BAAI,CAAC,aAAI;AACrC;AACA;AACA,SAAS;AACT;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,0BAA0B,0BAAI,CAAC,uBAAS;AACxC,+BAA+B,0BAAI,CAAC,iBAAQ;AAC5C;AACA;AACA;AACA,iCAAiC,0BAAI;AACrC;AACA;AACA,WAAW;AACX,SAAS;AACT,OAAO;AACP;AACA,GAAG;AACH,sBAAsB,0BAAI,CAAC,mBAAS;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,C;;;;;;;;AC3Va;AACb;AACA,8CAA8C,cAAc;AAC5D,0BAA0B,UAAU,yBAAyB,mDAAmD,gBAAgB,0BAA0B,s8BAAs8B,EAAE,GAAG;AACrmC;;;;;;;;;ACJA;AAAA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA,C;;;;;;;;AClCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkD;AACd;AACyI;AACf;AACjI;AACW;AAC0B;AACmB;AAChB;AAC7B;AAC2B;AAC2B;AAChE;AAC2B;AACT;AACE;AACQ;;AAE1D;AACA,aAAa,mMAAiB,eAAe,iKAAmB;AAChE;AACA,WAAW,iKAAmB;AAC9B;AACA;AACA;AACA,sBAAsB,+CAAO;AAC7B;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA,CAAC;;AAED;AACA,cAAc,mMAAiB,eAAe,iKAAmB;AACjE;AACA,WAAW,iKAAmB;AAC9B;AACA;AACA;AACA,uBAAuB,mCAA2B;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;;AAEA,kBAAkB,sDAAQ;AAC1B;AACA;;AAEA,mBAAmB,sDAAQ;AAC3B;AACA;;AAEA,eAAe,qDAAM;AACrB,eAAe,6DAAS;;AAExB;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,gBAAgB,mMAAiB,eAAe,iKAAmB;AACnE;AACA,aAAa,iKAAmB;AAChC;AACA;AACA;AACA,wBAAwB,+CAAO;AAC/B,yBAAyB,mCAA2B;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,eAAe;AACf;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;;AAEL;AACA;AACA;AACA,GAAG;;AAEH;AACA,gBAAgB,mMAAiB,eAAe,iKAAmB;AACnE,aAAa,iKAAmB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;;AAEL;AACA;AACA;AACA,GAAG;;AAEH;AACA,gBAAgB,mMAAiB,eAAe,iKAAmB;AACnE,aAAa,iKAAmB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;;AAEL;AACA;AACA;AACA,GAAG;;AAEH;AACA,gBAAgB,mMAAiB,eAAe,iKAAmB;AACnE,aAAa,iKAAmB;AAChC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;;AAEL;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA,MAAM,yEAAe;AACrB;;AAEA;AACA;;AAEA;AACA,gBAAgB,mMAAiB,eAAe,iKAAmB;AACnE;;AAEA;;AAEA,aAAa,iKAAmB;AAChC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,eAAe;AACf;AACA;AACA;AACA,iBAAiB;AACjB,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,+CAAO;AAC/B,yBAAyB,mCAA2B;AACpD;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,eAAe;AACf;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;;AAEL;AACA;AACA;AACA,GAAG;;AAEH;AACA,gBAAgB,mMAAiB,eAAe,iKAAmB;AACnE;AACA,aAAa,iKAAmB;AAChC;AACA;AACA;AACA,yBAAyB,mCAA2B;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;;AAEL;AACA;AACA;AACA,GAAG;;AAEH;AACA,IAAI,4DAAa;AACjB;AACA;AACA,KAAK;AACL;;AAEA,sBAAsB,+DAAK,CAAC,2DAAS;AACrC,4BAA4B,8DAAI,CAAC,gDAAI;AACrC,6BAA6B,8DAAI;AACjC;AACA,OAAO;AACP,KAAK,gBAAgB,8DAAI,CAAC,2FAAe;AACzC,6BAA6B,+DAAK,CAAC,wFAAa;AAChD,iBAAiB;AACjB,gCAAgC,8DAAI,CAAC,gFAAS;AAC9C;AACA,SAAS,gBAAgB,+DAAK,CAAC,qFAAa;AAC5C,kCAAkC,+DAAK;AACvC;AACA,oCAAoC,8DAAI;AACxC;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA,aAAa,gBAAgB,8DAAI;AACjC;AACA;AACA;AACA,qCAAqC,8DAAI;AACzC;AACA,uCAAuC,8DAAI;AAC3C;AACA;AACA,iBAAiB;AACjB,eAAe;AACf,aAAa;AACb,WAAW,gBAAgB,8DAAI,CAAC,qGAAe;AAC/C;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,SAAS;AACT,OAAO;AACP,KAAK;AACL,GAAG;AACH;;AAEe,wEAAS,E","file":"x","sourcesContent":["import _asyncToGenerator from \"/Users/yudiananta/Development/NextJS/ERP Dev/JS Deploy/ERP-Sejati/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _regeneratorRuntime from \"/Users/yudiananta/Development/NextJS/ERP Dev/JS Deploy/ERP-Sejati/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport React from \"react\";\nimport nookies from \"nookies\";\nimport * as moment from \"moment\";\n// In this scenario, we will look up for data in inventory details with params exp.date, productId, and LocationId\n// if data is already exist, then we should update the stock inventory details with the exp.date\n// if they are not, then we create a new inventory details\n// It happens with master inventory too. So basicly, we gonna check first. If exist, then UPDATE.\nvar cookies = nookies.get(null, \"token\");\n\nvar calculateTotalUnit = function calculateTotalUnit(unit, product) {\n  var total = 1;\n  var productIndex = 0;\n  var productSmallestUnit = \"\";\n\n  for (var index = 1; index < 6; index++) {\n    if (product.attributes[\"unit_\".concat(index)] === unit) {\n      productIndex = index;\n    }\n\n    if (product.attributes[\"unit_\".concat(index)]) {\n      productSmallestUnit = product.attributes[\"unit_\".concat(index)];\n    }\n  }\n\n  for (var _index = productIndex + 1; _index < 6; _index++) {\n    total = total * product.attributes[\"qty_\".concat(_index)];\n\n    if (total === 0) {\n      total = 1;\n    }\n  }\n\n  return {\n    total: total,\n    productSmallestUnit: productSmallestUnit\n  };\n};\n\nfunction createInventory(data) {\n  var purchasingDetails = data.attributes.purchasing_details.data;\n  purchasingDetails.forEach(function (element) {\n    var expiredDate = new Date(element.attributes.expired_date);\n    var batch = element.attributes.batch;\n    var unitOrder = element.attributes.unit_order;\n    var totalOrder = parseInt(element.attributes.total_order);\n    var product = element.attributes.product.data;\n    var result = calculateTotalUnit(unitOrder, product);\n    var totalQty = result.total * totalOrder;\n    var location = element.attributes.location.data;\n    var data = {\n      data: {\n        expired_date: expiredDate,\n        batch: batch,\n        products: {\n          id: product.id\n        },\n        stock: totalQty,\n        smallest_unit: result.productSmallestUnit,\n        locations: {\n          id: location.id\n        },\n        keterangan: \"Pembelian\"\n      }\n    }; // check existing stock\n\n    checkDetailStock(data, product.id, location.id); //\n  });\n}\n\nvar checkDetailStock = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(data, productId, locationId) {\n    var endpoint, options, req, res;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            endpoint = process.env.NEXT_PUBLIC_URL + \"/inventory-details?filters[locations][id][$eq]=\".concat(locationId, \"&filters[products][id][$eq]=\").concat(productId, \"&filters[expired_date][$eq]=2024-10-01&populate=*\");\n            options = {\n              method: \"GET\",\n              headers: {\n                \"Content-Type\": \"application/json\",\n                Authorization: \"Bearer \" + cookies.token\n              }\n            };\n            _context.next = 4;\n            return fetch(endpoint, options);\n\n          case 4:\n            req = _context.sent;\n            _context.next = 7;\n            return req.json();\n\n          case 7:\n            res = _context.sent;\n\n            if (res.data.length > 0) {\n              updateAPI(res.data[0], data, productId, locationId);\n            } else {\n              createAPI(data, productId, locationId);\n            }\n\n            createInventoryHistory(data);\n\n          case 10:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function checkDetailStock(_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar updateAPI = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(resData, data, productId, locationId) {\n    var currentStock, finalStock, newData, JSONdata, endpoint, options, req, res;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            currentStock = resData.attributes.stock;\n            finalStock = currentStock + data.data.stock;\n            resData.attributes.stock = finalStock;\n            resData.attributes.locations = data.data.locations;\n            resData.attributes.products = data.data.products;\n            newData = {\n              data: resData.attributes\n            };\n            JSONdata = JSON.stringify(newData);\n            endpoint = process.env.NEXT_PUBLIC_URL + \"/inventory-details/\" + resData.id;\n            options = {\n              method: \"PUT\",\n              headers: {\n                \"Content-Type\": \"application/json\",\n                Authorization: \"Bearer \" + cookies.token\n              },\n              body: JSONdata\n            };\n            _context2.next = 11;\n            return fetch(endpoint, options);\n\n          case 11:\n            req = _context2.sent;\n            _context2.next = 14;\n            return req.json();\n\n          case 14:\n            res = _context2.sent;\n\n            if (req.status === 200) {\n              createInventoryAPI(locationId, productId, data.data.stock, data);\n            }\n\n          case 16:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n\n  return function updateAPI(_x4, _x5, _x6, _x7) {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\nvar createAPI = /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(data, productId, locationId) {\n    var JSONdata, endpoint, options, req, res;\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            JSONdata = JSON.stringify(data);\n            endpoint = process.env.NEXT_PUBLIC_URL + \"/inventory-details\";\n            options = {\n              method: \"POST\",\n              headers: {\n                \"Content-Type\": \"application/json\",\n                Authorization: \"Bearer \" + cookies.token\n              },\n              body: JSONdata\n            };\n            _context3.next = 5;\n            return fetch(endpoint, options);\n\n          case 5:\n            req = _context3.sent;\n            _context3.next = 8;\n            return req.json();\n\n          case 8:\n            res = _context3.sent;\n\n            if (req.status === 200) {\n              // check data location\n              createInventoryAPI(locationId, productId, data.data.stock, data);\n            }\n\n          case 10:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n\n  return function createAPI(_x8, _x9, _x10) {\n    return _ref3.apply(this, arguments);\n  };\n}();\n\nvar createInventoryHistory = /*#__PURE__*/function () {\n  var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(data) {\n    var JSONdata, endpoint, options, req, res;\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            JSONdata = JSON.stringify(data);\n            endpoint = process.env.NEXT_PUBLIC_URL + \"/inventory-histories\";\n            options = {\n              method: \"POST\",\n              headers: {\n                \"Content-Type\": \"application/json\",\n                Authorization: \"Bearer \" + cookies.token\n              },\n              body: JSONdata\n            };\n            _context4.next = 5;\n            return fetch(endpoint, options);\n\n          case 5:\n            req = _context4.sent;\n            _context4.next = 8;\n            return req.json();\n\n          case 8:\n            res = _context4.sent;\n\n          case 9:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4);\n  }));\n\n  return function createInventoryHistory(_x11) {\n    return _ref4.apply(this, arguments);\n  };\n}(); // ======================= MASTER INVENTORY =======================\n\n\nvar createInventoryAPI = /*#__PURE__*/function () {\n  var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(locationId, productId, quantity, data) {\n    var endpoint, options, req, res, totalStock;\n    return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            endpoint = process.env.NEXT_PUBLIC_URL + \"/inventories?filters[locations][id][$eq]=\".concat(locationId, \"&filters[products][id][$eq]=\").concat(productId, \"&populate=locations\");\n            options = {\n              method: \"GET\",\n              headers: {\n                \"Content-Type\": \"application/json\",\n                Authorization: \"Bearer \" + cookies.token\n              }\n            };\n            _context5.next = 4;\n            return fetch(endpoint, options);\n\n          case 4:\n            req = _context5.sent;\n            _context5.next = 7;\n            return req.json();\n\n          case 7:\n            res = _context5.sent;\n\n            if (!(res.data.length > 0)) {\n              _context5.next = 14;\n              break;\n            }\n\n            // put existing data\n            totalStock = res.data[0].attributes.total_stock + quantity;\n            _context5.next = 12;\n            return putExistingData(res.data[0].id, res.data[0].attributes, totalStock);\n\n          case 12:\n            _context5.next = 16;\n            break;\n\n          case 14:\n            _context5.next = 16;\n            return createNewData(data, locationId);\n\n          case 16:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    }, _callee5);\n  }));\n\n  return function createInventoryAPI(_x12, _x13, _x14, _x15) {\n    return _ref5.apply(this, arguments);\n  };\n}();\n\nvar putExistingData = /*#__PURE__*/function () {\n  var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6(id, data, totalStock) {\n    var putData, JSONdata, endpoint, options, req;\n    return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n      while (1) {\n        switch (_context6.prev = _context6.next) {\n          case 0:\n            data.total_stock = totalStock;\n            data.locations = {\n              id: data.locations.data[0].id\n            };\n            putData = {\n              data: data\n            };\n            JSONdata = JSON.stringify(putData);\n            endpoint = process.env.NEXT_PUBLIC_URL + \"/inventories/\" + id;\n            options = {\n              method: \"PUT\",\n              headers: {\n                \"Content-Type\": \"application/json\",\n                Authorization: \"Bearer \" + cookies.token\n              },\n              body: JSONdata\n            };\n            _context6.next = 8;\n            return fetch(endpoint, options);\n\n          case 8:\n            req = _context6.sent;\n\n          case 9:\n          case \"end\":\n            return _context6.stop();\n        }\n      }\n    }, _callee6);\n  }));\n\n  return function putExistingData(_x16, _x17, _x18) {\n    return _ref6.apply(this, arguments);\n  };\n}();\n\nvar createNewData = /*#__PURE__*/function () {\n  var _ref7 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7(data, locationId) {\n    var JSONdata, endpoint, options, req;\n    return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n      while (1) {\n        switch (_context7.prev = _context7.next) {\n          case 0:\n            data.data.total_stock = data.data.stock;\n            data.data.locations = {\n              id: locationId\n            };\n            JSONdata = JSON.stringify(data);\n            endpoint = process.env.NEXT_PUBLIC_URL + \"/inventories\";\n            options = {\n              method: \"POST\",\n              headers: {\n                \"Content-Type\": \"application/json\",\n                Authorization: \"Bearer \" + cookies.token\n              },\n              body: JSONdata\n            };\n            _context7.next = 7;\n            return fetch(endpoint, options);\n\n          case 7:\n            req = _context7.sent;\n\n          case 8:\n          case \"end\":\n            return _context7.stop();\n        }\n      }\n    }, _callee7);\n  }));\n\n  return function createNewData(_x19, _x20) {\n    return _ref7.apply(this, arguments);\n  };\n}();\n\nvar getUserLocation = /*#__PURE__*/function () {\n  var _ref8 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8(cookies) {\n    var endpoint, options, req, res;\n    return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n      while (1) {\n        switch (_context8.prev = _context8.next) {\n          case 0:\n            endpoint = process.env.NEXT_PUBLIC_URL + \"/users/me?populate=*\";\n            options = {\n              method: \"GET\",\n              headers: {\n                \"Content-Type\": \"application/json\",\n                Authorization: \"Bearer \" + cookies.token\n              },\n              body: JSONdata\n            };\n            _context8.next = 4;\n            return fetch(endpoint, options);\n\n          case 4:\n            req = _context8.sent;\n            _context8.next = 7;\n            return req.json();\n\n          case 7:\n            res = _context8.sent;\n            return _context8.abrupt(\"return\", res);\n\n          case 9:\n          case \"end\":\n            return _context8.stop();\n        }\n      }\n    }, _callee8);\n  }));\n\n  return function getUserLocation(_x21) {\n    return _ref8.apply(this, arguments);\n  };\n}();\n\nexport default createInventory;","\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/dashboard/pembelian/pembelian_barang\",\n      function () {\n        return require(\"private-next-pages/dashboard/pembelian/pembelian_barang/index.js\");\n      }\n    ]);\n  ","\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread2\"));\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _CalculatorOutlined = _interopRequireDefault(require(\"@ant-design/icons-svg/lib/asn/CalculatorOutlined\"));\n\nvar _AntdIcon = _interopRequireDefault(require(\"../components/AntdIcon\"));\n\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nvar CalculatorOutlined = function CalculatorOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(_AntdIcon.default, (0, _objectSpread2.default)((0, _objectSpread2.default)({}, props), {}, {\n    ref: ref,\n    icon: _CalculatorOutlined.default\n  }));\n};\n\nCalculatorOutlined.displayName = 'CalculatorOutlined';\n\nvar _default = /*#__PURE__*/React.forwardRef(CalculatorOutlined);\n\nexports.default = _default;","import _CloseOutlined from \"@ant-design/icons/lib/icons/CloseOutlined\";\nimport _slicedToArray from \"/Users/yudiananta/Development/NextJS/ERP Dev/JS Deploy/ERP-Sejati/node_modules/next/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React from \"react\";\nimport Button from \"@mui/material/Button\";\nimport Dialog from \"@mui/material/Dialog\";\nimport DialogActions from \"@mui/material/DialogActions\";\nimport DialogContent from \"@mui/material/DialogContent\";\nimport DialogContentText from \"@mui/material/DialogContentText\";\nimport DialogTitle from \"@mui/material/DialogTitle\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function AlertDialog(_ref) {\n  var onConfirm = _ref.onConfirm,\n      onCancel = _ref.onCancel,\n      title = _ref.title,\n      message = _ref.message,\n      id = _ref.id;\n\n  var _React$useState = React.useState(false),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      open = _React$useState2[0],\n      setOpen = _React$useState2[1];\n\n  var handleClickOpen = function handleClickOpen() {\n    setOpen(true);\n  };\n\n  var handleClose = function handleClose() {\n    setOpen(false);\n  };\n\n  var handleConfirm = function handleConfirm() {\n    onConfirm(id);\n    handleClose();\n  };\n\n  var handleCancel = function handleCancel() {\n    onCancel();\n    handleClose();\n  };\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    children: [/*#__PURE__*/_jsxs(\"button\", {\n      className: \"hover:bg-red-400 text-red-600 hover:text-white transition-colors  text-xs font-normal py-2 px-2 rounded-md\",\n      onClick: handleClickOpen,\n      children: [/*#__PURE__*/_jsx(_CloseOutlined, {\n        className: \"mr-2 mt-0.5 float float-left\"\n      }), \" Batalkan\"]\n    }), /*#__PURE__*/_jsxs(Dialog, {\n      open: open,\n      onClose: handleCancel,\n      \"aria-labelledby\": \"alert-dialog-title\",\n      \"aria-describedby\": \"alert-dialog-description\",\n      children: [/*#__PURE__*/_jsxs(DialogTitle, {\n        id: \"alert-dialog-title\",\n        className: \"font-bold\",\n        children: [\" \", title]\n      }), /*#__PURE__*/_jsx(DialogContent, {\n        children: /*#__PURE__*/_jsx(DialogContentText, {\n          id: \"alert-dialog-description\",\n          children: message\n        })\n      }), /*#__PURE__*/_jsxs(DialogActions, {\n        children: [/*#__PURE__*/_jsx(Button, {\n          onClick: handleCancel,\n          children: \"Tidak\"\n        }), /*#__PURE__*/_jsx(Button, {\n          onClick: handleConfirm,\n          className: \"text-red-500\",\n          children: \"Ya\"\n        })]\n      })]\n    })]\n  });\n}","import _Popover from \"antd/lib/popover\";\nimport _Tag from \"antd/lib/tag\";\nimport _CalculatorOutlined from \"@ant-design/icons/lib/icons/CalculatorOutlined\";\nimport _EditOutlined from \"@ant-design/icons/lib/icons/EditOutlined\";\nimport _UnorderedListOutlined from \"@ant-design/icons/lib/icons/UnorderedListOutlined\";\nimport _PrinterOutlined from \"@ant-design/icons/lib/icons/PrinterOutlined\";\nimport _Select from \"antd/lib/select\";\nimport DataTable from \"react-data-table-component\";\nimport AlertDialog from \"../../Alert/AlertCancel\";\nimport { useRouter } from \"next/router\";\nimport { IoIosSwap } from \"react-icons/io\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nexport default function ReactDataTable(_ref) {\n  var _data$meta, _data$meta$pagination;\n\n  var data = _ref.data,\n      onDelete = _ref.onDelete,\n      onUpdate = _ref.onUpdate,\n      onPageChange = _ref.onPageChange,\n      onChangeStatus = _ref.onChangeStatus;\n  var router = useRouter();\n  var Option = _Select.Option;\n  var tagRed = process.env.TAG_RED;\n  var tagGreen = process.env.TAG_GREEN;\n  var tagOrange = process.env.TAG_ORANGE;\n\n  var print = function print(row) {\n    router.push(\"pembelian_barang/print/\" + row.id); // router.push('/dashboard')\n  };\n\n  var lihat = function lihat(row) {\n    router.push(\"pembelian_barang/print/\" + row.id);\n  };\n\n  var pembayaran = function pembayaran(row) {\n    router.push(\"pembelian_barang/pembayaran/\" + row.id);\n  };\n\n  var retur = function retur(row) {\n    router.push(\"retur/\" + row.id);\n  };\n\n  var _onConfirm = function onConfirm(id, row) {\n    console.log(id);\n    onDelete(id, row);\n  };\n\n  var onCancel = function onCancel() {\n    console.log(\"onCancel\");\n  };\n\n  var onEdit = function onEdit(id) {\n    onUpdate(id);\n  };\n\n  function formatMyDate(value) {\n    var locale = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"id-ID\";\n    return new Date(value).toLocaleDateString(locale);\n  }\n\n  var formatter = new Intl.NumberFormat(\"id-ID\", {\n    style: \"currency\",\n    currency: \"IDR\",\n    maximumFractionDigits: 0\n  });\n\n  var content = function content(row) {\n    return /*#__PURE__*/_jsxs(\"div\", {\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        children: /*#__PURE__*/_jsxs(\"button\", {\n          onClick: function onClick() {\n            return print(row);\n          },\n          className: \" hover:text-cyan-700 transition-colors  text-xs font-normal py-2 px-2 rounded-md \",\n          children: [/*#__PURE__*/_jsx(_PrinterOutlined, {\n            className: \"mr-2 mt-0.5 float float-left\"\n          }), \"Cetak\"]\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        children: /*#__PURE__*/_jsxs(\"button\", {\n          onClick: function onClick() {\n            return lihat(row);\n          },\n          className: \" hover:text-cyan-700 transition-colors  text-xs font-normal py-2 px-2 rounded-md \",\n          children: [/*#__PURE__*/_jsx(_UnorderedListOutlined, {\n            className: \"mr-2 mt-0.5 float float-left\"\n          }), \"Lihat\"]\n        })\n      }), row.attributes.status === \"Diterima\" ? /*#__PURE__*/_jsx(\"div\", {}) : /*#__PURE__*/_jsxs(\"button\", {\n        onClick: function onClick() {\n          return onEdit(row.id);\n        },\n        className: \" hover:text-cyan-700 transition-colors  text-xs font-normal py-2 px-2 rounded-md \",\n        children: [/*#__PURE__*/_jsx(_EditOutlined, {\n          className: \"mr-2 mt-0.5 float float-left\"\n        }), \"Edit\"]\n      }), /*#__PURE__*/_jsx(AlertDialog, {\n        onCancel: onCancel,\n        onConfirm: function onConfirm(e) {\n          return _onConfirm(e, row);\n        },\n        title: \"Batalkan Transaksi\",\n        message: \"Transaksi yang dibatalkan tidak dapat dikembalikan lagi. Lanjutkan?\",\n        id: row.id\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: \"mt-4\",\n        children: /*#__PURE__*/_jsxs(\"button\", {\n          onClick: function onClick() {\n            return pembayaran(row);\n          },\n          className: \" hover:text-cyan-700 transition-colors  text-xs font-normal py-2 px-2 rounded-md \",\n          children: [/*#__PURE__*/_jsx(_CalculatorOutlined, {\n            className: \"mr-2 mt-0.5 float float-left\"\n          }), \"Pembayaran\"]\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        children: /*#__PURE__*/_jsxs(\"button\", {\n          onClick: function onClick() {\n            return retur(row);\n          },\n          className: \" hover:text-cyan-700 transition-colors  text-xs font-normal py-2 px-2 rounded-md \",\n          children: [/*#__PURE__*/_jsx(IoIosSwap, {\n            className: \"mr-2 mt-0.5 float float-left\"\n          }), \"Retur Pembelian\"]\n        })\n      })]\n    });\n  };\n\n  var customStyles = {\n    headerStyle: {\n      textAlign: \"center\"\n    },\n    headCells: {\n      style: {\n        color: \"white\",\n        background: \"#036B82\"\n      }\n    }\n  };\n  var columns = [{\n    name: \"NO LPB\",\n    width: \"180px\",\n    selector: function selector(row) {\n      var _row$attributes$no_pu, _row$attributes;\n\n      return (_row$attributes$no_pu = (_row$attributes = row.attributes) === null || _row$attributes === void 0 ? void 0 : _row$attributes.no_purchasing) !== null && _row$attributes$no_pu !== void 0 ? _row$attributes$no_pu : \"-\";\n    }\n  }, {\n    name: \"Supplier\",\n    width: \"180px\",\n    selector: function selector(row) {\n      var _row$attributes$suppl, _row$attributes2;\n\n      return (_row$attributes$suppl = (_row$attributes2 = row.attributes) === null || _row$attributes2 === void 0 ? void 0 : _row$attributes2.supplier.data.attributes.name) !== null && _row$attributes$suppl !== void 0 ? _row$attributes$suppl : \"-\";\n    }\n  }, {\n    name: \"Nota Supplier\",\n    width: \"180px\",\n    selector: function selector(row) {\n      var _row$attributes$no_no, _row$attributes3;\n\n      return (_row$attributes$no_no = (_row$attributes3 = row.attributes) === null || _row$attributes3 === void 0 ? void 0 : _row$attributes3.no_nota_suppplier) !== null && _row$attributes$no_no !== void 0 ? _row$attributes$no_no : \"-\";\n    }\n  }, {\n    name: \"Tanggal\",\n    width: \"150px\",\n    selector: function selector(row) {\n      var _row$attributes4;\n\n      return formatMyDate((_row$attributes4 = row.attributes) === null || _row$attributes4 === void 0 ? void 0 : _row$attributes4.date_purchasing);\n    }\n  }, {\n    name: \"Lokasi\",\n    width: \"200px\",\n    selector: function selector(row) {\n      var _row$attributes5;\n\n      return (_row$attributes5 = row.attributes) === null || _row$attributes5 === void 0 ? void 0 : _row$attributes5.location.data.attributes.name;\n    }\n  }, {\n    name: \"Status\",\n    width: \"200px\",\n    selector: function selector(row) {\n      return /*#__PURE__*/_jsx(_Fragment, {\n        children: /*#__PURE__*/_jsxs(_Select, {\n          defaultValue: row.attributes.status,\n          bordered: false,\n          disabled: row.attributes.status === \"Selesai\" || row.attributes.status === \"Dibatalkan\",\n          onChange: function onChange(e) {\n            return onChangeStatus(e, row);\n          },\n          style: {\n            width: \"150px\"\n          },\n          children: [/*#__PURE__*/_jsx(Option, {\n            value: \"Diproses\",\n            className: \"text-black\",\n            children: /*#__PURE__*/_jsx(_Tag, {\n              color: \"default\",\n              children: \"Diproses\"\n            })\n          }, \"Diproses\"), /*#__PURE__*/_jsx(Option, {\n            value: \"Dibatalkan\",\n            className: \"text-black\",\n            children: /*#__PURE__*/_jsx(_Tag, {\n              color: \"error\",\n              children: \"Dibatalkan\"\n            })\n          }, \"Dibatalkan\"), /*#__PURE__*/_jsx(Option, {\n            value: \"Selesai\",\n            className: \"text-black\",\n            children: /*#__PURE__*/_jsx(_Tag, {\n              color: \"success\",\n              children: \"Selesai\"\n            })\n          }, \"Selesai\")]\n        })\n      });\n    }\n  }, {\n    name: \"Tempo\",\n    width: \"150px\",\n    selector: function selector(row) {\n      var _row$attributes6, _row$attributes$tempo, _row$attributes7, _row$attributes8, _row$attributes9, _row$attributes10;\n\n      var tempoDate = new Date((_row$attributes6 = row.attributes) === null || _row$attributes6 === void 0 ? void 0 : _row$attributes6.date_purchasing);\n      var tempoTime = parseInt((_row$attributes$tempo = (_row$attributes7 = row.attributes) === null || _row$attributes7 === void 0 ? void 0 : _row$attributes7.tempo_days) !== null && _row$attributes$tempo !== void 0 ? _row$attributes$tempo : 0);\n      var today = new Date();\n      var isTempo = false;\n      var statusPembayaran = (_row$attributes8 = row.attributes) === null || _row$attributes8 === void 0 ? void 0 : _row$attributes8.status_pembayaran;\n      var purchasingHistory = (_row$attributes9 = row.attributes) === null || _row$attributes9 === void 0 ? void 0 : _row$attributes9.purchasing_payments.data;\n\n      if (((_row$attributes10 = row.attributes) === null || _row$attributes10 === void 0 ? void 0 : _row$attributes10.tempo_time) === \"Hari\") {\n        tempoDate.setDate(tempoDate.getDate() + tempoTime);\n      } else {\n        tempoDate.setDate(tempoDate.getMonth() + tempoTime);\n      }\n\n      if (tempoDate < today) {\n        isTempo = true;\n      }\n\n      if (isTempo) {\n        if (statusPembayaran === \"Belum Lunas\") {\n          return /*#__PURE__*/_jsx(_Tag, {\n            color: \"red\",\n            children: \"Tempo\"\n          });\n        } else if (statusPembayaran === \"Lunas\") {\n          return /*#__PURE__*/_jsx(_Tag, {\n            color: \"green\",\n            children: \"Selesai\"\n          });\n        }\n      } else {\n        if (statusPembayaran === \"Belum Lunas\" && purchasingHistory.length > 0) {\n          return /*#__PURE__*/_jsx(_Tag, {\n            color: tagRed,\n            children: \"Tempo\"\n          });\n        } else if (statusPembayaran === \"Lunas\" && purchasingHistory.length > 0) {\n          return /*#__PURE__*/_jsx(_Tag, {\n            color: tagGreen,\n            children: \"Selesai\"\n          });\n        } else {\n          return /*#__PURE__*/_jsx(_Tag, {\n            color: tagOrange,\n            children: \"Menunggu\"\n          });\n        }\n      }\n\n      return /*#__PURE__*/_jsx(_Tag, {\n        color: tagOrange,\n        children: \"Menunggu\"\n      });\n    }\n  }, {\n    name: \"Pembayaran\",\n    width: \"150px\",\n    selector: function selector(row) {\n      var _row$attributes$purch, _row$attributes$purch2;\n\n      var lastIndex = (_row$attributes$purch = row.attributes.purchasing_payments) === null || _row$attributes$purch === void 0 ? void 0 : (_row$attributes$purch2 = _row$attributes$purch.data) === null || _row$attributes$purch2 === void 0 ? void 0 : _row$attributes$purch2.length;\n      var lastPayment = row.attributes.purchasing_payments.data[lastIndex - 1];\n\n      if ((lastPayment === null || lastPayment === void 0 ? void 0 : lastPayment.attributes.payment_remaining) === (lastPayment === null || lastPayment === void 0 ? void 0 : lastPayment.attributes.total_payment)) {\n        return /*#__PURE__*/_jsx(_Tag, {\n          color: tagRed,\n          children: \"Belum Dibayar\"\n        });\n      } else if ((lastPayment === null || lastPayment === void 0 ? void 0 : lastPayment.attributes.payment_remaining) > 0 && (lastPayment === null || lastPayment === void 0 ? void 0 : lastPayment.attributes.payment_remaining) < (lastPayment === null || lastPayment === void 0 ? void 0 : lastPayment.attributes.total_payment)) {\n        return /*#__PURE__*/_jsx(_Tag, {\n          color: tagOrange,\n          children: \"Dibayar Sebagian\"\n        });\n      } else if ((lastPayment === null || lastPayment === void 0 ? void 0 : lastPayment.attributes.payment_remaining) <= 0) {\n        return /*#__PURE__*/_jsx(_Tag, {\n          color: tagGreen,\n          children: \"Selesai\"\n        });\n      } else {\n        return /*#__PURE__*/_jsx(_Tag, {\n          color: tagOrange,\n          children: \"Dibayar Sebagian\"\n        });\n      }\n    }\n  }, {\n    name: \"Total Beli\",\n    width: \"150px\",\n    selector: function selector(row) {\n      var _row$attributes$total, _row$attributes11;\n\n      return formatter.format((_row$attributes$total = (_row$attributes11 = row.attributes) === null || _row$attributes11 === void 0 ? void 0 : _row$attributes11.total_purchasing) !== null && _row$attributes$total !== void 0 ? _row$attributes$total : 0);\n    }\n  }, {\n    name: \"Tindakan\",\n    width: \"250px\",\n    selector: function selector(row) {\n      return /*#__PURE__*/_jsx(_Fragment, {\n        children: /*#__PURE__*/_jsx(_Popover, {\n          content: content(row),\n          placement: \"bottom\",\n          trigger: \"click\",\n          children: /*#__PURE__*/_jsx(\"button\", {\n            className: \" text-cyan-700  transition-colors  text-xs font-normal py-2 rounded-md \",\n            children: \"Tindakan\"\n          })\n        })\n      });\n    }\n  }];\n  return /*#__PURE__*/_jsx(DataTable, {\n    customStyles: customStyles,\n    onChangePage: onPageChange,\n    paginationRowsPerPageOptions: [10],\n    paginationTotalRows: data === null || data === void 0 ? void 0 : (_data$meta = data.meta) === null || _data$meta === void 0 ? void 0 : (_data$meta$pagination = _data$meta.pagination) === null || _data$meta$pagination === void 0 ? void 0 : _data$meta$pagination.total,\n    columns: columns,\n    data: data.data,\n    pagination: true,\n    noDataComponent: \"Belum ada data Pembelian\"\n  });\n}","\"use strict\";\n// This icon file is generated automatically.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar CalculatorOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M251.2 387H320v68.8c0 1.8 1.8 3.2 4 3.2h48c2.2 0 4-1.4 4-3.3V387h68.8c1.8 0 3.2-1.8 3.2-4v-48c0-2.2-1.4-4-3.3-4H376v-68.8c0-1.8-1.8-3.2-4-3.2h-48c-2.2 0-4 1.4-4 3.2V331h-68.8c-1.8 0-3.2 1.8-3.2 4v48c0 2.2 1.4 4 3.2 4zm328 0h193.6c1.8 0 3.2-1.8 3.2-4v-48c0-2.2-1.4-4-3.3-4H579.2c-1.8 0-3.2 1.8-3.2 4v48c0 2.2 1.4 4 3.2 4zm0 265h193.6c1.8 0 3.2-1.8 3.2-4v-48c0-2.2-1.4-4-3.3-4H579.2c-1.8 0-3.2 1.8-3.2 4v48c0 2.2 1.4 4 3.2 4zm0 104h193.6c1.8 0 3.2-1.8 3.2-4v-48c0-2.2-1.4-4-3.3-4H579.2c-1.8 0-3.2 1.8-3.2 4v48c0 2.2 1.4 4 3.2 4zm-195.7-81l61.2-74.9c4.3-5.2.7-13.1-5.9-13.1H388c-2.3 0-4.5 1-5.9 2.9l-34 41.6-34-41.6a7.85 7.85 0 00-5.9-2.9h-50.9c-6.6 0-10.2 7.9-5.9 13.1l61.2 74.9-62.7 76.8c-4.4 5.2-.8 13.1 5.8 13.1h50.8c2.3 0 4.5-1 5.9-2.9l35.5-43.5 35.5 43.5c1.5 1.8 3.7 2.9 5.9 2.9h50.8c6.6 0 10.2-7.9 5.9-13.1L383.5 675zM880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-36 732H180V180h664v664z\" } }] }, \"name\": \"calculator\", \"theme\": \"outlined\" };\nexports.default = CalculatorOutlined;\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","import _notification from \"antd/lib/notification\";\nimport _Input from \"antd/lib/input\";\nimport _asyncToGenerator from \"/Users/yudiananta/Development/NextJS/ERP Dev/JS Deploy/ERP-Sejati/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _regeneratorRuntime from \"/Users/yudiananta/Development/NextJS/ERP Dev/JS Deploy/ERP-Sejati/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport Head from \"next/head\";\nimport React, { useState } from \"react\";\nimport LayoutContent from \"@iso/components/utility/layoutContent\";\nimport DashboardLayout from \"../../../../containers/DashboardLayout/DashboardLayout\";\nimport LayoutWrapper from \"@iso/components/utility/layoutWrapper.js\";\nimport { useRouter } from \"next/router\";\nimport TitlePage from \"../../../../components/TitlePage/TitlePage\";\nimport PurchasingTable from \"../../../../components/ReactDataTable/Purchases/PurchasingTable\";\nimport nookies from \"nookies\";\nimport createInventory from \"../utility/createInventory\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\n\nPembelian.getInitialProps = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(context) {\n    var cookies, data, req;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            cookies = nookies.get(context);\n            _context.next = 3;\n            return fetchData(cookies);\n\n          case 3:\n            req = _context.sent;\n            _context.next = 6;\n            return req.json();\n\n          case 6:\n            data = _context.sent;\n            return _context.abrupt(\"return\", {\n              props: {\n                data: data\n              }\n            });\n\n          case 8:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function (_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar fetchData = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(cookies) {\n    var endpoint, options, req;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            endpoint = process.env.NEXT_PUBLIC_URL + \"/purchasings?populate=deep\";\n            options = {\n              method: \"GET\",\n              headers: {\n                \"Content-Type\": \"application/json\",\n                Authorization: \"Bearer \" + cookies.token\n              }\n            };\n            _context2.next = 4;\n            return fetch(endpoint, options);\n\n          case 4:\n            req = _context2.sent;\n            return _context2.abrupt(\"return\", req);\n\n          case 6:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n\n  return function fetchData(_x2) {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\nfunction Pembelian(_ref3) {\n  var props = _ref3.props;\n  var data = props.data;\n\n  var _useState = useState(data),\n      purchase = _useState[0],\n      setPurchase = _useState[1];\n\n  var _useState2 = useState(false),\n      isSearching = _useState2[0],\n      setIsSearching = _useState2[1];\n\n  var Search = _Input.Search;\n  var router = useRouter();\n\n  var handleAdd = function handleAdd() {\n    router.push(\"/dashboard/pembelian/pembelian_barang/tambah\");\n  };\n\n  var handleUpdate = function handleUpdate(id) {\n    // router.push(\"/dashboard/pembelian/order_pembelian/edit/\" + id);\n    openNotificationWithIcon(\"info\", \"Work In Progress\", \"Hai, Fitur ini sedang dikerjakan. Silahkan tunggu pembaruan selanjutnya\");\n  };\n\n  var handlePageChange = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(page) {\n      var cookies, endpoint, options, req, res;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              cookies = nookies.get(null, \"token\");\n              endpoint = process.env.NEXT_PUBLIC_URL + \"/purchases?pagination[page]=\" + page;\n              options = {\n                method: \"GET\",\n                headers: {\n                  \"Content-Type\": \"application/json\",\n                  Authorization: \"Bearer \" + cookies.token\n                }\n              };\n              _context3.prev = 3;\n              _context3.next = 6;\n              return fetch(endpoint, options);\n\n            case 6:\n              req = _context3.sent;\n              _context3.next = 9;\n              return req.json();\n\n            case 9:\n              res = _context3.sent;\n\n              if (res) {\n                setPurchase(function (prevData) {\n                  return {\n                    data: filterDuplicateData(prevData.data.concat(res.data)),\n                    meta: prevData.meta\n                  };\n                });\n              } else {\n                console.log(\"something is wrong\");\n              }\n\n              _context3.next = 16;\n              break;\n\n            case 13:\n              _context3.prev = 13;\n              _context3.t0 = _context3[\"catch\"](3);\n              console.log(_context3.t0);\n\n            case 16:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, null, [[3, 13]]);\n    }));\n\n    return function handlePageChange(_x3) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  var onSearch = /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(e) {\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n\n    return function onSearch(_x4) {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n\n  var searchQuery = /*#__PURE__*/function () {\n    var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(keywords) {\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5);\n    }));\n\n    return function searchQuery(_x5) {\n      return _ref6.apply(this, arguments);\n    };\n  }();\n\n  var handleCancel = /*#__PURE__*/function () {\n    var _ref7 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6(id, row) {\n      return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n        while (1) {\n          switch (_context6.prev = _context6.next) {\n            case 0:\n              onChangeStatus(\"Dibatalkan\", row);\n\n            case 1:\n            case \"end\":\n              return _context6.stop();\n          }\n        }\n      }, _callee6);\n    }));\n\n    return function handleCancel(_x6, _x7) {\n      return _ref7.apply(this, arguments);\n    };\n  }();\n\n  var onChangeStatus = function onChangeStatus(status, row) {\n    row.attributes.status = status;\n    var dataStatus = row;\n\n    if (status === \"Selesai\") {\n      // invetory handle\n      createInventory(row);\n    }\n\n    handleChangeStatus(dataStatus, dataStatus.id);\n  };\n\n  var handleChangeStatus = /*#__PURE__*/function () {\n    var _ref8 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7(values, id) {\n      var _values$attributes, _values$attributes$do, _values$attributes2, _values$attributes2$d;\n\n      var key, _values$attributes3, purchasing_details, purchasing_payments, newValues, JSONdata, cookies, endpoint, options, req, res, response;\n\n      return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n        while (1) {\n          switch (_context7.prev = _context7.next) {\n            case 0:\n              // // clean object\n              delete values.attributes.purchase;\n\n              for (key in values.attributes) {\n                if (values.attributes[key] === null || values.attributes[key] === undefined) {\n                  delete values.attributes[key];\n                }\n              }\n\n              if (((_values$attributes = values.attributes) === null || _values$attributes === void 0 ? void 0 : (_values$attributes$do = _values$attributes.document) === null || _values$attributes$do === void 0 ? void 0 : _values$attributes$do.data) === null || ((_values$attributes2 = values.attributes) === null || _values$attributes2 === void 0 ? void 0 : (_values$attributes2$d = _values$attributes2.document) === null || _values$attributes2$d === void 0 ? void 0 : _values$attributes2$d.data) === undefined) {\n                (_values$attributes3 = values.attributes) === null || _values$attributes3 === void 0 ? true : delete _values$attributes3.document;\n              }\n\n              purchasing_details = [];\n              purchasing_payments = [];\n              values.attributes.purchasing_details.data.forEach(function (element) {\n                purchasing_details.push({\n                  id: element.id\n                });\n              });\n              values.attributes.purchasing_payments.data.forEach(function (element) {\n                purchasing_payments.push({\n                  id: element.id\n                });\n              });\n              values.attributes.supplier = {\n                id: values.attributes.supplier.data.id\n              };\n              values.attributes.location = {\n                id: values.attributes.location.data.id\n              };\n              values.attributes.purchasing_details = purchasing_details;\n              values.attributes.purchasing_payments = purchasing_payments;\n              newValues = {\n                data: values.attributes\n              };\n              JSONdata = JSON.stringify(newValues);\n              cookies = nookies.get(null, \"token\");\n              endpoint = process.env.NEXT_PUBLIC_URL + \"/purchasings/\" + id;\n              options = {\n                method: \"PUT\",\n                headers: {\n                  \"Content-Type\": \"application/json\",\n                  Authorization: \"Bearer \" + cookies.token\n                },\n                body: JSONdata\n              };\n              _context7.next = 18;\n              return fetch(endpoint, options);\n\n            case 18:\n              req = _context7.sent;\n              _context7.next = 21;\n              return req.json();\n\n            case 21:\n              res = _context7.sent;\n\n              if (!(req.status === 200)) {\n                _context7.next = 30;\n                break;\n              }\n\n              _context7.next = 25;\n              return fetchData(cookies);\n\n            case 25:\n              response = _context7.sent;\n\n              if (res.data.attributes.status === \"Dibatalkan\") {\n                router.reload();\n              } else {\n                setPurchase(response);\n              }\n\n              openNotificationWithIcon(\"success\", \"Status berhasil dirubah\", \"Status berhasil dirubah. Silahkan cek detail LPB\");\n              _context7.next = 31;\n              break;\n\n            case 30:\n              openNotificationWithIcon(\"error\", \"Status gagal dirubah\", \"Tedapat kesalahan yang menyebabkan status tidak dapat dirubah\");\n\n            case 31:\n            case \"end\":\n              return _context7.stop();\n          }\n        }\n      }, _callee7);\n    }));\n\n    return function handleChangeStatus(_x8, _x9) {\n      return _ref8.apply(this, arguments);\n    };\n  }();\n\n  var fetchData = /*#__PURE__*/function () {\n    var _ref9 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8(cookies) {\n      var endpoint, options, req, res;\n      return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n        while (1) {\n          switch (_context8.prev = _context8.next) {\n            case 0:\n              endpoint = process.env.NEXT_PUBLIC_URL + \"/purchasings?populate=deep\";\n              options = {\n                method: \"GET\",\n                headers: {\n                  \"Content-Type\": \"application/json\",\n                  Authorization: \"Bearer \" + cookies.token\n                }\n              };\n              _context8.next = 4;\n              return fetch(endpoint, options);\n\n            case 4:\n              req = _context8.sent;\n              res = req.json();\n              return _context8.abrupt(\"return\", res);\n\n            case 7:\n            case \"end\":\n              return _context8.stop();\n          }\n        }\n      }, _callee8);\n    }));\n\n    return function fetchData(_x10) {\n      return _ref9.apply(this, arguments);\n    };\n  }();\n\n  var openNotificationWithIcon = function openNotificationWithIcon(type, title, message) {\n    _notification[type]({\n      message: title,\n      description: message\n    });\n  };\n\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsx(Head, {\n      children: /*#__PURE__*/_jsx(\"title\", {\n        children: \"Pembelian Barang\"\n      })\n    }), /*#__PURE__*/_jsx(DashboardLayout, {\n      children: /*#__PURE__*/_jsxs(LayoutWrapper, {\n        style: {},\n        children: [/*#__PURE__*/_jsx(TitlePage, {\n          titleText: \"Lembar Pembelian Barang\"\n        }), /*#__PURE__*/_jsxs(LayoutContent, {\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            className: \"w-full flex justify-between\",\n            children: [/*#__PURE__*/_jsx(Search, {\n              className: \"\",\n              loading: isSearching,\n              onChange: function onChange(e) {\n                return onSearch(e);\n              },\n              placeholder: \"Cari Pembelian\",\n              style: {\n                width: 200\n              }\n            }), /*#__PURE__*/_jsx(\"button\", {\n              onClick: handleAdd,\n              type: \"button\",\n              className: \"bg-cyan-700 rounded px-5 py-2 hover:bg-cyan-800  shadow-sm flex float-right mb-5\",\n              children: /*#__PURE__*/_jsx(\"div\", {\n                className: \"text-white text-center text-sm font-bold\",\n                children: /*#__PURE__*/_jsx(\"a\", {\n                  className: \"text-white no-underline text-xs sm:text-xs\",\n                  children: \"+ Tambah\"\n                })\n              })\n            })]\n          }), /*#__PURE__*/_jsx(PurchasingTable, {\n            data: purchase,\n            onUpdate: handleUpdate,\n            onDelete: handleCancel,\n            onPageChange: handlePageChange,\n            onChangeStatus: onChangeStatus\n          })]\n        })]\n      })\n    })]\n  });\n}\n\nexport default Pembelian;"]}}