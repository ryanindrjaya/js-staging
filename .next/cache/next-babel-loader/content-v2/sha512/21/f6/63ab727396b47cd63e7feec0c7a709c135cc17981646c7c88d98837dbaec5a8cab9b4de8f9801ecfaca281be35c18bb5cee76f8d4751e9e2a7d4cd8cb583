{"ast":null,"code":"import _Form from \"antd/lib/form\";\nimport _asyncToGenerator from \"/Users/yudiananta/Development/NextJS/ERP Dev/JS Deploy/JS-Deploy/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _Select from \"antd/lib/select\";\n\nvar _jsxFileName = \"/Users/yudiananta/Development/NextJS/ERP Dev/JS Deploy/JS-Deploy/components/Form/AddProduct/Manufactures.js\",\n    _s = $RefreshSig$();\n\nimport _regeneratorRuntime from \"/Users/yudiananta/Development/NextJS/ERP Dev/JS Deploy/JS-Deploy/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport nookies from \"nookies\";\nimport { useState } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Manufactures(_ref) {\n  _s();\n\n  var _this = this,\n      _initialValue$attribu;\n\n  var onSelect = _ref.onSelect,\n      initialValue = _ref.initialValue,\n      selectedManufacures = _ref.selectedManufacures,\n      label = _ref.label;\n\n  var _useState = useState(selectedManufacures),\n      manufactures = _useState[0],\n      setSelectedManufactures = _useState[1];\n\n  var _useState2 = useState([]),\n      data = _useState2[0],\n      setData = _useState2[1];\n\n  var _useState3 = useState(false),\n      loading = _useState3[0],\n      setLoading = _useState3[1];\n\n  var cookies = nookies.get(null, \"token\");\n  var options = data === null || data === void 0 ? void 0 : data.map(function (d) {\n    return /*#__PURE__*/_jsxDEV(_Select.Option, {\n      children: d.label\n    }, d.value, false, {\n      fileName: _jsxFileName,\n      lineNumber: 17,\n      columnNumber: 5\n    }, _this);\n  });\n\n  var handleSearchManufacure = function handleSearchManufacure(newValue) {\n    if (newValue) {\n      setLoading(true);\n      fetchManufactures(newValue, setData);\n    } else {\n      setData([]);\n    }\n\n    setLoading(false);\n  };\n\n  var handleChangeManufactures = function handleChangeManufactures(newValue) {\n    setSelectedManufactures(newValue);\n    onSelect(newValue);\n  };\n\n  var fetchManufactures = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(query, callback) {\n      var endpoint, _options, req, res, manufactureResult;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (query) {\n                _context.next = 4;\n                break;\n              }\n\n              callback([]);\n              _context.next = 19;\n              break;\n\n            case 4:\n              _context.prev = 4;\n              endpoint = process.env.NEXT_PUBLIC_URL + \"/manufactures?filters[$or][0][name][$containsi]=\".concat(query, \"&filters[$or][1][code][$containsi]=\").concat(query);\n              _options = {\n                method: \"GET\",\n                headers: {\n                  \"Content-Type\": \"application/json\",\n                  Authorization: \"Bearer \" + cookies.token\n                }\n              };\n              _context.next = 9;\n              return fetch(endpoint, _options);\n\n            case 9:\n              req = _context.sent;\n              _context.next = 12;\n              return req.json();\n\n            case 12:\n              res = _context.sent;\n\n              if (req.status == 200) {\n                manufactureResult = res.data.map(function (manufacture) {\n                  return {\n                    label: \"\".concat(manufacture.attributes.name),\n                    value: manufacture.id\n                  };\n                });\n                callback(manufactureResult);\n              }\n\n              _context.next = 19;\n              break;\n\n            case 16:\n              _context.prev = 16;\n              _context.t0 = _context[\"catch\"](4);\n              console.log(_context.t0);\n\n            case 19:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[4, 16]]);\n    }));\n\n    return function fetchManufactures(_x, _x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }(); // console.log(manufactures ?? initialValue.attributes.name);\n\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"w-full md:w-full mb-2 md:mb-0\",\n    children: /*#__PURE__*/_jsxDEV(_Form.Item, {\n      initialValue: initialValue === null || initialValue === void 0 ? void 0 : initialValue.attributes.name,\n      name: \"manufactures\",\n      className: \"w-1/1\",\n      rules: [{\n        required: true,\n        message: \"Pabrikasi tidak boleh kosong!\"\n      }],\n      children: /*#__PURE__*/_jsxDEV(_Select, {\n        value: manufactures !== null && manufactures !== void 0 ? manufactures : initialValue === null || initialValue === void 0 ? void 0 : initialValue.attributes.name,\n        size: \"large\",\n        defaultValue: initialValue && {\n          value: initialValue === null || initialValue === void 0 ? void 0 : initialValue.id,\n          label: initialValue === null || initialValue === void 0 ? void 0 : (_initialValue$attribu = initialValue.attributes) === null || _initialValue$attribu === void 0 ? void 0 : _initialValue$attribu.name\n        },\n        showSearch: true,\n        showArrow: false,\n        filterOption: false,\n        defaultActiveFirstOption: false,\n        placeholder: \"Pabrikasi\",\n        onChange: handleChangeManufactures,\n        onSearch: handleSearchManufacure,\n        children: options\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 72,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Manufactures, \"dUN4nA7eyBKsoxY7XxZz6/A6jpY=\");\n\n_c = Manufactures;\n\nvar _c;\n\n$RefreshReg$(_c, \"Manufactures\");","map":{"version":3,"sources":["/Users/yudiananta/Development/NextJS/ERP Dev/JS Deploy/JS-Deploy/components/Form/AddProduct/Manufactures.js"],"names":["nookies","useState","Manufactures","onSelect","initialValue","selectedManufacures","label","manufactures","setSelectedManufactures","data","setData","loading","setLoading","cookies","get","options","map","d","value","handleSearchManufacure","newValue","fetchManufactures","handleChangeManufactures","query","callback","endpoint","process","env","NEXT_PUBLIC_URL","method","headers","Authorization","token","fetch","req","json","res","status","manufactureResult","manufacture","attributes","name","id","console","log","required","message"],"mappings":"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","sourcesContent":["import { Form, Select, Spin } from \"antd\";\nimport nookies from \"nookies\";\nimport { useState } from \"react\";\n\nexport default function Manufactures({\n  onSelect,\n  initialValue,\n  selectedManufacures,\n  label,\n}) {\n  const [manufactures, setSelectedManufactures] = useState(selectedManufacures);\n  const [data, setData] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const cookies = nookies.get(null, \"token\");\n\n  const options = data?.map((d) => (\n    <Select.Option key={d.value}>{d.label}</Select.Option>\n  ));\n\n  const handleSearchManufacure = (newValue) => {\n    if (newValue) {\n      setLoading(true);\n      fetchManufactures(newValue, setData);\n    } else {\n      setData([]);\n    }\n\n    setLoading(false);\n  };\n\n  const handleChangeManufactures = (newValue) => {\n    setSelectedManufactures(newValue);\n    onSelect(newValue);\n  };\n\n  const fetchManufactures = async (query, callback) => {\n    if (!query) {\n      callback([]);\n    } else {\n      try {\n        const endpoint =\n          process.env.NEXT_PUBLIC_URL +\n          `/manufactures?filters[$or][0][name][$containsi]=${query}&filters[$or][1][code][$containsi]=${query}`;\n        const options = {\n          method: \"GET\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: \"Bearer \" + cookies.token,\n          },\n        };\n\n        const req = await fetch(endpoint, options);\n        const res = await req.json();\n\n        if (req.status == 200) {\n          const manufactureResult = res.data.map((manufacture) => ({\n            label: `${manufacture.attributes.name}`,\n            value: manufacture.id,\n          }));\n\n          callback(manufactureResult);\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    }\n  };\n\n  // console.log(manufactures ?? initialValue.attributes.name);\n\n  return (\n    <div className=\"w-full md:w-full mb-2 md:mb-0\">\n      <Form.Item\n        initialValue={initialValue?.attributes.name}\n        name=\"manufactures\"\n        className=\"w-1/1\"\n        rules={[\n          {\n            required: true,\n            message: \"Pabrikasi tidak boleh kosong!\",\n          },\n        ]}\n      >\n        <Select\n          value={manufactures ?? initialValue?.attributes.name}\n          size=\"large\"\n          defaultValue={\n            initialValue && {\n              value: initialValue?.id,\n              label: initialValue?.attributes?.name,\n            }\n          }\n          showSearch\n          showArrow={false}\n          filterOption={false}\n          defaultActiveFirstOption={false}\n          placeholder=\"Pabrikasi\"\n          onChange={handleChangeManufactures}\n          onSearch={handleSearchManufacure}\n        >\n          {options}\n        </Select>\n      </Form.Item>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}