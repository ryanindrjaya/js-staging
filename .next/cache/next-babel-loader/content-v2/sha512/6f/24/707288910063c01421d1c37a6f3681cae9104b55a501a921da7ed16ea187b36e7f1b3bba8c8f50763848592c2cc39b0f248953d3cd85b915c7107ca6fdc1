{"ast":null,"code":"import _Form from \"antd/lib/form\";\nimport _Select from \"antd/lib/select\";\nvar _jsxFileName = \"/Users/yudiananta/Development/NextJS/ERP Dev/JS Deploy/ERP-Sejati/components/Form/AddProduct/Manufactures.js\";\nimport nookies from \"nookies\";\nimport { useState } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Manufactures({\n  onSelect,\n  initialValue,\n  selectedManufacures,\n  label\n}) {\n  var _initialValue$attribu;\n\n  const {\n    0: manufactures,\n    1: setSelectedManufactures\n  } = useState(selectedManufacures);\n  const {\n    0: data,\n    1: setData\n  } = useState([]);\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(false);\n  const cookies = nookies.get(null, \"token\");\n  const options = data === null || data === void 0 ? void 0 : data.map(d => /*#__PURE__*/_jsxDEV(_Select.Option, {\n    children: d.label\n  }, d.value, false, {\n    fileName: _jsxFileName,\n    lineNumber: 11,\n    columnNumber: 36\n  }, this));\n\n  const handleSearchManufacure = newValue => {\n    if (newValue) {\n      setLoading(true);\n      fetchManufactures(newValue, setData);\n    } else {\n      setData([]);\n    }\n\n    setLoading(false);\n  };\n\n  const handleChangeManufactures = newValue => {\n    setSelectedManufactures(newValue);\n    onSelect(newValue);\n  };\n\n  const fetchManufactures = async (query, callback) => {\n    if (!query) {\n      callback([]);\n    } else {\n      try {\n        const endpoint = process.env.NEXT_PUBLIC_URL + `/manufactures?filters[$or][0][name][$containsi]=${query}&filters[$or][1][code][$containsi]=${query}`;\n        const options = {\n          method: \"GET\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: \"Bearer \" + cookies.token\n          }\n        };\n        const req = await fetch(endpoint, options);\n        const res = await req.json();\n\n        if (req.status == 200) {\n          const manufactureResult = res.data.map(manufacture => ({\n            label: `${manufacture.attributes.name}`,\n            value: manufacture.id\n          }));\n          callback(manufactureResult);\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"w-full md:w-full mb-2 md:mb-0\",\n    children: /*#__PURE__*/_jsxDEV(_Form.Item, {\n      name: \"manufactures\",\n      className: \"w-1/1\",\n      children: /*#__PURE__*/_jsxDEV(_Select, {\n        value: manufactures,\n        size: \"large\",\n        defaultValue: initialValue && {\n          value: initialValue === null || initialValue === void 0 ? void 0 : initialValue.id,\n          label: initialValue === null || initialValue === void 0 ? void 0 : (_initialValue$attribu = initialValue.attributes) === null || _initialValue$attribu === void 0 ? void 0 : _initialValue$attribu.name\n        },\n        showSearch: true,\n        showArrow: false,\n        filterOption: false,\n        defaultActiveFirstOption: false,\n        placeholder: \"Pabrikasi\",\n        onChange: handleChangeManufactures,\n        onSearch: handleSearchManufacure,\n        children: options\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 5\n  }, this);\n}","map":{"version":3,"sources":["/Users/yudiananta/Development/NextJS/ERP Dev/JS Deploy/ERP-Sejati/components/Form/AddProduct/Manufactures.js"],"names":["nookies","useState","Manufactures","onSelect","initialValue","selectedManufacures","label","manufactures","setSelectedManufactures","data","setData","loading","setLoading","cookies","get","options","map","d","value","handleSearchManufacure","newValue","fetchManufactures","handleChangeManufactures","query","callback","endpoint","process","env","NEXT_PUBLIC_URL","method","headers","Authorization","token","req","fetch","res","json","status","manufactureResult","manufacture","attributes","name","id","error","console","log"],"mappings":";;;AACA,OAAOA,OAAP,MAAoB,SAApB;AACA,SAASC,QAAT,QAAyB,OAAzB;;AAEA,eAAe,SAASC,YAAT,CAAsB;AAAEC,EAAAA,QAAF;AAAYC,EAAAA,YAAZ;AAA0BC,EAAAA,mBAA1B;AAA+CC,EAAAA;AAA/C,CAAtB,EAA8E;AAAA;;AAC3F,QAAM;AAAA,OAACC,YAAD;AAAA,OAAeC;AAAf,MAA0CP,QAAQ,CAACI,mBAAD,CAAxD;AACA,QAAM;AAAA,OAACI,IAAD;AAAA,OAAOC;AAAP,MAAkBT,QAAQ,CAAC,EAAD,CAAhC;AACA,QAAM;AAAA,OAACU,OAAD;AAAA,OAAUC;AAAV,MAAwBX,QAAQ,CAAC,KAAD,CAAtC;AACA,QAAMY,OAAO,GAAGb,OAAO,CAACc,GAAR,CAAY,IAAZ,EAAkB,OAAlB,CAAhB;AAEA,QAAMC,OAAO,GAAGN,IAAH,aAAGA,IAAH,uBAAGA,IAAI,CAAEO,GAAN,CAAWC,CAAD,iBAAO,gBAAQ,MAAR;AAAA,cAA8BA,CAAC,CAACX;AAAhC,KAAoBW,CAAC,CAACC,KAAtB;AAAA;AAAA;AAAA;AAAA,UAAjB,CAAhB;;AAEA,QAAMC,sBAAsB,GAAIC,QAAD,IAAc;AAC3C,QAAIA,QAAJ,EAAc;AACZR,MAAAA,UAAU,CAAC,IAAD,CAAV;AACAS,MAAAA,iBAAiB,CAACD,QAAD,EAAWV,OAAX,CAAjB;AACD,KAHD,MAGO;AACLA,MAAAA,OAAO,CAAC,EAAD,CAAP;AACD;;AAEDE,IAAAA,UAAU,CAAC,KAAD,CAAV;AACD,GATD;;AAWA,QAAMU,wBAAwB,GAAIF,QAAD,IAAc;AAC7CZ,IAAAA,uBAAuB,CAACY,QAAD,CAAvB;AACAjB,IAAAA,QAAQ,CAACiB,QAAD,CAAR;AACD,GAHD;;AAKA,QAAMC,iBAAiB,GAAG,OAAOE,KAAP,EAAcC,QAAd,KAA2B;AACnD,QAAI,CAACD,KAAL,EAAY;AACVC,MAAAA,QAAQ,CAAC,EAAD,CAAR;AACD,KAFD,MAEO;AACL,UAAI;AACF,cAAMC,QAAQ,GACZC,OAAO,CAACC,GAAR,CAAYC,eAAZ,GAA+B,mDAAkDL,KAAM,sCAAqCA,KAAM,EADpI;AAEA,cAAMR,OAAO,GAAG;AACdc,UAAAA,MAAM,EAAE,KADM;AAEdC,UAAAA,OAAO,EAAE;AACP,4BAAgB,kBADT;AAEPC,YAAAA,aAAa,EAAE,YAAYlB,OAAO,CAACmB;AAF5B;AAFK,SAAhB;AAQA,cAAMC,GAAG,GAAG,MAAMC,KAAK,CAACT,QAAD,EAAWV,OAAX,CAAvB;AACA,cAAMoB,GAAG,GAAG,MAAMF,GAAG,CAACG,IAAJ,EAAlB;;AAEA,YAAIH,GAAG,CAACI,MAAJ,IAAc,GAAlB,EAAuB;AACrB,gBAAMC,iBAAiB,GAAGH,GAAG,CAAC1B,IAAJ,CAASO,GAAT,CAAcuB,WAAD,KAAkB;AACvDjC,YAAAA,KAAK,EAAG,GAAEiC,WAAW,CAACC,UAAZ,CAAuBC,IAAK,EADiB;AAEvDvB,YAAAA,KAAK,EAAEqB,WAAW,CAACG;AAFoC,WAAlB,CAAb,CAA1B;AAKAlB,UAAAA,QAAQ,CAACc,iBAAD,CAAR;AACD;AACF,OAtBD,CAsBE,OAAOK,KAAP,EAAc;AACdC,QAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACD;AACF;AACF,GA9BD;;AA+BA,sBACE;AAAK,IAAA,SAAS,EAAC,+BAAf;AAAA,2BACE,cAAM,IAAN;AAAW,MAAA,IAAI,EAAC,cAAhB;AAA+B,MAAA,SAAS,EAAC,OAAzC;AAAA,6BACE;AACE,QAAA,KAAK,EAAEpC,YADT;AAEE,QAAA,IAAI,EAAC,OAFP;AAGE,QAAA,YAAY,EAAEH,YAAY,IAAI;AAAEc,UAAAA,KAAK,EAAEd,YAAF,aAAEA,YAAF,uBAAEA,YAAY,CAAEsC,EAAvB;AAA2BpC,UAAAA,KAAK,EAAEF,YAAF,aAAEA,YAAF,gDAAEA,YAAY,CAAEoC,UAAhB,0DAAE,sBAA0BC;AAA5D,SAHhC;AAIE,QAAA,UAAU,MAJZ;AAKE,QAAA,SAAS,EAAE,KALb;AAME,QAAA,YAAY,EAAE,KANhB;AAOE,QAAA,wBAAwB,EAAE,KAP5B;AAQE,QAAA,WAAW,EAAC,WARd;AASE,QAAA,QAAQ,EAAEnB,wBATZ;AAUE,QAAA,QAAQ,EAAEH,sBAVZ;AAAA,kBAYGJ;AAZH;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,UADF;AAoBD","sourcesContent":["import { Form, Select, Spin } from \"antd\";\nimport nookies from \"nookies\";\nimport { useState } from \"react\";\n\nexport default function Manufactures({ onSelect, initialValue, selectedManufacures, label }) {\n  const [manufactures, setSelectedManufactures] = useState(selectedManufacures);\n  const [data, setData] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const cookies = nookies.get(null, \"token\");\n\n  const options = data?.map((d) => <Select.Option key={d.value}>{d.label}</Select.Option>);\n\n  const handleSearchManufacure = (newValue) => {\n    if (newValue) {\n      setLoading(true);\n      fetchManufactures(newValue, setData);\n    } else {\n      setData([]);\n    }\n\n    setLoading(false);\n  };\n\n  const handleChangeManufactures = (newValue) => {\n    setSelectedManufactures(newValue);\n    onSelect(newValue);\n  };\n\n  const fetchManufactures = async (query, callback) => {\n    if (!query) {\n      callback([]);\n    } else {\n      try {\n        const endpoint =\n          process.env.NEXT_PUBLIC_URL + `/manufactures?filters[$or][0][name][$containsi]=${query}&filters[$or][1][code][$containsi]=${query}`;\n        const options = {\n          method: \"GET\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: \"Bearer \" + cookies.token,\n          },\n        };\n\n        const req = await fetch(endpoint, options);\n        const res = await req.json();\n\n        if (req.status == 200) {\n          const manufactureResult = res.data.map((manufacture) => ({\n            label: `${manufacture.attributes.name}`,\n            value: manufacture.id,\n          }));\n\n          callback(manufactureResult);\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    }\n  };\n  return (\n    <div className=\"w-full md:w-full mb-2 md:mb-0\">\n      <Form.Item name=\"manufactures\" className=\"w-1/1\">\n        <Select\n          value={manufactures}\n          size=\"large\"\n          defaultValue={initialValue && { value: initialValue?.id, label: initialValue?.attributes?.name }}\n          showSearch\n          showArrow={false}\n          filterOption={false}\n          defaultActiveFirstOption={false}\n          placeholder=\"Pabrikasi\"\n          onChange={handleChangeManufactures}\n          onSearch={handleSearchManufacure}\n        >\n          {options}\n        </Select>\n      </Form.Item>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}