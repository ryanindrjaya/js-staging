{"ast":null,"code":"import _Spin from \"antd/lib/spin\";\nimport _Upload from \"antd/lib/upload\";\nimport _Button from \"antd/lib/button\";\nimport _UploadOutlined from \"@ant-design/icons/lib/icons/UploadOutlined\";\nimport _InputNumber from \"antd/lib/input-number\";\nimport _Select from \"antd/lib/select\";\nimport _DatePicker from \"antd/lib/date-picker\";\nimport _notification from \"antd/lib/notification\";\nimport _defineProperty from \"/Users/yudiananta/Development/NextJS/ERP Dev/JS Deploy/ERP-Sejati/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"/Users/yudiananta/Development/NextJS/ERP Dev/JS Deploy/ERP-Sejati/node_modules/next/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _asyncToGenerator from \"/Users/yudiananta/Development/NextJS/ERP Dev/JS Deploy/ERP-Sejati/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _Input from \"antd/lib/input\";\nimport _Form from \"antd/lib/form\";\nimport _slicedToArray from \"/Users/yudiananta/Development/NextJS/ERP Dev/JS Deploy/ERP-Sejati/node_modules/next/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport _regeneratorRuntime from \"/Users/yudiananta/Development/NextJS/ERP Dev/JS Deploy/ERP-Sejati/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport { useState, useEffect } from \"react\";\nimport { useRouter } from \"next/router\";\nimport Head from \"next/head\";\nimport LayoutContent from \"@iso/components/utility/layoutContent\";\nimport DashboardLayout from \"@iso/containers/DashboardLayout/DashboardLayout\";\nimport LayoutWrapper from \"@iso/components/utility/layoutWrapper.js\";\nimport TitlePage from \"@iso/components/TitlePage/TitlePage\";\nimport nookies from \"nookies\";\nimport { toast } from \"react-toastify\";\nimport moment from \"moment\";\nimport SearchBar from \"@iso/components/Form/AddOrder/SearchBar\";\nimport Supplier from \"@iso/components/Form/AddOrder/SupplierForm\"; // import EditOrderTable from \"@iso/components/Form/AddOrder/EditOrderTable\";\n\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\n\nvar Edit = function Edit(_ref) {\n  var props = _ref.props;\n  var data = props.data;\n  var locations = props.locations;\n  var initialProducts = [];\n  var products = data.data.attributes.purchase_details.data;\n  products.forEach(function (element) {\n    initialProducts.push(element.attributes.products.data[0]);\n  }); //   var locations = props.locations.data;\n\n  var _useState = useState(),\n      selectedLocations = _useState[0],\n      setSelectedLocations = _useState[1];\n\n  var _Form$useForm = _Form.useForm(),\n      _Form$useForm2 = _slicedToArray(_Form$useForm, 1),\n      form = _Form$useForm2[0];\n\n  var _useState2 = useState(false),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var _useState3 = useState({}),\n      mapPrice = _useState3[0],\n      setMapPrice = _useState3[1];\n\n  var _useState4 = useState(initialProducts),\n      productList = _useState4[0],\n      setProductList = _useState4[1];\n\n  var _useState5 = useState(data.data.attributes.supplier.data),\n      supplier = _useState5[0],\n      setSupplier = _useState5[1];\n\n  var _useState6 = useState(data.data.attributes.delivery_total),\n      totalPrice = _useState6[0],\n      setTotalPrice = _useState6[1];\n\n  var _useState7 = useState(0),\n      grandTotal = _useState7[0],\n      setGrandTotal = _useState7[1];\n\n  var _useState8 = useState(),\n      additionalFee = _useState8[0],\n      setAdditionalFee = _useState8[1];\n\n  var _useState9 = useState(),\n      qty = _useState9[0],\n      setQty = _useState9[1];\n\n  var _useState10 = useState([]),\n      listId = _useState10[0],\n      setListId = _useState10[1];\n\n  var _useState11 = useState(),\n      price = _useState11[0],\n      setPrice = _useState11[1];\n\n  var _useState12 = useState(),\n      dataValues = _useState12[0],\n      setDataValues = _useState12[1];\n\n  var _useState13 = useState(0),\n      tempoDays = _useState13[0],\n      setTempoDays = _useState13[1];\n\n  var _useState14 = useState(\"Hari\"),\n      tempoOption = _useState14[0],\n      setTempoOption = _useState14[1];\n\n  var _useState15 = useState(false),\n      doneCreateDetail = _useState15[0],\n      setDoneCreateDetail = _useState15[1];\n\n  var router = useRouter(); // temp\n\n  var _useState16 = useState(0),\n      biayaTambahan = _useState16[0],\n      setBiayaTambahan = _useState16[1];\n\n  var _useState17 = useState(0),\n      biayaPengiriman = _useState17[0],\n      setBiayaPengiriman = _useState17[1];\n\n  var cookies = nookies.get(null, \"token\");\n  var tempList = [];\n  var tempListId = [];\n  var tempProductListId = [];\n  var tempSupplierId = 0;\n  var tempLocationId;\n  var mapPriceList = {};\n  var TextArea = _Input.TextArea;\n  var formatter = new Intl.NumberFormat(\"id-ID\", {\n    style: \"currency\",\n    currency: \"IDR\",\n    maximumFractionDigits: 0\n  });\n\n  var onFinish = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(values) {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setLoading(true);\n              setDataValues(values);\n              setLoading(false);\n\n            case 3:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function onFinish(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var createDetailOrder = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              if (mapPrice) {\n                productList.forEach(function (element) {\n                  var _dataValues$jumlah_qt;\n\n                  var id = element.id;\n                  var qty = parseInt((_dataValues$jumlah_qt = dataValues.jumlah_qty[id]) !== null && _dataValues$jumlah_qt !== void 0 ? _dataValues$jumlah_qt : 1);\n                  var unit = \"\";\n                  var subTotal = 0;\n                  console.log(mapPrice);\n                  console.log(id);\n\n                  if (mapPrice[id]) {\n                    var _mapPrice$id;\n\n                    var price = 0;\n\n                    if (price[id]) {\n                      price = price[id].price_1st;\n                    }\n\n                    subTotal = ((_mapPrice$id = mapPrice[id]) === null || _mapPrice$id === void 0 ? void 0 : _mapPrice$id.priceUnit) - price;\n                    var price1 = calculatePercentage(subTotal, mapPrice[id].dp1);\n                    var price2 = calculatePercentage(price1, mapPrice[id].dp2);\n                    var price3 = calculatePercentage(price2, mapPrice[id].dp3);\n                    unit = mapPrice[id].defaultUnit, subTotal = price3 * qty;\n                  } else {\n                    subTotal = element.attributes.buy_price_1 - 0;\n                    var price1 = calculatePercentage(subTotal, element.attributes.unit_1_dp1);\n                    var price2 = calculatePercentage(price1, element.attributes.unit_1_dp2);\n                    var price3 = calculatePercentage(price2, element.attributes.unit_1_dp3);\n                    unit = element.attributes.unit_1, subTotal = price3 * qty;\n                  }\n\n                  POSTPurchaseDetail(qty, unit, subTotal, id);\n                });\n              }\n\n            case 1:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function createDetailOrder() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var POSTPurchaseDetail = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(qty, unit, subTotal, productId) {\n      var disc, data, endpoint, JSONdata, options, req, res, _res$data;\n\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              disc = 0;\n              if (price) if (price[productId]) disc = price[productId];\n              data = {\n                data: {\n                  total_order: String(qty),\n                  unit_order: unit,\n                  sub_total: parseInt(subTotal),\n                  products: {\n                    id: productId\n                  },\n                  disc: parseInt(disc)\n                }\n              };\n              endpoint = process.env.NEXT_PUBLIC_URL + \"/purchase-details\";\n              JSONdata = JSON.stringify(data);\n              options = {\n                method: \"POST\",\n                headers: {\n                  \"Content-Type\": \"application/json\",\n                  Authorization: \"Bearer \" + cookies.token\n                },\n                body: JSONdata\n              };\n              _context3.next = 8;\n              return fetch(endpoint, options);\n\n            case 8:\n              req = _context3.sent;\n              _context3.next = 11;\n              return req.json();\n\n            case 11:\n              res = _context3.sent;\n\n              if (req.status === 200) {\n                tempListId.push((_res$data = res.data) === null || _res$data === void 0 ? void 0 : _res$data.id);\n\n                if (tempListId.length === productList.length) {\n                  setListId(tempListId);\n                }\n              }\n\n            case 13:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function POSTPurchaseDetail(_x2, _x3, _x4, _x5) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  var createOrder = /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(values) {\n      var orderDate, deliveryDate, supplierId, data, endpoint, JSONdata, options, req, res;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              orderDate = new Date(values.order_date);\n              deliveryDate = new Date(values.delivery_date);\n              supplierId = {\n                id: parseInt(values.supplier_id)\n              };\n              tempSupplierId = parseInt(values.supplier_id);\n              tempLocationId = parseInt(values.location);\n              listId.forEach(function (element) {\n                tempProductListId.push({\n                  id: element\n                });\n              });\n              values.order_date = orderDate;\n              values.delivery_date = deliveryDate;\n              values.supplier_id = supplierId;\n              values.status = \"Dipesan\";\n              values.delivery_total = grandTotal === 0 ? parseInt(totalPrice) : parseInt(grandTotal);\n              values.purchase_details = null;\n              values.supplier_id = null;\n              data = {\n                data: values\n              };\n              endpoint = process.env.NEXT_PUBLIC_URL + \"/purchases\";\n              JSONdata = JSON.stringify(data);\n              options = {\n                method: \"POST\",\n                headers: {\n                  \"Content-Type\": \"application/json\",\n                  Authorization: \"Bearer \" + cookies.token\n                },\n                body: JSONdata\n              };\n              _context4.next = 19;\n              return fetch(endpoint, options);\n\n            case 19:\n              req = _context4.sent;\n              _context4.next = 22;\n              return req.json();\n\n            case 22:\n              res = _context4.sent;\n\n              if (!(req.status === 200)) {\n                _context4.next = 28;\n                break;\n              }\n\n              _context4.next = 26;\n              return putRelationOrder(res.data.id, res.data.attributes);\n\n            case 26:\n              _context4.next = 29;\n              break;\n\n            case 28:\n              openNotificationWithIcon(\"error\");\n\n            case 29:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n\n    return function createOrder(_x6) {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n\n  var putRelationOrder = /*#__PURE__*/function () {\n    var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(id, value) {\n      var user, dataOrder, key, JSONdata, endpoint, options, req, res;\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              _context5.next = 2;\n              return getUserMe();\n\n            case 2:\n              user = _context5.sent;\n              dataOrder = {\n                data: value\n              };\n              dataOrder.data.supplier = {\n                id: tempSupplierId\n              };\n              dataOrder.data.purchase_details = tempProductListId;\n              dataOrder.data.added_by = user.name;\n              dataOrder.data.locations = {\n                id: tempLocationId\n              }; // clean object\n\n              for (key in dataOrder) {\n                if (dataOrder[key] === null || dataOrder[key] === undefined) {\n                  delete dataOrder[key];\n                }\n              }\n\n              JSONdata = JSON.stringify(dataOrder);\n              endpoint = process.env.NEXT_PUBLIC_URL + \"/purchases/\" + id;\n              options = {\n                method: \"PUT\",\n                headers: {\n                  \"Content-Type\": \"application/json\",\n                  Authorization: \"Bearer \" + cookies.token\n                },\n                body: JSONdata\n              };\n              _context5.next = 14;\n              return fetch(endpoint, options);\n\n            case 14:\n              req = _context5.sent;\n              _context5.next = 17;\n              return req.json();\n\n            case 17:\n              res = _context5.sent;\n\n              if (req.status === 200) {\n                form.resetFields();\n                router.replace(\"/dashboard/pembelian/order_pembelian\");\n                openNotificationWithIcon(\"success\");\n              } else {\n                openNotificationWithIcon(\"error\");\n              }\n\n            case 19:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5);\n    }));\n\n    return function putRelationOrder(_x7, _x8) {\n      return _ref6.apply(this, arguments);\n    };\n  }();\n\n  var getUserMe = /*#__PURE__*/function () {\n    var _ref7 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6() {\n      var endpoint, options, req, res;\n      return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n        while (1) {\n          switch (_context6.prev = _context6.next) {\n            case 0:\n              endpoint = process.env.NEXT_PUBLIC_URL + \"/users/me\";\n              options = {\n                method: \"GET\",\n                headers: {\n                  \"Content-Type\": \"application/json\",\n                  Authorization: \"Bearer \" + cookies.token\n                }\n              };\n              _context6.next = 4;\n              return fetch(endpoint, options);\n\n            case 4:\n              req = _context6.sent;\n              _context6.next = 7;\n              return req.json();\n\n            case 7:\n              res = _context6.sent;\n              return _context6.abrupt(\"return\", res);\n\n            case 9:\n            case \"end\":\n              return _context6.stop();\n          }\n        }\n      }, _callee6);\n    }));\n\n    return function getUserMe() {\n      return _ref7.apply(this, arguments);\n    };\n  }();\n\n  var onChange = /*#__PURE__*/function () {\n    var _ref8 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7() {\n      var isDuplicatedData;\n      return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n        while (1) {\n          switch (_context7.prev = _context7.next) {\n            case 0:\n              isDuplicatedData = false;\n              tempList.find(function (item) {\n                productList.forEach(function (element) {\n                  if (element.id === item.id) isDuplicatedData = true;\n                });\n              });\n\n              if (!isDuplicatedData) {\n                setProductList(function (productList) {\n                  return [].concat(_toConsumableArray(productList), [tempList[0]]);\n                });\n                toast.success(\"Produk berhasil ditambahkan!\", {\n                  position: toast.POSITION.TOP_RIGHT,\n                  autoClose: 1000\n                });\n              }\n\n            case 3:\n            case \"end\":\n              return _context7.stop();\n          }\n        }\n      }, _callee7);\n    }));\n\n    return function onChange() {\n      return _ref8.apply(this, arguments);\n    };\n  }();\n\n  var sumTotalPrice = function sumTotalPrice() {\n    var total = 0;\n\n    for (var key in mapPriceList) {\n      total = total + mapPriceList[key];\n    }\n\n    setTotalPrice(total);\n  };\n\n  var sumDeliveryPrice = function sumDeliveryPrice(price) {\n    setBiayaPengiriman(price);\n  };\n\n  var sumAdditionalPrice = function sumAdditionalPrice() {\n    var newTotal = 0;\n\n    for (var key in additionalFee) {\n      newTotal = newTotal + additionalFee[key];\n    }\n\n    var test = totalPrice + newTotal;\n    setBiayaTambahan(newTotal);\n  };\n\n  var changeQty = function changeQty(values, data) {\n    setQty(_objectSpread(_objectSpread({}, qty), {}, _defineProperty({}, data.id, {\n      qty: values\n    })));\n  };\n\n  var calculatePercentage = function calculatePercentage(value, percent) {\n    var newValue = value - value * percent / 100;\n    return newValue;\n  };\n\n  useEffect(function () {\n    setGrandTotal(totalPrice + biayaPengiriman + biayaTambahan);\n  }, [biayaPengiriman, biayaTambahan, totalPrice]);\n  useEffect(function () {\n    sumAdditionalPrice();\n  }, [additionalFee]);\n  useEffect(function () {\n    if (listId.length > 0) {\n      createOrder(dataValues);\n    }\n  }, [listId]);\n  useEffect(function () {\n    if (dataValues) createDetailOrder();\n  }, [dataValues]);\n  useEffect(function () {\n    console.log(price);\n  }, [price]);\n  useEffect(function () {\n    var testMap = {};\n    products.forEach(function (element) {\n      var product = element.attributes.products.data[0].attributes;\n      var productId = element.attributes.products.data[0].id;\n      var defaultUnit = element.attributes.unit_order;\n      var dp1 = 0;\n      var dp2 = 0;\n      var dp3 = 0;\n      var priceUnit = 0;\n\n      for (var index = 1; index < 6; index++) {\n        if (product[\"unit_\".concat(index)] === defaultUnit) {\n          dp1 = product[\"unit_\".concat(index, \"_dp1\")];\n          dp2 = product[\"unit_\".concat(index, \"_dp2\")];\n          dp3 = product[\"unit_\".concat(index, \"_dp3\")];\n          priceUnit = product[\"buy_price_\".concat(index)];\n        }\n      }\n\n      testMap[productId] = {\n        defaultUnit: defaultUnit,\n        priceUnit: priceUnit,\n        dp1: dp1,\n        dp2: dp2,\n        dp3: dp3\n      };\n      setMapPrice(testMap);\n    });\n  }, []);\n\n  var openNotificationWithIcon = function openNotificationWithIcon(type) {\n    if (type === \"error\") {\n      _notification[type]({\n        message: \"Gagal menambahkan data\",\n        description: \"Produk gagal ditambahkan. Silahkan cek NO PO atau kelengkapan data lainnya\"\n      });\n    } else if (type === \"success\") {\n      _notification[type]({\n        message: \"Berhasil menambahkan data\",\n        description: \"Produk berhasil ditambahkan. Silahkan cek pada halaman Order Pembelian\"\n      });\n    }\n  };\n\n  var validateError = function validateError() {\n    var listError = form.getFieldsError();\n    listError.forEach(function (element) {\n      if (element.errors[0]) {\n        _notification[\"error\"]({\n          message: \"Field Kosong\",\n          description: element.errors[0]\n        });\n      }\n    });\n  };\n\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsx(Head, {\n      children: /*#__PURE__*/_jsx(\"title\", {\n        children: \"Edit Order Pembelian\"\n      })\n    }), /*#__PURE__*/_jsx(DashboardLayout, {\n      children: /*#__PURE__*/_jsxs(LayoutWrapper, {\n        style: {},\n        children: [/*#__PURE__*/_jsx(TitlePage, {\n          titleText: \"Edit Order Pembelian\"\n        }), /*#__PURE__*/_jsx(LayoutContent, {\n          children: /*#__PURE__*/_jsxs(_Form, {\n            form: form,\n            name: \"add_order\",\n            initialValues: {\n              remember: true\n            },\n            onFinish: onFinish,\n            children: [/*#__PURE__*/_jsxs(\"div\", {\n              className: \"flex flex-wrap -mx-3 mb-3\",\n              children: [/*#__PURE__*/_jsx(\"div\", {\n                className: \"w-full md:w-1/4 px-3 mb-2 md:mb-0\",\n                children: /*#__PURE__*/_jsx(Supplier, {\n                  onChangeSupplier: setSupplier,\n                  initialValue: data.data.attributes.supplier\n                })\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: \"w-full md:w-1/4 px-3 mb-2 md:mb-0\",\n                children: /*#__PURE__*/_jsx(_Form.Item, {\n                  initialValue: data.data.attributes.no_po,\n                  name: \"no_po\",\n                  rules: [{\n                    required: true,\n                    message: \"Nomor PO tidak boleh kosong!\"\n                  }],\n                  children: /*#__PURE__*/_jsx(_Input, {\n                    disabled: true,\n                    style: {\n                      height: \"40px\"\n                    },\n                    placeholder: \"No.PO\"\n                  })\n                })\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: \"w-full md:w-1/4 px-3 mb-2 md:mb-0\",\n                children: /*#__PURE__*/_jsx(_Form.Item, {\n                  initialValue: moment(data.data.attributes.order_date),\n                  name: \"order_date\",\n                  rules: [{\n                    required: true,\n                    message: \"Tanggal tidak boleh kosong!\"\n                  }],\n                  children: /*#__PURE__*/_jsx(_DatePicker, {\n                    placeholder: \"Tanggal Pesanan\",\n                    size: \"large\",\n                    format: \"DD/MM/YYYY\",\n                    style: {\n                      width: \"100%\"\n                    }\n                  })\n                })\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: \"w-full md:w-1/4 px-3 mb-2 md:mb-0\",\n                children: /*#__PURE__*/_jsx(_Form.Item, {\n                  initialValue: moment(data.data.attributes.delivery_date),\n                  name: \"delivery_date\",\n                  rules: [{\n                    required: true,\n                    message: \"Tanggal tidak boleh kosong!\"\n                  }],\n                  children: /*#__PURE__*/_jsx(_DatePicker, {\n                    placeholder: \"Tanggal Pengiriman\",\n                    size: \"large\",\n                    format: \"DD/MM/YYYY\",\n                    style: {\n                      width: \"100%\"\n                    }\n                  })\n                })\n              }), /*#__PURE__*/_jsxs(\"div\", {\n                className: \"w-full md:w-3/4 px-3 mb-2 md:mb-0\",\n                children: [/*#__PURE__*/_jsx(\"p\", {\n                  className: \"font-bold m-0\",\n                  children: \"Alamat Supplier : \"\n                }), /*#__PURE__*/_jsxs(\"p\", {\n                  className: \"m-0\",\n                  children: [\" \", supplier === null || supplier === void 0 ? void 0 : supplier.attributes.address]\n                }), /*#__PURE__*/_jsxs(\"p\", {\n                  children: [\" \", supplier === null || supplier === void 0 ? void 0 : supplier.attributes.phone]\n                })]\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: \"w-full md:w-1/4 px-3 mb-2 md:mb-0\",\n                children: /*#__PURE__*/_jsxs(_Input.Group, {\n                  compact: true,\n                  children: [/*#__PURE__*/_jsx(_Form.Item, {\n                    name: \"tempo_days\",\n                    initialValue: data.data.attributes.tempo_days,\n                    children: /*#__PURE__*/_jsx(_Input, {\n                      size: \"large\",\n                      style: {\n                        width: \"100%\"\n                      },\n                      onChange: setTempoDays\n                    })\n                  }), /*#__PURE__*/_jsx(_Form.Item, {\n                    name: \"tempo_time\",\n                    initialValue: data.data.attributes.tempo_time,\n                    children: /*#__PURE__*/_jsxs(_Select, {\n                      size: \"large\",\n                      onChange: setTempoOption,\n                      style: {\n                        width: \"100%\"\n                      },\n                      children: [/*#__PURE__*/_jsx(_Select.Option, {\n                        value: \"Hari\",\n                        children: \"Hari\"\n                      }), /*#__PURE__*/_jsx(_Select.Option, {\n                        value: \"Bulan\",\n                        children: \"Bulan\"\n                      })]\n                    })\n                  })]\n                })\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: \"w-full md:w-4/4 px-3 mb-2 mt-5 mx-3  md:mb-0\",\n                children: /*#__PURE__*/_jsx(SearchBar, {\n                  form: form,\n                  tempList: tempList,\n                  onChange: onChange\n                })\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: \"w-full md:w-4/4 px-3 mb-2 mt-5 mx-3  md:mb-0\"\n              })]\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \"flex justify-end\",\n              children: /*#__PURE__*/_jsxs(\"p\", {\n                className: \"font-bold\",\n                children: [\"Total Item : \", productList.length, \" \"]\n              })\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \"flex justify-end\",\n              children: /*#__PURE__*/_jsxs(\"p\", {\n                className: \"font-bold\",\n                children: [\"Total Harga : \", formatter.format(totalPrice), \" \"]\n              })\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: \"flex flex-wrap -mx-3 mb-3\",\n              children: [/*#__PURE__*/_jsx(\"div\", {\n                className: \"w-full md:w-1/3 px-3 mt-5 md:mb-0\",\n                children: /*#__PURE__*/_jsx(_Form.Item, {\n                  name: \"delivery_details\",\n                  children: /*#__PURE__*/_jsx(TextArea, {\n                    rows: 4,\n                    placeholder: \"Detail Pengiriman\"\n                  })\n                })\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: \"w-full md:w-1/3 px-3 mt-5 md:mb-0\",\n                children: /*#__PURE__*/_jsx(_Form.Item, {\n                  name: \"delivery_address\",\n                  children: /*#__PURE__*/_jsx(TextArea, {\n                    rows: 4,\n                    placeholder: \"Alamat Pengiriman\"\n                  })\n                })\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: \"w-full md:w-1/3 px-3 mt-5 md:mb-0\",\n                children: /*#__PURE__*/_jsx(_Form.Item, {\n                  name: \"delivery_fee\",\n                  children: /*#__PURE__*/_jsx(_InputNumber, {\n                    onChange: sumDeliveryPrice,\n                    size: \"large\",\n                    placeholder: \"Biaya Pengiriman\",\n                    style: {\n                      width: \"100%\"\n                    }\n                  })\n                })\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: \"w-full md:w-1/3 px-3 mb-2 mt-5 md:mb-0\",\n                children: /*#__PURE__*/_jsx(_Form.Item, {\n                  name: \"delivery_status\",\n                  initialValue: \"Loading\",\n                  children: /*#__PURE__*/_jsxs(_Select, {\n                    size: \"large\",\n                    style: {\n                      width: \"100%\"\n                    },\n                    children: [/*#__PURE__*/_jsx(_Select.Option, {\n                      value: \"Loading\",\n                      children: \"Loading\"\n                    }), /*#__PURE__*/_jsx(_Select.Option, {\n                      value: \"Pending\",\n                      children: \"Pending\"\n                    }), /*#__PURE__*/_jsx(_Select.Option, {\n                      value: \"Antrian\",\n                      children: \"Antrian\"\n                    }), /*#__PURE__*/_jsx(_Select.Option, {\n                      value: \"Terkirim\",\n                      children: \"Terkirim\"\n                    })]\n                  })\n                })\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: \"w-full md:w-1/3 px-3 mt-5 md:mb-0\",\n                children: /*#__PURE__*/_jsx(_Form.Item, {\n                  name: \"location\",\n                  initialValue: data.data.attributes.location.data.attributes.name,\n                  rules: [{\n                    required: true,\n                    message: \"Lokasi tidak boleh kosong!\"\n                  }],\n                  children: /*#__PURE__*/_jsx(_Select, {\n                    size: \"large\",\n                    style: {\n                      width: \"100%\"\n                    },\n                    children: locations.data.map(function (element) {\n                      return /*#__PURE__*/_jsx(_Select.Option, {\n                        value: element.id,\n                        children: element.attributes.name\n                      });\n                    })\n                  })\n                })\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: \"w-full md:w-1/3 px-3 mb-2 mt-5 md:mb-0\",\n                children: /*#__PURE__*/_jsx(_Upload, {\n                  children: /*#__PURE__*/_jsx(_Button, {\n                    className: \"text-gray-500\",\n                    style: {\n                      width: \"100%\"\n                    },\n                    size: \"large\",\n                    icon: /*#__PURE__*/_jsx(_UploadOutlined, {}),\n                    children: \"Upload Dokumen\"\n                  })\n                })\n              })]\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \"flex justify-end font-bold w-full mb-3 md:w-3/4\",\n              children: /*#__PURE__*/_jsx(\"p\", {\n                children: \"Biaya Tambahan Lain-lain\"\n              })\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: \"flex justify-end\",\n              children: [/*#__PURE__*/_jsxs(\"div\", {\n                className: \"w-full md:w-1/3 px-3 mb-2 text-center md:mb-0\",\n                children: [/*#__PURE__*/_jsx(\"p\", {\n                  className: \"mb-4 font-bold\",\n                  children: \"Keterangan\"\n                }), /*#__PURE__*/_jsx(_Form.Item, {\n                  name: \"additional_fee_1_desc\",\n                  children: /*#__PURE__*/_jsx(_Input, {\n                    size: \"large\",\n                    style: {\n                      width: \"100%\"\n                    }\n                  })\n                }), /*#__PURE__*/_jsx(_Form.Item, {\n                  name: \"additional_fee_2_desc\",\n                  children: /*#__PURE__*/_jsx(_Input, {\n                    size: \"large\",\n                    style: {\n                      width: \"100%\"\n                    }\n                  })\n                }), /*#__PURE__*/_jsx(_Form.Item, {\n                  name: \"additional_fee_3_desc\",\n                  children: /*#__PURE__*/_jsx(_Input, {\n                    size: \"large\",\n                    style: {\n                      width: \"100%\"\n                    }\n                  })\n                }), /*#__PURE__*/_jsx(_Form.Item, {\n                  name: \"additional_fee_4_desc\",\n                  children: /*#__PURE__*/_jsx(_Input, {\n                    size: \"large\",\n                    style: {\n                      width: \"100%\"\n                    }\n                  })\n                }), /*#__PURE__*/_jsx(_Form.Item, {\n                  name: \"additional_fee_5_desc\",\n                  children: /*#__PURE__*/_jsx(_Input, {\n                    size: \"large\",\n                    style: {\n                      width: \"100%\"\n                    }\n                  })\n                })]\n              }), /*#__PURE__*/_jsxs(\"div\", {\n                className: \"w-full md:w-1/3 px-3 mb-2 text-center md:mb-0\",\n                children: [/*#__PURE__*/_jsx(\"p\", {\n                  className: \"mb-4 font-bold\",\n                  children: \"Jumlah\"\n                }), /*#__PURE__*/_jsx(_Form.Item, {\n                  name: \"additional_fee_1_sub\",\n                  children: /*#__PURE__*/_jsx(_InputNumber, {\n                    size: \"large\",\n                    style: {\n                      width: \"100%\"\n                    },\n                    onChange: function onChange(e) {\n                      return setAdditionalFee(_objectSpread(_objectSpread({}, additionalFee), {}, {\n                        additional_fee_1_sub: e\n                      }));\n                    }\n                  })\n                }), /*#__PURE__*/_jsx(_Form.Item, {\n                  name: \"additional_fee_2_sub\",\n                  children: /*#__PURE__*/_jsx(_InputNumber, {\n                    size: \"large\",\n                    style: {\n                      width: \"100%\"\n                    },\n                    onChange: function onChange(e) {\n                      return setAdditionalFee(_objectSpread(_objectSpread({}, additionalFee), {}, {\n                        additional_fee_2_sub: e\n                      }));\n                    }\n                  })\n                }), /*#__PURE__*/_jsx(_Form.Item, {\n                  name: \"additional_fee_3_sub\",\n                  children: /*#__PURE__*/_jsx(_InputNumber, {\n                    size: \"large\",\n                    style: {\n                      width: \"100%\"\n                    },\n                    onChange: function onChange(e) {\n                      return setAdditionalFee(_objectSpread(_objectSpread({}, additionalFee), {}, {\n                        additional_fee_3_sub: e\n                      }));\n                    }\n                  })\n                }), /*#__PURE__*/_jsx(_Form.Item, {\n                  name: \"additional_fee_4_sub\",\n                  children: /*#__PURE__*/_jsx(_InputNumber, {\n                    size: \"large\",\n                    style: {\n                      width: \"100%\"\n                    },\n                    onChange: function onChange(e) {\n                      return setAdditionalFee(_objectSpread(_objectSpread({}, additionalFee), {}, {\n                        additional_fee_4_sub: e\n                      }));\n                    }\n                  })\n                }), /*#__PURE__*/_jsx(_Form.Item, {\n                  name: \"additional_fee_5_sub\",\n                  children: /*#__PURE__*/_jsx(_InputNumber, {\n                    size: \"large\",\n                    style: {\n                      width: \"100%\"\n                    },\n                    onChange: function onChange(e) {\n                      return setAdditionalFee(_objectSpread(_objectSpread({}, additionalFee), {}, {\n                        additional_fee_5_sub: e\n                      }));\n                    }\n                  })\n                })]\n              })]\n            }), /*#__PURE__*/_jsx(\"div\", {\n              children: /*#__PURE__*/_jsxs(\"p\", {\n                className: \"font-bold flex justify-end\",\n                children: [\"Total Biaya : \", grandTotal === 0 ? formatter.format(totalPrice) : formatter.format(grandTotal)]\n              })\n            }), /*#__PURE__*/_jsx(_Form.Item, {\n              name: \"additional_note\",\n              children: /*#__PURE__*/_jsx(TextArea, {\n                rows: 4,\n                placeholder: \"Catatan Tambahan\"\n              })\n            }), /*#__PURE__*/_jsx(_Form.Item, {\n              className: \"mt-5\",\n              children: loading ? /*#__PURE__*/_jsx(\"div\", {\n                className: \" flex float-left ml-3 \",\n                children: /*#__PURE__*/_jsx(_Spin, {})\n              }) : /*#__PURE__*/_jsx(_Button, {\n                onClick: validateError,\n                htmlType: \"submit\",\n                className: \" hover:text-white hover:bg-cyan-700 border border-cyan-700 ml-1\",\n                children: \"Tambah\"\n              })\n            })]\n          })\n        })]\n      })\n    })]\n  });\n};\n\nEdit.getInitialProps = /*#__PURE__*/function () {\n  var _ref9 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8(context) {\n    var cookies, id, endpoint, options, res, data, req, locations;\n    return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n      while (1) {\n        switch (_context8.prev = _context8.next) {\n          case 0:\n            cookies = nookies.get(context);\n            id = context.query.id;\n            endpoint = process.env.NEXT_PUBLIC_URL + \"/purchases/\" + id + \"?populate=deep\";\n            options = {\n              method: \"GET\",\n              headers: {\n                \"Content-Type\": \"application/json\",\n                Authorization: \"Bearer \" + cookies.token\n              }\n            };\n            _context8.next = 6;\n            return fetch(endpoint, options);\n\n          case 6:\n            res = _context8.sent;\n            _context8.next = 9;\n            return res.json();\n\n          case 9:\n            data = _context8.sent;\n            _context8.next = 12;\n            return fetchDataLocation(cookies);\n\n          case 12:\n            req = _context8.sent;\n            _context8.next = 15;\n            return req.json();\n\n          case 15:\n            locations = _context8.sent;\n            return _context8.abrupt(\"return\", {\n              props: {\n                data: data,\n                locations: locations\n              }\n            });\n\n          case 17:\n          case \"end\":\n            return _context8.stop();\n        }\n      }\n    }, _callee8);\n  }));\n\n  return function (_x9) {\n    return _ref9.apply(this, arguments);\n  };\n}();\n\nvar fetchDataLocation = /*#__PURE__*/function () {\n  var _ref10 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee9(cookies) {\n    var endpoint, options, req;\n    return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n      while (1) {\n        switch (_context9.prev = _context9.next) {\n          case 0:\n            endpoint = process.env.NEXT_PUBLIC_URL + \"/locations\";\n            options = {\n              method: \"GET\",\n              headers: {\n                \"Content-Type\": \"application/json\",\n                Authorization: \"Bearer \" + cookies.token\n              }\n            };\n            _context9.next = 4;\n            return fetch(endpoint, options);\n\n          case 4:\n            req = _context9.sent;\n            return _context9.abrupt(\"return\", req);\n\n          case 6:\n          case \"end\":\n            return _context9.stop();\n        }\n      }\n    }, _callee9);\n  }));\n\n  return function fetchDataLocation(_x10) {\n    return _ref10.apply(this, arguments);\n  };\n}();\n\nexport default Edit;","map":null,"metadata":{},"sourceType":"module"}