{"ast":null,"code":"import _asyncToGenerator from \"/Users/yudiananta/Development/NextJS/ERP Dev/JS Deploy/JS-Deploy/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _PrinterOutlined from \"@ant-design/icons/lib/icons/PrinterOutlined\";\nimport _regeneratorRuntime from \"/Users/yudiananta/Development/NextJS/ERP Dev/JS Deploy/JS-Deploy/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport React from \"react\";\nimport nookies from \"nookies\";\nimport ReactToPrint from \"react-to-print\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nvar Print = function Print(_ref) {\n  var props = _ref.props;\n  var name = process.env.STAKEHOLDER_NAME;\n  var noPO = props.purchases.data.attributes.no_po;\n  var date = new Date(props.purchases.data.attributes.order_date).toLocaleDateString(\"id-ID\");\n  var supplierName = props.purchases.data.attributes.supplier.data.attributes.name;\n  var supplierAddress = props.purchases.data.attributes.supplier.data.attributes.address;\n  var destination = props.purchases.data.attributes.location.data.attributes;\n  var destionationName = destination.name;\n  var destinationStreet = \"\".concat(destination.street, \" \");\n  var destinationAddress = \"\".concat(destination.city, \" \").concat(destination.province, \" \").concat(destination.postal_code, \" \").concat(destination.country);\n  var items = props.purchases.data.attributes.purchase_details.data;\n  var deliveryFee = props.purchases.data.attributes.delivery_fee;\n  var TotalHarga = props.purchases.data.attributes.delivery_total;\n  var index = 0;\n\n  var getHargaSatuan = function getHargaSatuan(unit, index) {\n    var price = 0;\n    var product = props.purchases.data.attributes.purchase_details.data[index - 1].attributes.products.data[0];\n\n    for (var _index = 1; _index < 6; _index++) {\n      if (product.attributes[\"unit_\".concat(_index)] === unit) {\n        price = product.attributes[\"buy_price_\".concat(_index)];\n      }\n    }\n\n    return formatter.format(price);\n  };\n\n  var getProductDisc = function getProductDisc(unit, index) {\n    var disc1 = 0;\n    var disc2 = 0;\n    var disc3 = 0;\n    var discInput = props.purchases.data.attributes.purchase_details.data[index - 1].attributes.disc;\n    var product = props.purchases.data.attributes.purchase_details.data[index - 1].attributes.products.data[0];\n\n    for (var _index2 = 1; _index2 < 6; _index2++) {\n      if (product.attributes[\"unit_\".concat(_index2)] === unit) {\n        disc1 = product.attributes[\"unit_\".concat(_index2, \"_dp1\")];\n        disc2 = product.attributes[\"unit_\".concat(_index2, \"_dp2\")];\n        disc3 = product.attributes[\"unit_\".concat(_index2, \"_dp3\")];\n      }\n    }\n\n    return \"\".concat(formatter.format(discInput), \", \").concat(disc1, \"%, \").concat(disc2, \"%, \").concat(disc3, \"%\");\n  };\n\n  var getSubTotal = function getSubTotal(index) {\n    var subTotal = props.purchases.data.attributes.purchase_details.data[index - 1].attributes.sub_total;\n    return formatter.format(subTotal);\n  };\n\n  var getTotalProduct = function getTotalProduct() {\n    var total = 0;\n    props.purchases.data.attributes.purchase_details.data.forEach(function (element) {\n      total = total + element.attributes.sub_total;\n    });\n    return formatter.format(total);\n  };\n\n  var getAdditionalFee = function getAdditionalFee() {\n    var desc1 = props.purchases.data.attributes[\"additional_fee_1_desc\"];\n    var desc2 = props.purchases.data.attributes[\"additional_fee_2_desc\"];\n    var desc3 = props.purchases.data.attributes[\"additional_fee_3_desc\"];\n    var desc4 = props.purchases.data.attributes[\"additional_fee_4_desc\"];\n    var desc5 = props.purchases.data.attributes[\"additional_fee_5_desc\"];\n    var disc1 = formatter.format(props.purchases.data.attributes[\"additional_fee_1_sub\"]);\n    var disc2 = formatter.format(props.purchases.data.attributes[\"additional_fee_2_sub\"]);\n    var disc3 = formatter.format(props.purchases.data.attributes[\"additional_fee_3_sub\"]);\n    var disc4 = formatter.format(props.purchases.data.attributes[\"additional_fee_4_sub\"]);\n    var disc5 = formatter.format(props.purchases.data.attributes[\"additional_fee_5_sub\"]);\n    return /*#__PURE__*/_jsxs(\"div\", {\n      className: \"text-right\",\n      children: [disc1 !== \"Rp 0\" ? /*#__PURE__*/_jsxs(\"div\", {\n        children: [desc1, \" : \", disc1]\n      }) : /*#__PURE__*/_jsx(\"div\", {}), disc2 !== \"Rp 0\" ? /*#__PURE__*/_jsxs(\"div\", {\n        children: [desc2, \" : \", disc2]\n      }) : /*#__PURE__*/_jsx(\"div\", {}), disc3 !== \"Rp 0\" ? /*#__PURE__*/_jsxs(\"div\", {\n        children: [desc3, \" : \", disc3]\n      }) : /*#__PURE__*/_jsx(\"div\", {}), disc4 !== \"Rp 0\" ? /*#__PURE__*/_jsxs(\"div\", {\n        children: [desc4, \" : \", disc4]\n      }) : /*#__PURE__*/_jsx(\"div\", {}), disc5 !== \"Rp 0\" ? /*#__PURE__*/_jsxs(\"div\", {\n        children: [desc5, \" : \", disc5]\n      }) : /*#__PURE__*/_jsx(\"div\", {})]\n    });\n  };\n\n  var print = function print() {\n    window.print();\n    return false;\n  };\n\n  var formatter = new Intl.NumberFormat(\"id-ID\", {\n    style: \"currency\",\n    currency: \"IDR\",\n    maximumFractionDigits: 0\n  });\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: \"m-3\",\n    children: [/*#__PURE__*/_jsx(\"div\", {\n      className: \"flex justify-end mb-5\",\n      children: /*#__PURE__*/_jsxs(\"button\", {\n        onClick: print,\n        \"class\": \"print:hidden rounded-full bg-sky-400 px-4 py-2 font-bold text-white\",\n        children: [/*#__PURE__*/_jsx(\"span\", {\n          children: /*#__PURE__*/_jsx(_PrinterOutlined, {\n            className: \"mr-1 text-lg\"\n          })\n        }), \" \", \"Cetak Dokumen\"]\n      })\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      id: \"printableArea\",\n      className: \"flex justify-between\",\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: \"font-bold text-lg\",\n        children: name\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        children: [/*#__PURE__*/_jsxs(\"div\", {\n          className: \"\",\n          children: [\"NO : \", noPO]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"\",\n          children: [\"Tanggal : \", date]\n        })]\n      })]\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: \"font-bold text-lg flex justify-center mb-5\",\n      children: \"ORDER PEMBELIAN\"\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      className: \"flex justify-between mb-5\",\n      children: [/*#__PURE__*/_jsxs(\"div\", {\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          className: \"font-bold text-sm\",\n          children: \"KEPADA\"\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"font-bold text-sm uppercase\",\n          children: [\"Nama Supplier : \", supplierName]\n        }), /*#__PURE__*/_jsx(\"div\", {\n          children: supplierAddress\n        })]\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        children: [/*#__PURE__*/_jsxs(\"div\", {\n          className: \"font-bold  text-sm uppercase\",\n          children: [\"ALAMAT PENGIRIMAN : \", destionationName]\n        }), /*#__PURE__*/_jsx(\"div\", {\n          children: destinationStreet\n        }), /*#__PURE__*/_jsx(\"div\", {\n          children: destinationAddress\n        })]\n      })]\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: \"flex justify-between\",\n      children: /*#__PURE__*/_jsxs(\"table\", {\n        className: \"w-full\",\n        children: [/*#__PURE__*/_jsxs(\"tr\", {\n          className: \"p-2\",\n          children: [/*#__PURE__*/_jsx(\"th\", {\n            className: \"border-2 p-2\",\n            children: \"NO\"\n          }), /*#__PURE__*/_jsx(\"th\", {\n            className: \"border-2 p-2\",\n            children: \"ITEM\"\n          }), /*#__PURE__*/_jsx(\"th\", {\n            className: \"border-2 p-2\",\n            children: \"HARGA SATUAN\"\n          }), /*#__PURE__*/_jsx(\"th\", {\n            className: \"border-2 p-2\",\n            children: \"TOTAL UNIT\"\n          }), /*#__PURE__*/_jsx(\"th\", {\n            className: \"border-2 p-2\",\n            children: \"DISC\"\n          }), /*#__PURE__*/_jsx(\"th\", {\n            className: \"border-2 p-2\",\n            children: \"TOTAL HARGA\"\n          })]\n        }), items.map(function (element) {\n          index++;\n          return /*#__PURE__*/_jsxs(\"tr\", {\n            children: [/*#__PURE__*/_jsx(\"td\", {\n              className: \"border-2 p-2\",\n              children: index\n            }), /*#__PURE__*/_jsx(\"td\", {\n              className: \"border-2 p-2\",\n              children: element.attributes.products.data[0].attributes.name\n            }), /*#__PURE__*/_jsx(\"td\", {\n              className: \"border-2 p-2\",\n              children: getHargaSatuan(element.attributes.unit_order, index)\n            }), /*#__PURE__*/_jsxs(\"td\", {\n              className: \"border-2 p-2\",\n              children: [element.attributes.total_order, \" \", element.attributes.unit_order]\n            }), /*#__PURE__*/_jsx(\"td\", {\n              className: \"border-2 p-2\",\n              children: getProductDisc(element.attributes.unit_order, index)\n            }), /*#__PURE__*/_jsx(\"td\", {\n              className: \"border-2 p-2\",\n              children: getSubTotal(index)\n            })]\n          });\n        })]\n      })\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      className: \"font-bold  text-sm uppercase mt-3 flex justify-end\",\n      children: [\"TOTAL HARGA : \", getTotalProduct()]\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      className: \"font-bold  text-sm uppercase mt-4 flex justify-end\",\n      children: [\"BIAYA PENGIRIMAN : \", formatter.format(deliveryFee)]\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: \"font-bold  text-sm uppercase mt-4 flex justify-end\",\n      children: \"TAMBAHAN :\"\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: \" text-sm uppercase mt-2 flex justify-end\",\n      children: getAdditionalFee()\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      className: \"font-bold  text-sm uppercase mt-4 flex justify-end\",\n      children: [\"TOTAL PESANAN : \", formatter.format(TotalHarga)]\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: \"font-bold  text-sm uppercase mt-10 flex justify-end\",\n      children: \"HORMAT KAMI\"\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: \"font-bold  text-sm uppercase mt-10 flex justify-end\",\n      children: \"_____________________________\"\n    })]\n  });\n};\n\nPrint.getInitialProps = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(context) {\n    var cookies, id, endpoint, options, res, purchases;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            cookies = nookies.get(context);\n            id = context.query.id;\n            endpoint = process.env.NEXT_PUBLIC_URL + \"/purchases/\" + id + \"?populate=deep\";\n            options = {\n              method: \"GET\",\n              headers: {\n                \"Content-Type\": \"application/json\",\n                Authorization: \"Bearer \" + cookies.token\n              }\n            };\n            _context.next = 6;\n            return fetch(endpoint, options);\n\n          case 6:\n            res = _context.sent;\n            _context.next = 9;\n            return res.json();\n\n          case 9:\n            purchases = _context.sent;\n            return _context.abrupt(\"return\", {\n              props: {\n                purchases: purchases\n              }\n            });\n\n          case 11:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function (_x) {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\nexport default Print;","map":null,"metadata":{},"sourceType":"module"}