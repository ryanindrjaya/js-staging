{"ast":null,"code":"import _asyncToGenerator from \"/Users/yudiananta/Development/NextJS/ERP Dev/JS Deploy/JS-Deploy/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _regeneratorRuntime from \"/Users/yudiananta/Development/NextJS/ERP Dev/JS Deploy/JS-Deploy/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport nookies from \"nookies\";\nvar cookies = nookies.get(null);\nexport function getRelationalData(_x, _x2, _x3) {\n  return _getRelationalData.apply(this, arguments);\n}\n\nfunction _getRelationalData() {\n  _getRelationalData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(url, parameter, query) {\n    var endpoint, options, _res$data$, req, res;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            endpoint = process.env.NEXT_PUBLIC_URL + \"/\".concat(url, \"?filters[\").concat(parameter, \"][$eq]=\").concat(query);\n            options = {\n              method: \"GET\",\n              headers: {\n                \"Content-Type\": \"application/json\",\n                Authorization: \"Bearer \" + cookies.token\n              }\n            };\n            _context.prev = 2;\n            _context.next = 5;\n            return fetch(endpoint, options);\n\n          case 5:\n            req = _context.sent;\n            _context.next = 8;\n            return req.json();\n\n          case 8:\n            res = _context.sent;\n            return _context.abrupt(\"return\", (res === null || res === void 0 ? void 0 : (_res$data$ = res.data[0]) === null || _res$data$ === void 0 ? void 0 : _res$data$.id) || null);\n\n          case 12:\n            _context.prev = 12;\n            _context.t0 = _context[\"catch\"](2);\n            console.log(_context.t0);\n\n          case 15:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[2, 12]]);\n  }));\n  return _getRelationalData.apply(this, arguments);\n}\n\nexport function getLocationsId() {\n  return _getLocationsId.apply(this, arguments);\n}\n\nfunction _getLocationsId() {\n  _getLocationsId = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n    var locationsNamesArr,\n        endpoint,\n        options,\n        req,\n        res,\n        _args2 = arguments;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            locationsNamesArr = _args2.length > 0 && _args2[0] !== undefined ? _args2[0] : [];\n            endpoint = process.env.NEXT_PUBLIC_URL + \"/locations?\";\n            (locationsNamesArr === null || locationsNamesArr === void 0 ? void 0 : locationsNamesArr.forEach(function (locationName, index) {\n              endpoint += \"filters[name][$in][\".concat(index, \"]=\").concat(locationName);\n\n              if (index < locationsNamesArr.length - 1) {\n                endpoint += \"&\";\n              }\n            })) || [];\n            options = {\n              method: \"GET\",\n              headers: {\n                \"Content-Type\": \"application/json\",\n                Authorization: \"Bearer \" + cookies.token\n              }\n            };\n            _context2.prev = 4;\n            _context2.next = 7;\n            return fetch(endpoint, options);\n\n          case 7:\n            req = _context2.sent;\n            _context2.next = 10;\n            return req.json();\n\n          case 10:\n            res = _context2.sent;\n            return _context2.abrupt(\"return\", (res === null || res === void 0 ? void 0 : res.data.map(function (location) {\n              return location.id;\n            })) || []);\n\n          case 14:\n            _context2.prev = 14;\n            _context2.t0 = _context2[\"catch\"](4);\n            console.log(_context2.t0);\n\n          case 17:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2, null, [[4, 14]]);\n  }));\n  return _getLocationsId.apply(this, arguments);\n}","map":{"version":3,"sources":["/Users/yudiananta/Development/NextJS/ERP Dev/JS Deploy/JS-Deploy/components/Form/utils/getRelationalData.js"],"names":["nookies","cookies","get","getRelationalData","url","parameter","query","endpoint","process","env","NEXT_PUBLIC_URL","options","method","headers","Authorization","token","fetch","req","json","res","data","id","console","log","getLocationsId","locationsNamesArr","forEach","locationName","index","length","map","location"],"mappings":";;AAAA,OAAOA,OAAP,MAAoB,SAApB;AAEA,IAAMC,OAAO,GAAGD,OAAO,CAACE,GAAR,CAAY,IAAZ,CAAhB;AACA,gBAAsBC,iBAAtB;AAAA;AAAA;;;gFAAO,iBAAiCC,GAAjC,EAAsCC,SAAtC,EAAiDC,KAAjD;AAAA;;AAAA;AAAA;AAAA;AAAA;AACCC,YAAAA,QADD,GACYC,OAAO,CAACC,GAAR,CAAYC,eAAZ,cAAkCN,GAAlC,sBAAiDC,SAAjD,oBAAoEC,KAApE,CADZ;AAECK,YAAAA,OAFD,GAEW;AACdC,cAAAA,MAAM,EAAE,KADM;AAEdC,cAAAA,OAAO,EAAE;AACP,gCAAgB,kBADT;AAEPC,gBAAAA,aAAa,EAAE,YAAYb,OAAO,CAACc;AAF5B;AAFK,aAFX;AAAA;AAAA;AAAA,mBAWeC,KAAK,CAACT,QAAD,EAAWI,OAAX,CAXpB;;AAAA;AAWGM,YAAAA,GAXH;AAAA;AAAA,mBAYeA,GAAG,CAACC,IAAJ,EAZf;;AAAA;AAYGC,YAAAA,GAZH;AAAA,6CAcI,CAAAA,GAAG,SAAH,IAAAA,GAAG,WAAH,0BAAAA,GAAG,CAAEC,IAAL,CAAU,CAAV,2DAAcC,EAAd,KAAoB,IAdxB;;AAAA;AAAA;AAAA;AAgBHC,YAAAA,OAAO,CAACC,GAAR;;AAhBG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;AAoBP,gBAAsBC,cAAtB;AAAA;AAAA;;;6EAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8BC,YAAAA,iBAA9B,8DAAkD,EAAlD;AACDlB,YAAAA,QADC,GACUC,OAAO,CAACC,GAAR,CAAYC,eAAZ,GAA8B,aADxC;AAGL,aAAAe,iBAAiB,SAAjB,IAAAA,iBAAiB,WAAjB,YAAAA,iBAAiB,CAAEC,OAAnB,CAA2B,UAACC,YAAD,EAAeC,KAAf,EAAyB;AAClDrB,cAAAA,QAAQ,iCAA0BqB,KAA1B,eAAoCD,YAApC,CAAR;;AACA,kBAAIC,KAAK,GAAGH,iBAAiB,CAACI,MAAlB,GAA2B,CAAvC,EAA0C;AACxCtB,gBAAAA,QAAQ,IAAI,GAAZ;AACD;AACF,aALD,MAKM,EALN;AAOMI,YAAAA,OAVD,GAUW;AACdC,cAAAA,MAAM,EAAE,KADM;AAEdC,cAAAA,OAAO,EAAE;AACP,gCAAgB,kBADT;AAEPC,gBAAAA,aAAa,EAAE,YAAYb,OAAO,CAACc;AAF5B;AAFK,aAVX;AAAA;AAAA;AAAA,mBAmBeC,KAAK,CAACT,QAAD,EAAWI,OAAX,CAnBpB;;AAAA;AAmBGM,YAAAA,GAnBH;AAAA;AAAA,mBAoBeA,GAAG,CAACC,IAAJ,EApBf;;AAAA;AAoBGC,YAAAA,GApBH;AAAA,8CAsBI,CAAAA,GAAG,SAAH,IAAAA,GAAG,WAAH,YAAAA,GAAG,CAAEC,IAAL,CAAUU,GAAV,CAAc,UAACC,QAAD;AAAA,qBAAcA,QAAQ,CAACV,EAAvB;AAAA,aAAd,MAA4C,EAtBhD;;AAAA;AAAA;AAAA;AAwBHC,YAAAA,OAAO,CAACC,GAAR;;AAxBG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G","sourcesContent":["import nookies from \"nookies\";\n\nconst cookies = nookies.get(null);\nexport async function getRelationalData(url, parameter, query) {\n  const endpoint = process.env.NEXT_PUBLIC_URL + `/${url}?filters[${parameter}][$eq]=${query}`;\n  const options = {\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: \"Bearer \" + cookies.token,\n    },\n  };\n\n  try {\n    const req = await fetch(endpoint, options);\n    const res = await req.json();\n\n    return res?.data[0]?.id || null;\n  } catch (err) {\n    console.log(err);\n  }\n}\n\nexport async function getLocationsId(locationsNamesArr = []) {\n  let endpoint = process.env.NEXT_PUBLIC_URL + \"/locations?\";\n\n  locationsNamesArr?.forEach((locationName, index) => {\n    endpoint += `filters[name][$in][${index}]=${locationName}`;\n    if (index < locationsNamesArr.length - 1) {\n      endpoint += \"&\";\n    }\n  }) || [];\n\n  const options = {\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: \"Bearer \" + cookies.token,\n    },\n  };\n\n  try {\n    const req = await fetch(endpoint, options);\n    const res = await req.json();\n\n    return res?.data.map((location) => location.id) || [];\n  } catch (err) {\n    console.log(err);\n  }\n}\n"]},"metadata":{},"sourceType":"module"}