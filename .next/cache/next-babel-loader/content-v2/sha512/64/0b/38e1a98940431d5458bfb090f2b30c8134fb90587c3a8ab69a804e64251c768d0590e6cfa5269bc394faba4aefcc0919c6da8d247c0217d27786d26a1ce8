{"ast":null,"code":"import _Row from \"antd/lib/row\";\nimport _Select from \"antd/lib/select\";\nimport _Form from \"antd/lib/form\";\nimport _InputNumber from \"antd/lib/input-number\";\nimport DataTable from \"react-data-table-component\";\nimport AlertDialog from \"../../Alert/Alert\";\nimport { useDispatch } from \"react-redux\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function ReactDataTable({\n  calculatePriceAfterDisc,\n  productSubTotal,\n  products,\n  setTotalPrice\n}) {\n  const dispatch = useDispatch();\n  var defaultDp1 = 0;\n  var defaultDp2 = 0;\n  var defaultDp3 = 0;\n  var formatter = new Intl.NumberFormat(\"id-ID\", {\n    style: \"currency\",\n    currency: \"IDR\",\n    maximumFractionDigits: 0\n  });\n\n  const onDeleteProduct = value => {\n    dispatch({\n      type: \"REMOVE_PRODUCT\",\n      index: value\n    });\n  };\n\n  const onChangeUnit = (value, data) => {\n    dispatch({\n      type: \"CHANGE_PRODUCT_UNIT\",\n      index: value,\n      product: data\n    });\n  };\n\n  const onChangeQty = (value, data) => {\n    dispatch({\n      type: \"CHANGE_PRODUCT_QTY\",\n      qty: value,\n      product: data\n    });\n  };\n\n  const onChangeDisc = (value, data) => {\n    dispatch({\n      type: \"CHANGE_PRODUCT_DISC\",\n      disc: value,\n      product: data\n    });\n  };\n\n  const onChangeD1D2D3 = (value, data, type) => {\n    switch (type) {\n      case \"d1\":\n        dispatch({\n          type: \"CHANGE_PRODUCT_D1\",\n          d1: value,\n          product: data\n        });\n        break;\n\n      case \"d2\":\n        dispatch({\n          type: \"CHANGE_PRODUCT_D2\",\n          d2: value,\n          product: data\n        });\n        break;\n\n      case \"d3\":\n        dispatch({\n          type: \"CHANGE_PRODUCT_D3\",\n          d3: value,\n          product: data\n        });\n        break;\n\n      default:\n        break;\n    }\n  };\n\n  const onConfirm = id => {\n    const subtotal = productSubTotal[id];\n    setTotalPrice(prev => prev - subtotal);\n\n    for (let index = 0; index < products.productList.length; index++) {\n      const element = products.productList[index];\n\n      if (element.id === id) {\n        onDeleteProduct(index);\n      }\n    }\n  };\n\n  const onCancel = () => {\n    console.log(\"onCancel\");\n  };\n\n  const customStyles = {\n    headCells: {\n      style: {\n        color: \"white\",\n        background: \"#036B82\"\n      }\n    }\n  };\n  const columns = [{\n    name: \"Nama Produk\",\n    width: \"200px\",\n    selector: row => {\n      var _row$attributes;\n\n      return (_row$attributes = row.attributes) === null || _row$attributes === void 0 ? void 0 : _row$attributes.name;\n    }\n  }, {\n    name: \"Harga Satuan\",\n    width: \"150px\",\n    selector: row => {\n      var _row$attributes2;\n\n      var priceUnit = (_row$attributes2 = row.attributes) === null || _row$attributes2 === void 0 ? void 0 : _row$attributes2.buy_price_1;\n\n      if (products.productInfo[row.id]) {\n        if (products.productInfo[row.id].priceUnit) {\n          priceUnit = products.productInfo[row.id].priceUnit;\n        }\n      }\n\n      return formatter.format(priceUnit);\n    }\n  }, {\n    name: \"Jumlah Pesanan\",\n    width: \"220px\",\n    selector: row => {\n      var _row$attributes3, _products$productInfo, _products$productInfo2, _row$attributes4, _row$attributes5, _row$attributes6, _row$attributes7, _row$attributes8, _row$attributes9, _row$attributes10, _row$attributes11, _row$attributes12, _row$attributes13, _row$attributes14, _row$attributes15, _row$attributes16, _row$attributes17, _row$attributes18;\n\n      var defaultQty = 1;\n      var defaultOption = (_row$attributes3 = row.attributes) === null || _row$attributes3 === void 0 ? void 0 : _row$attributes3.unit_1;\n      var defaultIndex = 1;\n\n      if ((_products$productInfo = products.productInfo[row.id]) !== null && _products$productInfo !== void 0 && _products$productInfo.qty) {\n        defaultQty = products.productInfo[row.id].qty;\n      }\n\n      if ((_products$productInfo2 = products.productInfo[row.id]) !== null && _products$productInfo2 !== void 0 && _products$productInfo2.unitIndex) {\n        defaultIndex = products.productInfo[row.id].unitIndex;\n      }\n\n      return /*#__PURE__*/_jsx(_Fragment, {\n        children: /*#__PURE__*/_jsxs(_Row, {\n          children: [/*#__PURE__*/_jsx(_Form.Item, {\n            name: [\"jumlah_qty\", `${row.id}`] // initialValue={products.productInfo[row.id]?.qty ?? 1}\n            ,\n            noStyle: true,\n            children: /*#__PURE__*/_jsx(_InputNumber, {\n              defaultValue: defaultQty,\n              onChange: e => onChangeQty(e, row),\n              rules: [{\n                required: true,\n                message: \"Required\"\n              }],\n              style: {\n                width: \"30%\"\n              }\n            })\n          }), /*#__PURE__*/_jsx(_Form.Item, {\n            name: [\"jumlah_option\", `${row.id}`] // initialValue={defaultOption}\n            ,\n            noStyle: true,\n            children: /*#__PURE__*/_jsxs(_Select, {\n              defaultValue: defaultIndex,\n              onChange: value => onChangeUnit(value, row),\n              name: \"jumlah_option\",\n              style: {\n                width: \"50%\"\n              },\n              children: [((_row$attributes4 = row.attributes) === null || _row$attributes4 === void 0 ? void 0 : _row$attributes4.unit_1) === null ? /*#__PURE__*/_jsx(_Fragment, {}) : /*#__PURE__*/_jsx(_Select.Option, {\n                disabled: ((_row$attributes5 = row.attributes) === null || _row$attributes5 === void 0 ? void 0 : _row$attributes5.unit_1) === null,\n                value: 1,\n                children: (_row$attributes6 = row.attributes) === null || _row$attributes6 === void 0 ? void 0 : _row$attributes6.unit_1\n              }), ((_row$attributes7 = row.attributes) === null || _row$attributes7 === void 0 ? void 0 : _row$attributes7.unit_2) === null ? /*#__PURE__*/_jsx(_Fragment, {}) : /*#__PURE__*/_jsx(_Select.Option, {\n                disabled: ((_row$attributes8 = row.attributes) === null || _row$attributes8 === void 0 ? void 0 : _row$attributes8.unit_2) === null,\n                value: 2,\n                children: (_row$attributes9 = row.attributes) === null || _row$attributes9 === void 0 ? void 0 : _row$attributes9.unit_2\n              }), ((_row$attributes10 = row.attributes) === null || _row$attributes10 === void 0 ? void 0 : _row$attributes10.unit_3) === null ? /*#__PURE__*/_jsx(_Fragment, {}) : /*#__PURE__*/_jsx(_Select.Option, {\n                disabled: ((_row$attributes11 = row.attributes) === null || _row$attributes11 === void 0 ? void 0 : _row$attributes11.unit_3) === null,\n                value: 3,\n                children: (_row$attributes12 = row.attributes) === null || _row$attributes12 === void 0 ? void 0 : _row$attributes12.unit_3\n              }), ((_row$attributes13 = row.attributes) === null || _row$attributes13 === void 0 ? void 0 : _row$attributes13.unit_4) === null ? /*#__PURE__*/_jsx(_Fragment, {}) : /*#__PURE__*/_jsx(_Select.Option, {\n                disabled: ((_row$attributes14 = row.attributes) === null || _row$attributes14 === void 0 ? void 0 : _row$attributes14.unit_4) === null,\n                value: 4,\n                children: (_row$attributes15 = row.attributes) === null || _row$attributes15 === void 0 ? void 0 : _row$attributes15.unit_4\n              }), ((_row$attributes16 = row.attributes) === null || _row$attributes16 === void 0 ? void 0 : _row$attributes16.unit_5) === null ? /*#__PURE__*/_jsx(_Fragment, {}) : /*#__PURE__*/_jsx(_Select.Option, {\n                disabled: ((_row$attributes17 = row.attributes) === null || _row$attributes17 === void 0 ? void 0 : _row$attributes17.unit_5) === null,\n                value: 5,\n                children: (_row$attributes18 = row.attributes) === null || _row$attributes18 === void 0 ? void 0 : _row$attributes18.unit_5\n              })]\n            })\n          })]\n        })\n      });\n    }\n  }, {\n    name: \"Diskon\",\n    width: \"150px\",\n    selector: row => {\n      var _products$productInfo3;\n\n      var defaultDisc = 0;\n\n      if ((_products$productInfo3 = products.productInfo[row.id]) !== null && _products$productInfo3 !== void 0 && _products$productInfo3.disc) {\n        defaultDisc = products.productInfo[row.id].disc;\n      }\n\n      return /*#__PURE__*/_jsx(_Row, {\n        align: \"bottom\",\n        justify: \"center\",\n        children: /*#__PURE__*/_jsx(_Form.Item, {\n          name: [\"disc_rp\", `${row.id}`],\n          noStyle: true,\n          children: /*#__PURE__*/_jsx(_InputNumber, {\n            controls: false,\n            defaultValue: defaultDisc,\n            min: 0,\n            onChange: e => onChangeDisc(e, row),\n            style: {\n              width: \"100px\",\n              marginRight: \"10px\"\n            }\n          })\n        })\n      });\n    }\n  }, {\n    name: \"D1\",\n    width: \"100px\",\n    selector: row => {\n      var _row$attributes19, _products$productInfo4;\n\n      defaultDp1 = ((_row$attributes19 = row.attributes) === null || _row$attributes19 === void 0 ? void 0 : _row$attributes19.unit_1_dp1) || 0;\n\n      if ((_products$productInfo4 = products.productInfo[row.id]) !== null && _products$productInfo4 !== void 0 && _products$productInfo4.d1) {\n        defaultDp1 = products.productInfo[row.id].d1;\n      }\n\n      if (products.productInfo[row.id]) {\n        if (products.productInfo[row.id].unit) {\n          defaultDp1 = products.productInfo[row.id].d1;\n        }\n      }\n\n      return /*#__PURE__*/_jsx(\"div\", {\n        className: \"disabled:bg-white\",\n        children: /*#__PURE__*/_jsx(_InputNumber, {\n          controls: false,\n          formatter: value => `${value}%`,\n          max: 100,\n          min: 0,\n          value: defaultDp1,\n          name: `disc_rp1_${row.id}`,\n          onChange: e => onChangeD1D2D3(e, row, \"d1\"),\n          style: {\n            width: \"60px\"\n          }\n        })\n      });\n    }\n  }, {\n    name: \"D2\",\n    width: \"100px\",\n    selector: row => {\n      var _row$attributes20, _products$productInfo5;\n\n      defaultDp2 = ((_row$attributes20 = row.attributes) === null || _row$attributes20 === void 0 ? void 0 : _row$attributes20.unit_1_dp2) || 0;\n\n      if ((_products$productInfo5 = products.productInfo[row.id]) !== null && _products$productInfo5 !== void 0 && _products$productInfo5.d2) {\n        defaultDp2 = products.productInfo[row.id].d2;\n      }\n\n      if (products.productInfo[row.id]) {\n        if (products.productInfo[row.id].unit) {\n          defaultDp2 = products.productInfo[row.id].d2;\n        }\n      }\n\n      return /*#__PURE__*/_jsx(\"div\", {\n        className: \"disabled:bg-white\",\n        children: /*#__PURE__*/_jsx(_InputNumber, {\n          controls: false,\n          formatter: value => `${value}%`,\n          max: 100,\n          min: 0,\n          name: [\"disc_rp2\", `${row.id}`],\n          value: defaultDp2,\n          onChange: e => onChangeD1D2D3(e, row, \"d2\"),\n          style: {\n            width: \"60px\"\n          }\n        })\n      });\n    }\n  }, {\n    name: \"D3\",\n    width: \"100px\",\n    selector: row => {\n      var _row$attributes21, _products$productInfo6;\n\n      defaultDp3 = ((_row$attributes21 = row.attributes) === null || _row$attributes21 === void 0 ? void 0 : _row$attributes21.unit_1_dp3) || 0;\n\n      if ((_products$productInfo6 = products.productInfo[row.id]) !== null && _products$productInfo6 !== void 0 && _products$productInfo6.d3) {\n        defaultDp3 = products.productInfo[row.id].d3;\n      }\n\n      if (products.productInfo[row.id]) {\n        if (products.productInfo[row.id].unit) {\n          defaultDp3 = products.productInfo[row.id].d3;\n        }\n      }\n\n      return /*#__PURE__*/_jsx(\"div\", {\n        className: \"disabled:bg-white\",\n        children: /*#__PURE__*/_jsx(_InputNumber, {\n          controls: false,\n          formatter: value => `${value}%`,\n          max: 100,\n          min: 0,\n          name: [\"disc_rp3\", `${row.id}`],\n          value: defaultDp3,\n          onChange: e => onChangeD1D2D3(e, row, \"d3\"),\n          style: {\n            width: \"60px\"\n          }\n        })\n      });\n    }\n  }, {\n    name: \"Harga Satuan Setelah Diskon\",\n    width: \"200px\",\n    selector: row => calculatePriceAfterDisc(row)\n  }, {\n    name: \"Subtotal\",\n    width: \"200px\",\n    selector: row => formatter.format(productSubTotal[row.id])\n  }, {\n    name: \"Hapus\",\n    width: \"150px\",\n    selector: row => /*#__PURE__*/_jsx(AlertDialog, {\n      onCancel: onCancel,\n      onConfirm: onConfirm,\n      title: \"Hapus Produk\",\n      message: \"Produk akan dihapus dari daftar ini. Lanjutkan?\",\n      id: row.id\n    })\n  }];\n  return /*#__PURE__*/_jsx(DataTable, {\n    customStyles: customStyles,\n    paginationRowsPerPageOptions: [50],\n    columns: columns,\n    data: products.productList,\n    noDataComponent: `--Belum ada produk--`\n  });\n}","map":null,"metadata":{},"sourceType":"module"}