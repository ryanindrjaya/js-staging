{"ast":null,"code":"import _Button from \"antd/lib/button\";\nimport _Spin from \"antd/lib/spin\";\nimport _FileImageOutlined from \"@ant-design/icons/lib/icons/FileImageOutlined\";\nimport _message from \"antd/lib/message\";\nimport _Input from \"antd/lib/input\";\nimport _Upload from \"antd/lib/upload\";\nimport _Form from \"antd/lib/form\";\nvar _jsxFileName = \"/Users/yudiananta/Development/NextJS/ERP Dev/JS Deploy/ERP-Sejati/pages/dashboard/produk/tambah.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { useRef, useState } from \"react\";\nimport Head from \"next/head\";\nimport LayoutContent from \"@iso/components/utility/layoutContent\";\nimport LayoutWrapper from \"@iso/components/utility/layoutWrapper.js\";\nimport nookies from \"nookies\";\nimport { toast } from \"react-toastify\";\nimport DashboardLayout from \"../../../containers/DashboardLayout/DashboardLayout\";\nimport TitlePage from \"../../../components/TitlePage/TitlePage\";\nimport Categories from \"../../../components/Form/AddProduct/Categories\";\nimport Manufactures from \"../../../components/Form/AddProduct/Manufactures\";\nimport SubCategories from \"../../../components/Form/AddProduct/subCategories\";\nimport Groups from \"../../../components/Form/AddProduct/Groups\";\nimport Locations from \"../../../components/Form/AddProduct/Locations\";\nimport { useRouter } from \"next/router\";\nimport Image from \"next/image\";\nimport UnitTable from \"../../../components/ReactDataTable/Product/UnitsTable\";\nimport setDiskonValue from \"./utility/setDiskonValue\";\nimport setHargaValue from \"./utility/setHargaValue\";\nimport ConfirmDialog from \"../../../components/Alert/ConfirmDialog\";\nimport debounce from \"./utility/debounce\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Tambah = ({\n  props\n}) => {\n  const {\n    0: image,\n    1: setImage\n  } = useState();\n  const {\n    0: category,\n    1: setCategory\n  } = useState();\n  const {\n    0: uploadedOnce,\n    1: setUploadedOnce\n  } = useState(true);\n  const {\n    0: fileList,\n    1: setFileList\n  } = useState([]);\n  const {\n    0: statusSKU,\n    1: setStatusSKU\n  } = useState({\n    status: \"\",\n    message: \"\"\n  });\n\n  const [form] = _Form.useForm();\n\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(false);\n  const {\n    0: firstInput,\n    1: setFirstInputDiskon\n  } = useState(true);\n  const cookies = nookies.get(null, \"token\");\n  const router = useRouter();\n  const submitBtn = useRef();\n  const {\n    Dragger\n  } = _Upload;\n  const {\n    TextArea\n  } = _Input;\n  const manufactures = props.manufactures;\n  const groups = props.groups;\n  const locations = props.locations;\n  const {\n    0: selectedManufactures,\n    1: setSelectedManufactures\n  } = useState({});\n  const {\n    0: selectedGroups,\n    1: setSelectedGroup\n  } = useState({});\n  const {\n    0: selectLocations,\n    1: setSelectLocation\n  } = useState({});\n  const {\n    0: subCategories,\n    1: setSubCategories\n  } = useState([]);\n  const {\n    0: selectedSubCategory,\n    1: setSelectedSubCategory\n  } = useState();\n\n  const imageLoader = ({\n    src\n  }) => {\n    return process.env.NEXT_PUBLIC_URL + (image === null || image === void 0 ? void 0 : image.url);\n  };\n\n  const propsDagger = {\n    name: \"files\",\n    multiple: false,\n    fileList: fileList,\n    showUploadList: {\n      showDownloadIcon: false,\n      showRemoveIcon: true\n    },\n\n    onRemove(info) {\n      setUploadedOnce(true);\n      setImage();\n      setFileList([]);\n    },\n\n    async onChange(info) {\n      if (info.fileList.length === 1) {\n        const endpoint = process.env.NEXT_PUBLIC_URL + \"/upload\";\n        const file = info.file.originFileObj;\n        const data = new FormData();\n        data.append(\"files\", file);\n        setFileList(info.fileList);\n        const options = {\n          method: \"POST\",\n          headers: {\n            Authorization: \"Bearer \" + cookies.token\n          },\n          body: data\n        };\n\n        if (uploadedOnce) {\n          setUploadedOnce(false);\n          const req = await fetch(endpoint, options);\n          const res = await req.json();\n\n          if (req.status === 200) {\n            setImage(res[0]);\n\n            _message.success(`${info.file.name} berhasil diupload`);\n          } else {\n            _message.error(`${info.file.name} gagal upload`);\n          }\n        }\n      } else if (info.fileList.length === 0) {\n        _message.info(`Gambar berhasil dihapus`);\n      } else {\n        _message.error(`Hanya dapat menambahkan 1 gambar`);\n      }\n    }\n\n  };\n\n  const onFinish = async values => {\n    var _postRes$data;\n\n    setLoading(true); // if (selectedSubCategory === 0) {\n    //   message.error(\n    //     `Sub Kategori tidak ditemukan pada Induk Kategori. Silahkan cek kembali`\n    //   );\n    // }\n\n    const categoryID = {\n      id: parseInt(values === null || values === void 0 ? void 0 : values.category_id)\n    };\n    const subCategoryID = {\n      id: values === null || values === void 0 ? void 0 : values.subCategories\n    };\n    const manufacturesID = {\n      id: values === null || values === void 0 ? void 0 : values.manufactures\n    };\n    const groupID = {\n      id: values === null || values === void 0 ? void 0 : values.groups\n    };\n    const locationsID = values.locations.map(locationId => locationId);\n    delete values.locations;\n    delete values.category_id;\n    delete values.subCategories;\n    delete values.manufactures;\n    delete values.groups;\n\n    const postData = _objectSpread(_objectSpread({}, values), {}, {\n      locations: locationsID\n    });\n\n    const putData = {\n      category: categoryID,\n      sub_category: subCategoryID,\n      manufacture: manufacturesID,\n      group: groupID,\n      locations: locationsID,\n      image: {\n        id: image === null || image === void 0 ? void 0 : image.id\n      }\n    };\n    console.log(\"put data\", putData); // POST DATA\n\n    const postRes = await handlePostData(postData);\n    console.log(postRes); // PUT DATA\n\n    await handlePutData(postRes === null || postRes === void 0 ? void 0 : (_postRes$data = postRes.data) === null || _postRes$data === void 0 ? void 0 : _postRes$data.id, putData);\n    setLoading(false);\n  };\n\n  const handlePostData = async data => {\n    const endpoint = process.env.NEXT_PUBLIC_URL + \"/products\";\n    const dataPost = {\n      data: data\n    };\n    const JSONdata = JSON.stringify(dataPost);\n    const options = {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + cookies.token\n      },\n      body: JSONdata\n    };\n    const req = await fetch(endpoint, options);\n    const res = await req.json();\n    return res;\n  };\n\n  const handlePutData = async (id, data) => {\n    const endpoint = process.env.NEXT_PUBLIC_URL + \"/products/\" + id;\n\n    for (const key in data) {\n      if (data[key].id === undefined || data[key].id === NaN) {\n        delete data[key];\n      }\n    }\n\n    console.log(endpoint);\n    const dataPut = {\n      data: data\n    };\n    const JSONdata = JSON.stringify(dataPut);\n    const options = {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + cookies.token\n      },\n      body: JSONdata\n    };\n\n    try {\n      const req = await fetch(endpoint, options);\n      const res = await req.json();\n\n      if (req.status === 200) {\n        setImage();\n        form.resetFields();\n        toast.success(\"Produk berhasil ditambahkan!\", {\n          position: toast.POSITION.TOP_RIGHT\n        });\n        router.reload();\n      } else {\n        var _res$error, _res$error$details;\n\n        res === null || res === void 0 ? void 0 : (_res$error = res.error) === null || _res$error === void 0 ? void 0 : (_res$error$details = _res$error.details) === null || _res$error$details === void 0 ? void 0 : _res$error$details.errors.map(error => {\n          const ErrorMsg = error.path[0];\n          toast.error(ErrorMsg === \"SKU\" ? \"SKU sudah digunakan\" : \"Tidak dapat menambahkan Produk\", {\n            position: toast.POSITION.TOP_RIGHT\n          });\n        });\n      }\n    } catch (error) {\n      toast.error(\"Tidak dapat menambahkan Produk\", {\n        position: toast.POSITION.TOP_RIGHT\n      });\n    }\n  };\n\n  const checkSKU = async value => {\n    setStatusSKU({\n      status: \"validating\",\n      message: \"\"\n    });\n    const endpoint = process.env.NEXT_PUBLIC_URL + \"/products?filters[SKU][$eq]=\" + value;\n    const options = {\n      method: \"GET\",\n      headers: {\n        Authorization: \"Bearer \" + cookies.token\n      }\n    };\n    const req = await fetch(endpoint, options);\n    const res = await req.json();\n\n    if (req.status === 200) {\n      if (res.data.length > 0) {\n        setStatusSKU({\n          status: \"error\",\n          message: \"SKU sudah digunakan\"\n        });\n      } else {\n        setStatusSKU({\n          status: \"success\",\n          message: \"\"\n        });\n      }\n    } else {\n      setStatusSKU({\n        status: \"error\",\n        message: \"Error ketika mengambil data SKU\"\n      });\n    }\n  };\n\n  const handleValueChange = async (changedValues, allValues) => {\n    const fieldName = Object.keys(changedValues)[0];\n    const unitArr = fieldName.split(\"_\");\n    const unit = unitArr[unitArr.length - 1]; // check SKU\n\n    if (fieldName === \"SKU\" && allValues.SKU !== \"\") {\n      debounce(checkSKU, 1000)(allValues.SKU);\n    } else if (fieldName === \"SKU\" && allValues.SKU === \"\") {\n      setStatusSKU({\n        status: \"error\",\n        message: \"SKU tidak boleh kosong\"\n      });\n    }\n\n    setDiskonValue(form, changedValues, allValues, fieldName, firstInput);\n    setHargaValue(form, changedValues, allValues, unit, firstInput);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Head, {\n      children: /*#__PURE__*/_jsxDEV(\"title\", {\n        children: \"Tambahkan Produk\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(DashboardLayout, {\n      children: /*#__PURE__*/_jsxDEV(LayoutWrapper, {\n        style: {},\n        children: [/*#__PURE__*/_jsxDEV(TitlePage, {\n          titleText: \"Tambahkan Produk\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(LayoutContent, {\n          children: /*#__PURE__*/_jsxDEV(_Form, {\n            form: form,\n            name: \"add_product\",\n            initialValues: {\n              remember: true\n            },\n            onFinish: onFinish,\n            onValuesChange: handleValueChange,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex flex-wrap -mx-3 mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-full md:w-1/3 px-3 mb-2 md:mb-0\",\n                children: [/*#__PURE__*/_jsxDEV(_Form.Item, {\n                  name: \"name\",\n                  rules: [{\n                    required: true,\n                    message: \"Nama Produk tidak boleh kosong!\"\n                  }],\n                  children: /*#__PURE__*/_jsxDEV(_Input, {\n                    style: {\n                      height: \"40px\"\n                    },\n                    placeholder: \"Nama Produk\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 317,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 308,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Categories, {\n                  selectedCategory: category,\n                  onSelectCategory: setCategory,\n                  setSubCategories: setSubCategories,\n                  setSelectedSubCategory: setSelectedSubCategory,\n                  selectedSubCategory: selectedSubCategory\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 322,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(SubCategories, {\n                  subCategories: subCategories,\n                  onSelect: setSelectedSubCategory,\n                  selectedSubCategory: selectedSubCategory\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 329,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(_Form.Item, {\n                  name: \"description\",\n                  children: /*#__PURE__*/_jsxDEV(TextArea, {\n                    rows: 4,\n                    placeholder: \"Deskripsi\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 335,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 334,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 307,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-full md:w-1/3 px-3 mb-2 md:mb-0\",\n                children: [/*#__PURE__*/_jsxDEV(_Form.Item, {\n                  name: \"SKU\",\n                  hasFeedback: true,\n                  validateStatus: statusSKU.status,\n                  help: statusSKU.message,\n                  rules: [{\n                    required: true,\n                    message: \"SKU tidak boleh kosong!\"\n                  }],\n                  children: /*#__PURE__*/_jsxDEV(_Input, {\n                    style: {\n                      height: \"40px\"\n                    },\n                    placeholder: \"SKU\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 351,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 339,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Manufactures, {\n                  data: manufactures.data,\n                  selectedManufactures: selectedManufactures,\n                  onSelect: setSelectedManufactures\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 353,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Groups, {\n                  data: groups,\n                  selectedGroups: selectedGroups,\n                  onSelect: setSelectedGroup\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 358,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Locations, {\n                  data: locations,\n                  onSelect: setSelectLocation\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 363,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 338,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-full md:w-1/3 px-3 mb-2 md:mb-0\",\n                children: /*#__PURE__*/_jsxDEV(Dragger, _objectSpread(_objectSpread({}, propsDagger), {}, {\n                  children: image == null ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"ant-upload-drag-icon\",\n                      children: /*#__PURE__*/_jsxDEV(_FileImageOutlined, {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 371,\n                        columnNumber: 27\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 370,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"ant-upload-text\",\n                      children: \"Klik atau tarik gambar ke kotak ini\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 373,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"ant-upload-hint  m-3\",\n                      children: \"Gambar akan digunakan sebagai contoh tampilan produk\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 376,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true) : /*#__PURE__*/_jsxDEV(Image, {\n                    layout: \"fill\",\n                    loader: imageLoader,\n                    src: process.env.NEXT_PUBLIC_URL + (image === null || image === void 0 ? void 0 : image.url)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 381,\n                    columnNumber: 23\n                  }, this)\n                }), void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 367,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 366,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 306,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(\"h6\", {\n                className: \"\",\n                children: \"HARGA\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 392,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 391,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(UnitTable, {\n              form: form\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 394,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(_Form.Item, {\n              className: \"mt-5\",\n              children: loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \" flex float-left ml-3 \",\n                children: /*#__PURE__*/_jsxDEV(_Spin, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 399,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 398,\n                columnNumber: 19\n              }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(ConfirmDialog, {\n                  onConfirm: () => {\n                    var _submitBtn$current;\n\n                    return submitBtn === null || submitBtn === void 0 ? void 0 : (_submitBtn$current = submitBtn.current) === null || _submitBtn$current === void 0 ? void 0 : _submitBtn$current.click();\n                  },\n                  onCancel: () => {},\n                  title: \"Tambah Produk\",\n                  message: \"Apakah anda yakin ingin menambahkan produk ini?\",\n                  component: /*#__PURE__*/_jsxDEV(_Button, {\n                    className: \" hover:text-white hover:bg-cyan-700 border border-cyan-700 ml-1\",\n                    children: \"Simpan\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 409,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 403,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(_Button, {\n                  htmlType: \"submit\",\n                  ref: submitBtn\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 414,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 396,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 297,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\nTambah.getInitialProps = async context => {\n  const cookies = nookies.get(context);\n  const reqCategories = await fetchDataCategories(cookies);\n  const categories = await reqCategories.json();\n  const reqGroups = await fetchDataGroups(cookies);\n  const groups = await reqGroups.json();\n  const reqLocations = await fetchDataLocations(cookies);\n  const locations = await reqLocations.json();\n  const reqManufactures = await fetchDataManufactures(cookies);\n  const manufactures = await reqManufactures.json();\n  const reqSubCategories = await fetchDataSubCategories(cookies);\n  const subCategories = await reqSubCategories.json();\n  return {\n    props: {\n      categories,\n      groups,\n      locations,\n      manufactures,\n      subCategories\n    }\n  };\n};\n\nconst fetchDataCategories = async cookies => {\n  const endpoint = process.env.NEXT_PUBLIC_URL + \"/categories\";\n  const options = {\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: \"Bearer \" + cookies.token\n    }\n  };\n  const req = await fetch(endpoint, options);\n  return req;\n};\n\nconst fetchDataManufactures = async cookies => {\n  const endpoint = process.env.NEXT_PUBLIC_URL + \"/manufactures\";\n  const options = {\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: \"Bearer \" + cookies.token\n    }\n  };\n  const req = await fetch(endpoint, options);\n  return req;\n};\n\nconst fetchDataSubCategories = async cookies => {\n  const endpoint = process.env.NEXT_PUBLIC_URL + \"/sub-categories\";\n  const options = {\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: \"Bearer \" + cookies.token\n    }\n  };\n  const req = await fetch(endpoint, options);\n  return req;\n};\n\nconst fetchDataGroups = async cookies => {\n  const endpoint = process.env.NEXT_PUBLIC_URL + \"/groups\";\n  const options = {\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: \"Bearer \" + cookies.token\n    }\n  };\n  const req = await fetch(endpoint, options);\n  return req;\n};\n\nconst fetchDataLocations = async cookies => {\n  const endpoint = process.env.NEXT_PUBLIC_URL + \"/locations\";\n  const options = {\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: \"Bearer \" + cookies.token\n    }\n  };\n  const req = await fetch(endpoint, options);\n  return req;\n};\n\nexport default Tambah;","map":{"version":3,"sources":["/Users/yudiananta/Development/NextJS/ERP Dev/JS Deploy/ERP-Sejati/pages/dashboard/produk/tambah.js"],"names":["useRef","useState","Head","LayoutContent","LayoutWrapper","nookies","toast","DashboardLayout","TitlePage","Categories","Manufactures","SubCategories","Groups","Locations","useRouter","Image","UnitTable","setDiskonValue","setHargaValue","ConfirmDialog","debounce","Tambah","props","image","setImage","category","setCategory","uploadedOnce","setUploadedOnce","fileList","setFileList","statusSKU","setStatusSKU","status","message","form","useForm","loading","setLoading","firstInput","setFirstInputDiskon","cookies","get","router","submitBtn","Dragger","TextArea","manufactures","groups","locations","selectedManufactures","setSelectedManufactures","selectedGroups","setSelectedGroup","selectLocations","setSelectLocation","subCategories","setSubCategories","selectedSubCategory","setSelectedSubCategory","imageLoader","src","process","env","NEXT_PUBLIC_URL","url","propsDagger","name","multiple","showUploadList","showDownloadIcon","showRemoveIcon","onRemove","info","onChange","length","endpoint","file","originFileObj","data","FormData","append","options","method","headers","Authorization","token","body","req","fetch","res","json","success","error","onFinish","values","categoryID","id","parseInt","category_id","subCategoryID","manufacturesID","groupID","locationsID","map","locationId","postData","putData","sub_category","manufacture","group","console","log","postRes","handlePostData","handlePutData","dataPost","JSONdata","JSON","stringify","key","undefined","NaN","dataPut","resetFields","position","POSITION","TOP_RIGHT","reload","details","errors","ErrorMsg","path","checkSKU","value","handleValueChange","changedValues","allValues","fieldName","Object","keys","unitArr","split","unit","SKU","remember","required","height","current","click","getInitialProps","context","reqCategories","fetchDataCategories","categories","reqGroups","fetchDataGroups","reqLocations","fetchDataLocations","reqManufactures","fetchDataManufactures","reqSubCategories","fetchDataSubCategories"],"mappings":";;;;;;;;;;;;;;;AAAA,SAASA,MAAT,EAAiBC,QAAjB,QAAiC,OAAjC;AACA,OAAOC,IAAP,MAAiB,WAAjB;AACA,OAAOC,aAAP,MAA0B,uCAA1B;AACA,OAAOC,aAAP,MAA0B,0CAA1B;AAEA,OAAOC,OAAP,MAAoB,SAApB;AACA,SAASC,KAAT,QAAsB,gBAAtB;AAEA,OAAOC,eAAP,MAA4B,qDAA5B;AACA,OAAOC,SAAP,MAAsB,yCAAtB;AACA,OAAOC,UAAP,MAAuB,gDAAvB;AACA,OAAOC,YAAP,MAAyB,kDAAzB;AACA,OAAOC,aAAP,MAA0B,mDAA1B;AACA,OAAOC,MAAP,MAAmB,4CAAnB;AACA,OAAOC,SAAP,MAAsB,+CAAtB;AACA,SAASC,SAAT,QAA0B,aAA1B;AACA,OAAOC,KAAP,MAAkB,YAAlB;AACA,OAAOC,SAAP,MAAsB,uDAAtB;AAEA,OAAOC,cAAP,MAA2B,0BAA3B;AACA,OAAOC,aAAP,MAA0B,yBAA1B;AACA,OAAOC,aAAP,MAA0B,yCAA1B;AACA,OAAOC,QAAP,MAAqB,oBAArB;;;;AAEA,MAAMC,MAAM,GAAG,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAAe;AAC5B,QAAM;AAAA,OAACC,KAAD;AAAA,OAAQC;AAAR,MAAoBvB,QAAQ,EAAlC;AACA,QAAM;AAAA,OAACwB,QAAD;AAAA,OAAWC;AAAX,MAA0BzB,QAAQ,EAAxC;AACA,QAAM;AAAA,OAAC0B,YAAD;AAAA,OAAeC;AAAf,MAAkC3B,QAAQ,CAAC,IAAD,CAAhD;AACA,QAAM;AAAA,OAAC4B,QAAD;AAAA,OAAWC;AAAX,MAA0B7B,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAM;AAAA,OAAC8B,SAAD;AAAA,OAAYC;AAAZ,MAA4B/B,QAAQ,CAAC;AACzCgC,IAAAA,MAAM,EAAE,EADiC;AAEzCC,IAAAA,OAAO,EAAE;AAFgC,GAAD,CAA1C;;AAIA,QAAM,CAACC,IAAD,IAAS,MAAKC,OAAL,EAAf;;AACA,QAAM;AAAA,OAACC,OAAD;AAAA,OAAUC;AAAV,MAAwBrC,QAAQ,CAAC,KAAD,CAAtC;AACA,QAAM;AAAA,OAACsC,UAAD;AAAA,OAAaC;AAAb,MAAoCvC,QAAQ,CAAC,IAAD,CAAlD;AACA,QAAMwC,OAAO,GAAGpC,OAAO,CAACqC,GAAR,CAAY,IAAZ,EAAkB,OAAlB,CAAhB;AACA,QAAMC,MAAM,GAAG7B,SAAS,EAAxB;AACA,QAAM8B,SAAS,GAAG5C,MAAM,EAAxB;AAEA,QAAM;AAAE6C,IAAAA;AAAF,aAAN;AACA,QAAM;AAAEC,IAAAA;AAAF,YAAN;AAEA,QAAMC,YAAY,GAAGzB,KAAK,CAACyB,YAA3B;AACA,QAAMC,MAAM,GAAG1B,KAAK,CAAC0B,MAArB;AACA,QAAMC,SAAS,GAAG3B,KAAK,CAAC2B,SAAxB;AAEA,QAAM;AAAA,OAACC,oBAAD;AAAA,OAAuBC;AAAvB,MAAkDlD,QAAQ,CAAC,EAAD,CAAhE;AACA,QAAM;AAAA,OAACmD,cAAD;AAAA,OAAiBC;AAAjB,MAAqCpD,QAAQ,CAAC,EAAD,CAAnD;AACA,QAAM;AAAA,OAACqD,eAAD;AAAA,OAAkBC;AAAlB,MAAuCtD,QAAQ,CAAC,EAAD,CAArD;AAEA,QAAM;AAAA,OAACuD,aAAD;AAAA,OAAgBC;AAAhB,MAAoCxD,QAAQ,CAAC,EAAD,CAAlD;AACA,QAAM;AAAA,OAACyD,mBAAD;AAAA,OAAsBC;AAAtB,MAAgD1D,QAAQ,EAA9D;;AAEA,QAAM2D,WAAW,GAAG,CAAC;AAAEC,IAAAA;AAAF,GAAD,KAAa;AAC/B,WAAOC,OAAO,CAACC,GAAR,CAAYC,eAAZ,IAA8BzC,KAA9B,aAA8BA,KAA9B,uBAA8BA,KAAK,CAAE0C,GAArC,CAAP;AACD,GAFD;;AAIA,QAAMC,WAAW,GAAG;AAClBC,IAAAA,IAAI,EAAE,OADY;AAElBC,IAAAA,QAAQ,EAAE,KAFQ;AAGlBvC,IAAAA,QAAQ,EAAEA,QAHQ;AAIlBwC,IAAAA,cAAc,EAAE;AACdC,MAAAA,gBAAgB,EAAE,KADJ;AAEdC,MAAAA,cAAc,EAAE;AAFF,KAJE;;AASlBC,IAAAA,QAAQ,CAACC,IAAD,EAAO;AACb7C,MAAAA,eAAe,CAAC,IAAD,CAAf;AACAJ,MAAAA,QAAQ;AACRM,MAAAA,WAAW,CAAC,EAAD,CAAX;AACD,KAbiB;;AAelB,UAAM4C,QAAN,CAAeD,IAAf,EAAqB;AACnB,UAAIA,IAAI,CAAC5C,QAAL,CAAc8C,MAAd,KAAyB,CAA7B,EAAgC;AAC9B,cAAMC,QAAQ,GAAGd,OAAO,CAACC,GAAR,CAAYC,eAAZ,GAA8B,SAA/C;AACA,cAAMa,IAAI,GAAGJ,IAAI,CAACI,IAAL,CAAUC,aAAvB;AACA,cAAMC,IAAI,GAAG,IAAIC,QAAJ,EAAb;AACAD,QAAAA,IAAI,CAACE,MAAL,CAAY,OAAZ,EAAqBJ,IAArB;AAEA/C,QAAAA,WAAW,CAAC2C,IAAI,CAAC5C,QAAN,CAAX;AAEA,cAAMqD,OAAO,GAAG;AACdC,UAAAA,MAAM,EAAE,MADM;AAEdC,UAAAA,OAAO,EAAE;AACPC,YAAAA,aAAa,EAAE,YAAY5C,OAAO,CAAC6C;AAD5B,WAFK;AAKdC,UAAAA,IAAI,EAAER;AALQ,SAAhB;;AAQA,YAAIpD,YAAJ,EAAkB;AAChBC,UAAAA,eAAe,CAAC,KAAD,CAAf;AACA,gBAAM4D,GAAG,GAAG,MAAMC,KAAK,CAACb,QAAD,EAAWM,OAAX,CAAvB;AACA,gBAAMQ,GAAG,GAAG,MAAMF,GAAG,CAACG,IAAJ,EAAlB;;AAEA,cAAIH,GAAG,CAACvD,MAAJ,KAAe,GAAnB,EAAwB;AACtBT,YAAAA,QAAQ,CAACkE,GAAG,CAAC,CAAD,CAAJ,CAAR;;AAEA,qBAAQE,OAAR,CAAiB,GAAEnB,IAAI,CAACI,IAAL,CAAUV,IAAK,oBAAlC;AACD,WAJD,MAIO;AACL,qBAAQ0B,KAAR,CAAe,GAAEpB,IAAI,CAACI,IAAL,CAAUV,IAAK,eAAhC;AACD;AACF;AACF,OA7BD,MA6BO,IAAIM,IAAI,CAAC5C,QAAL,CAAc8C,MAAd,KAAyB,CAA7B,EAAgC;AACrC,iBAAQF,IAAR,CAAc,yBAAd;AACD,OAFM,MAEA;AACL,iBAAQoB,KAAR,CAAe,kCAAf;AACD;AACF;;AAlDiB,GAApB;;AAqDA,QAAMC,QAAQ,GAAG,MAAOC,MAAP,IAAkB;AAAA;;AACjCzD,IAAAA,UAAU,CAAC,IAAD,CAAV,CADiC,CAGjC;AACA;AACA;AACA;AACA;;AAEA,UAAM0D,UAAU,GAAG;AACjBC,MAAAA,EAAE,EAAEC,QAAQ,CAACH,MAAD,aAACA,MAAD,uBAACA,MAAM,CAAEI,WAAT;AADK,KAAnB;AAIA,UAAMC,aAAa,GAAG;AACpBH,MAAAA,EAAE,EAAEF,MAAF,aAAEA,MAAF,uBAAEA,MAAM,CAAEvC;AADQ,KAAtB;AAIA,UAAM6C,cAAc,GAAG;AACrBJ,MAAAA,EAAE,EAAEF,MAAF,aAAEA,MAAF,uBAAEA,MAAM,CAAEhD;AADS,KAAvB;AAIA,UAAMuD,OAAO,GAAG;AACdL,MAAAA,EAAE,EAAEF,MAAF,aAAEA,MAAF,uBAAEA,MAAM,CAAE/C;AADE,KAAhB;AAIA,UAAMuD,WAAW,GAAGR,MAAM,CAAC9C,SAAP,CAAiBuD,GAAjB,CAAsBC,UAAD,IAAgBA,UAArC,CAApB;AAEA,WAAOV,MAAM,CAAC9C,SAAd;AACA,WAAO8C,MAAM,CAACI,WAAd;AACA,WAAOJ,MAAM,CAACvC,aAAd;AACA,WAAOuC,MAAM,CAAChD,YAAd;AACA,WAAOgD,MAAM,CAAC/C,MAAd;;AAEA,UAAM0D,QAAQ,mCACTX,MADS;AAEZ9C,MAAAA,SAAS,EAAEsD;AAFC,MAAd;;AAKA,UAAMI,OAAO,GAAG;AACdlF,MAAAA,QAAQ,EAAEuE,UADI;AAEdY,MAAAA,YAAY,EAAER,aAFA;AAGdS,MAAAA,WAAW,EAAER,cAHC;AAIdS,MAAAA,KAAK,EAAER,OAJO;AAKdrD,MAAAA,SAAS,EAAEsD,WALG;AAMdhF,MAAAA,KAAK,EAAE;AAAE0E,QAAAA,EAAE,EAAE1E,KAAF,aAAEA,KAAF,uBAAEA,KAAK,CAAE0E;AAAb;AANO,KAAhB;AASAc,IAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBL,OAAxB,EA/CiC,CAiDjC;;AACA,UAAMM,OAAO,GAAG,MAAMC,cAAc,CAACR,QAAD,CAApC;AACAK,IAAAA,OAAO,CAACC,GAAR,CAAYC,OAAZ,EAnDiC,CAoDjC;;AACA,UAAME,aAAa,CAACF,OAAD,aAACA,OAAD,wCAACA,OAAO,CAAElC,IAAV,kDAAC,cAAekB,EAAhB,EAAoBU,OAApB,CAAnB;AAEArE,IAAAA,UAAU,CAAC,KAAD,CAAV;AACD,GAxDD;;AA0DA,QAAM4E,cAAc,GAAG,MAAOnC,IAAP,IAAgB;AACrC,UAAMH,QAAQ,GAAGd,OAAO,CAACC,GAAR,CAAYC,eAAZ,GAA8B,WAA/C;AACA,UAAMoD,QAAQ,GAAG;AAAErC,MAAAA,IAAI,EAAEA;AAAR,KAAjB;AACA,UAAMsC,QAAQ,GAAGC,IAAI,CAACC,SAAL,CAAeH,QAAf,CAAjB;AACA,UAAMlC,OAAO,GAAG;AACdC,MAAAA,MAAM,EAAE,MADM;AAEdC,MAAAA,OAAO,EAAE;AACP,wBAAgB,kBADT;AAEPC,QAAAA,aAAa,EAAE,YAAY5C,OAAO,CAAC6C;AAF5B,OAFK;AAMdC,MAAAA,IAAI,EAAE8B;AANQ,KAAhB;AASA,UAAM7B,GAAG,GAAG,MAAMC,KAAK,CAACb,QAAD,EAAWM,OAAX,CAAvB;AACA,UAAMQ,GAAG,GAAG,MAAMF,GAAG,CAACG,IAAJ,EAAlB;AAEA,WAAOD,GAAP;AACD,GAjBD;;AAmBA,QAAMyB,aAAa,GAAG,OAAOlB,EAAP,EAAWlB,IAAX,KAAoB;AACxC,UAAMH,QAAQ,GAAGd,OAAO,CAACC,GAAR,CAAYC,eAAZ,GAA8B,YAA9B,GAA6CiC,EAA9D;;AAEA,SAAK,MAAMuB,GAAX,IAAkBzC,IAAlB,EAAwB;AACtB,UAAIA,IAAI,CAACyC,GAAD,CAAJ,CAAUvB,EAAV,KAAiBwB,SAAjB,IAA8B1C,IAAI,CAACyC,GAAD,CAAJ,CAAUvB,EAAV,KAAiByB,GAAnD,EAAwD;AACtD,eAAO3C,IAAI,CAACyC,GAAD,CAAX;AACD;AACF;;AAEDT,IAAAA,OAAO,CAACC,GAAR,CAAYpC,QAAZ;AAEA,UAAM+C,OAAO,GAAG;AAAE5C,MAAAA,IAAI,EAAEA;AAAR,KAAhB;AACA,UAAMsC,QAAQ,GAAGC,IAAI,CAACC,SAAL,CAAeI,OAAf,CAAjB;AAEA,UAAMzC,OAAO,GAAG;AACdC,MAAAA,MAAM,EAAE,KADM;AAEdC,MAAAA,OAAO,EAAE;AACP,wBAAgB,kBADT;AAEPC,QAAAA,aAAa,EAAE,YAAY5C,OAAO,CAAC6C;AAF5B,OAFK;AAMdC,MAAAA,IAAI,EAAE8B;AANQ,KAAhB;;AASA,QAAI;AACF,YAAM7B,GAAG,GAAG,MAAMC,KAAK,CAACb,QAAD,EAAWM,OAAX,CAAvB;AACA,YAAMQ,GAAG,GAAG,MAAMF,GAAG,CAACG,IAAJ,EAAlB;;AAEA,UAAIH,GAAG,CAACvD,MAAJ,KAAe,GAAnB,EAAwB;AACtBT,QAAAA,QAAQ;AACRW,QAAAA,IAAI,CAACyF,WAAL;AACAtH,QAAAA,KAAK,CAACsF,OAAN,CAAc,8BAAd,EAA8C;AAC5CiC,UAAAA,QAAQ,EAAEvH,KAAK,CAACwH,QAAN,CAAeC;AADmB,SAA9C;AAGApF,QAAAA,MAAM,CAACqF,MAAP;AACD,OAPD,MAOO;AAAA;;AACLtC,QAAAA,GAAG,SAAH,IAAAA,GAAG,WAAH,0BAAAA,GAAG,CAAEG,KAAL,gFAAYoC,OAAZ,0EAAqBC,MAArB,CAA4B1B,GAA5B,CAAiCX,KAAD,IAAW;AACzC,gBAAMsC,QAAQ,GAAGtC,KAAK,CAACuC,IAAN,CAAW,CAAX,CAAjB;AACA9H,UAAAA,KAAK,CAACuF,KAAN,CACEsC,QAAQ,KAAK,KAAb,GACI,qBADJ,GAEI,gCAHN,EAIE;AACEN,YAAAA,QAAQ,EAAEvH,KAAK,CAACwH,QAAN,CAAeC;AAD3B,WAJF;AAQD,SAVD;AAWD;AACF,KAxBD,CAwBE,OAAOlC,KAAP,EAAc;AACdvF,MAAAA,KAAK,CAACuF,KAAN,CAAY,gCAAZ,EAA8C;AAC5CgC,QAAAA,QAAQ,EAAEvH,KAAK,CAACwH,QAAN,CAAeC;AADmB,OAA9C;AAGD;AACF,GApDD;;AAsDA,QAAMM,QAAQ,GAAG,MAAOC,KAAP,IAAiB;AAChCtG,IAAAA,YAAY,CAAC;AAAEC,MAAAA,MAAM,EAAE,YAAV;AAAwBC,MAAAA,OAAO,EAAE;AAAjC,KAAD,CAAZ;AAEA,UAAM0C,QAAQ,GACZd,OAAO,CAACC,GAAR,CAAYC,eAAZ,GAA8B,8BAA9B,GAA+DsE,KADjE;AAEA,UAAMpD,OAAO,GAAG;AACdC,MAAAA,MAAM,EAAE,KADM;AAEdC,MAAAA,OAAO,EAAE;AACPC,QAAAA,aAAa,EAAE,YAAY5C,OAAO,CAAC6C;AAD5B;AAFK,KAAhB;AAOA,UAAME,GAAG,GAAG,MAAMC,KAAK,CAACb,QAAD,EAAWM,OAAX,CAAvB;AACA,UAAMQ,GAAG,GAAG,MAAMF,GAAG,CAACG,IAAJ,EAAlB;;AAEA,QAAIH,GAAG,CAACvD,MAAJ,KAAe,GAAnB,EAAwB;AACtB,UAAIyD,GAAG,CAACX,IAAJ,CAASJ,MAAT,GAAkB,CAAtB,EAAyB;AACvB3C,QAAAA,YAAY,CAAC;AAAEC,UAAAA,MAAM,EAAE,OAAV;AAAmBC,UAAAA,OAAO,EAAE;AAA5B,SAAD,CAAZ;AACD,OAFD,MAEO;AACLF,QAAAA,YAAY,CAAC;AAAEC,UAAAA,MAAM,EAAE,SAAV;AAAqBC,UAAAA,OAAO,EAAE;AAA9B,SAAD,CAAZ;AACD;AACF,KAND,MAMO;AACLF,MAAAA,YAAY,CAAC;AACXC,QAAAA,MAAM,EAAE,OADG;AAEXC,QAAAA,OAAO,EAAE;AAFE,OAAD,CAAZ;AAID;AACF,GA3BD;;AA6BA,QAAMqG,iBAAiB,GAAG,OAAOC,aAAP,EAAsBC,SAAtB,KAAoC;AAC5D,UAAMC,SAAS,GAAGC,MAAM,CAACC,IAAP,CAAYJ,aAAZ,EAA2B,CAA3B,CAAlB;AACA,UAAMK,OAAO,GAAGH,SAAS,CAACI,KAAV,CAAgB,GAAhB,CAAhB;AACA,UAAMC,IAAI,GAAGF,OAAO,CAACA,OAAO,CAAClE,MAAR,GAAiB,CAAlB,CAApB,CAH4D,CAK5D;;AACA,QAAI+D,SAAS,KAAK,KAAd,IAAuBD,SAAS,CAACO,GAAV,KAAkB,EAA7C,EAAiD;AAC/C5H,MAAAA,QAAQ,CAACiH,QAAD,EAAW,IAAX,CAAR,CAAyBI,SAAS,CAACO,GAAnC;AACD,KAFD,MAEO,IAAIN,SAAS,KAAK,KAAd,IAAuBD,SAAS,CAACO,GAAV,KAAkB,EAA7C,EAAiD;AACtDhH,MAAAA,YAAY,CAAC;AAAEC,QAAAA,MAAM,EAAE,OAAV;AAAmBC,QAAAA,OAAO,EAAE;AAA5B,OAAD,CAAZ;AACD;;AAEDjB,IAAAA,cAAc,CAACkB,IAAD,EAAOqG,aAAP,EAAsBC,SAAtB,EAAiCC,SAAjC,EAA4CnG,UAA5C,CAAd;AACArB,IAAAA,aAAa,CAACiB,IAAD,EAAOqG,aAAP,EAAsBC,SAAtB,EAAiCM,IAAjC,EAAuCxG,UAAvC,CAAb;AACD,GAdD;;AAgBA,sBACE;AAAA,4BACE,QAAC,IAAD;AAAA,6BACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YADF,eAIE,QAAC,eAAD;AAAA,6BACE,QAAC,aAAD;AAAe,QAAA,KAAK,EAAE,EAAtB;AAAA,gCACE,QAAC,SAAD;AAAW,UAAA,SAAS,EAAE;AAAtB;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE,QAAC,aAAD;AAAA,iCACE;AACE,YAAA,IAAI,EAAEJ,IADR;AAEE,YAAA,IAAI,EAAC,aAFP;AAGE,YAAA,aAAa,EAAE;AACb8G,cAAAA,QAAQ,EAAE;AADG,aAHjB;AAME,YAAA,QAAQ,EAAEnD,QANZ;AAOE,YAAA,cAAc,EAAEyC,iBAPlB;AAAA,oCASE;AAAK,cAAA,SAAS,EAAC,2BAAf;AAAA,sCACE;AAAK,gBAAA,SAAS,EAAC,mCAAf;AAAA,wCACE,cAAM,IAAN;AACE,kBAAA,IAAI,EAAC,MADP;AAEE,kBAAA,KAAK,EAAE,CACL;AACEW,oBAAAA,QAAQ,EAAE,IADZ;AAEEhH,oBAAAA,OAAO,EAAE;AAFX,mBADK,CAFT;AAAA,yCASE;AACE,oBAAA,KAAK,EAAE;AAAEiH,sBAAAA,MAAM,EAAE;AAAV,qBADT;AAEE,oBAAA,WAAW,EAAC;AAFd;AAAA;AAAA;AAAA;AAAA;AATF;AAAA;AAAA;AAAA;AAAA,wBADF,eAeE,QAAC,UAAD;AACE,kBAAA,gBAAgB,EAAE1H,QADpB;AAEE,kBAAA,gBAAgB,EAAEC,WAFpB;AAGE,kBAAA,gBAAgB,EAAE+B,gBAHpB;AAIE,kBAAA,sBAAsB,EAAEE,sBAJ1B;AAKE,kBAAA,mBAAmB,EAAED;AALvB;AAAA;AAAA;AAAA;AAAA,wBAfF,eAsBE,QAAC,aAAD;AACE,kBAAA,aAAa,EAAEF,aADjB;AAEE,kBAAA,QAAQ,EAAEG,sBAFZ;AAGE,kBAAA,mBAAmB,EAAED;AAHvB;AAAA;AAAA;AAAA;AAAA,wBAtBF,eA2BE,cAAM,IAAN;AAAW,kBAAA,IAAI,EAAC,aAAhB;AAAA,yCACE,QAAC,QAAD;AAAU,oBAAA,IAAI,EAAE,CAAhB;AAAmB,oBAAA,WAAW,EAAC;AAA/B;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,wBA3BF;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,eAgCE;AAAK,gBAAA,SAAS,EAAC,mCAAf;AAAA,wCACE,cAAM,IAAN;AACE,kBAAA,IAAI,EAAC,KADP;AAEE,kBAAA,WAAW,MAFb;AAGE,kBAAA,cAAc,EAAE3B,SAAS,CAACE,MAH5B;AAIE,kBAAA,IAAI,EAAEF,SAAS,CAACG,OAJlB;AAKE,kBAAA,KAAK,EAAE,CACL;AACEgH,oBAAAA,QAAQ,EAAE,IADZ;AAEEhH,oBAAAA,OAAO,EAAE;AAFX,mBADK,CALT;AAAA,yCAYE;AAAO,oBAAA,KAAK,EAAE;AAAEiH,sBAAAA,MAAM,EAAE;AAAV,qBAAd;AAAkC,oBAAA,WAAW,EAAC;AAA9C;AAAA;AAAA;AAAA;AAAA;AAZF;AAAA;AAAA;AAAA;AAAA,wBADF,eAeE,QAAC,YAAD;AACE,kBAAA,IAAI,EAAEpG,YAAY,CAACgC,IADrB;AAEE,kBAAA,oBAAoB,EAAE7B,oBAFxB;AAGE,kBAAA,QAAQ,EAAEC;AAHZ;AAAA;AAAA;AAAA;AAAA,wBAfF,eAoBE,QAAC,MAAD;AACE,kBAAA,IAAI,EAAEH,MADR;AAEE,kBAAA,cAAc,EAAEI,cAFlB;AAGE,kBAAA,QAAQ,EAAEC;AAHZ;AAAA;AAAA;AAAA;AAAA,wBApBF,eAyBE,QAAC,SAAD;AAAW,kBAAA,IAAI,EAAEJ,SAAjB;AAA4B,kBAAA,QAAQ,EAAEM;AAAtC;AAAA;AAAA;AAAA;AAAA,wBAzBF;AAAA;AAAA;AAAA;AAAA;AAAA,sBAhCF,eA4DE;AAAK,gBAAA,SAAS,EAAC,mCAAf;AAAA,uCACE,QAAC,OAAD,kCAAaW,WAAb;AAAA,4BACG3C,KAAK,IAAI,IAAT,gBACC;AAAA,4CACE;AAAG,sBAAA,SAAS,EAAC,sBAAb;AAAA,6CACE;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,4BADF,eAIE;AAAG,sBAAA,SAAS,EAAC,iBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BAJF,eAOE;AAAG,sBAAA,SAAS,EAAC,sBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BAPF;AAAA,kCADD,gBAaC,QAAC,KAAD;AACE,oBAAA,MAAM,EAAC,MADT;AAEE,oBAAA,MAAM,EAAEqC,WAFV;AAGE,oBAAA,GAAG,EAAEE,OAAO,CAACC,GAAR,CAAYC,eAAZ,IAA8BzC,KAA9B,aAA8BA,KAA9B,uBAA8BA,KAAK,CAAE0C,GAArC;AAHP;AAAA;AAAA;AAAA;AAAA;AAdJ;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,sBA5DF;AAAA;AAAA;AAAA;AAAA;AAAA,oBATF,eA8FE;AAAA,qCACE;AAAI,gBAAA,SAAS,EAAC,EAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,oBA9FF,eAiGE,QAAC,SAAD;AAAW,cAAA,IAAI,EAAE9B;AAAjB;AAAA;AAAA;AAAA;AAAA,oBAjGF,eAmGE,cAAM,IAAN;AAAW,cAAA,SAAS,EAAC,MAArB;AAAA,wBACGE,OAAO,gBACN;AAAK,gBAAA,SAAS,EAAC,wBAAf;AAAA,uCACE;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,sBADM,gBAKN;AAAA,wCACE,QAAC,aAAD;AACE,kBAAA,SAAS,EAAE;AAAA;;AAAA,2BAAMO,SAAN,aAAMA,SAAN,6CAAMA,SAAS,CAAEwG,OAAjB,uDAAM,mBAAoBC,KAApB,EAAN;AAAA,mBADb;AAEE,kBAAA,QAAQ,EAAE,MAAM,CAAE,CAFpB;AAGE,kBAAA,KAAK,EAAC,eAHR;AAIE,kBAAA,OAAO,EAAC,iDAJV;AAKE,kBAAA,SAAS,eACP;AAAQ,oBAAA,SAAS,EAAC,iEAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AANJ;AAAA;AAAA;AAAA;AAAA,wBADF,eAYE;AAAQ,kBAAA,QAAQ,EAAC,QAAjB;AAA0B,kBAAA,GAAG,EAAEzG;AAA/B;AAAA;AAAA;AAAA;AAAA,wBAZF;AAAA;AANJ;AAAA;AAAA;AAAA;AAAA,oBAnGF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBAFF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YAJF;AAAA,kBADF;AAwID,CA/YD;;AAiZAvB,MAAM,CAACiI,eAAP,GAAyB,MAAOC,OAAP,IAAmB;AAC1C,QAAM9G,OAAO,GAAGpC,OAAO,CAACqC,GAAR,CAAY6G,OAAZ,CAAhB;AAEA,QAAMC,aAAa,GAAG,MAAMC,mBAAmB,CAAChH,OAAD,CAA/C;AACA,QAAMiH,UAAU,GAAG,MAAMF,aAAa,CAAC7D,IAAd,EAAzB;AAEA,QAAMgE,SAAS,GAAG,MAAMC,eAAe,CAACnH,OAAD,CAAvC;AACA,QAAMO,MAAM,GAAG,MAAM2G,SAAS,CAAChE,IAAV,EAArB;AAEA,QAAMkE,YAAY,GAAG,MAAMC,kBAAkB,CAACrH,OAAD,CAA7C;AACA,QAAMQ,SAAS,GAAG,MAAM4G,YAAY,CAAClE,IAAb,EAAxB;AAEA,QAAMoE,eAAe,GAAG,MAAMC,qBAAqB,CAACvH,OAAD,CAAnD;AACA,QAAMM,YAAY,GAAG,MAAMgH,eAAe,CAACpE,IAAhB,EAA3B;AAEA,QAAMsE,gBAAgB,GAAG,MAAMC,sBAAsB,CAACzH,OAAD,CAArD;AACA,QAAMe,aAAa,GAAG,MAAMyG,gBAAgB,CAACtE,IAAjB,EAA5B;AAEA,SAAO;AACLrE,IAAAA,KAAK,EAAE;AACLoI,MAAAA,UADK;AAEL1G,MAAAA,MAFK;AAGLC,MAAAA,SAHK;AAILF,MAAAA,YAJK;AAKLS,MAAAA;AALK;AADF,GAAP;AASD,CA3BD;;AA6BA,MAAMiG,mBAAmB,GAAG,MAAOhH,OAAP,IAAmB;AAC7C,QAAMmC,QAAQ,GAAGd,OAAO,CAACC,GAAR,CAAYC,eAAZ,GAA8B,aAA/C;AACA,QAAMkB,OAAO,GAAG;AACdC,IAAAA,MAAM,EAAE,KADM;AAEdC,IAAAA,OAAO,EAAE;AACP,sBAAgB,kBADT;AAEPC,MAAAA,aAAa,EAAE,YAAY5C,OAAO,CAAC6C;AAF5B;AAFK,GAAhB;AAQA,QAAME,GAAG,GAAG,MAAMC,KAAK,CAACb,QAAD,EAAWM,OAAX,CAAvB;AACA,SAAOM,GAAP;AACD,CAZD;;AAcA,MAAMwE,qBAAqB,GAAG,MAAOvH,OAAP,IAAmB;AAC/C,QAAMmC,QAAQ,GAAGd,OAAO,CAACC,GAAR,CAAYC,eAAZ,GAA8B,eAA/C;AACA,QAAMkB,OAAO,GAAG;AACdC,IAAAA,MAAM,EAAE,KADM;AAEdC,IAAAA,OAAO,EAAE;AACP,sBAAgB,kBADT;AAEPC,MAAAA,aAAa,EAAE,YAAY5C,OAAO,CAAC6C;AAF5B;AAFK,GAAhB;AAQA,QAAME,GAAG,GAAG,MAAMC,KAAK,CAACb,QAAD,EAAWM,OAAX,CAAvB;AACA,SAAOM,GAAP;AACD,CAZD;;AAcA,MAAM0E,sBAAsB,GAAG,MAAOzH,OAAP,IAAmB;AAChD,QAAMmC,QAAQ,GAAGd,OAAO,CAACC,GAAR,CAAYC,eAAZ,GAA8B,iBAA/C;AACA,QAAMkB,OAAO,GAAG;AACdC,IAAAA,MAAM,EAAE,KADM;AAEdC,IAAAA,OAAO,EAAE;AACP,sBAAgB,kBADT;AAEPC,MAAAA,aAAa,EAAE,YAAY5C,OAAO,CAAC6C;AAF5B;AAFK,GAAhB;AAQA,QAAME,GAAG,GAAG,MAAMC,KAAK,CAACb,QAAD,EAAWM,OAAX,CAAvB;AACA,SAAOM,GAAP;AACD,CAZD;;AAcA,MAAMoE,eAAe,GAAG,MAAOnH,OAAP,IAAmB;AACzC,QAAMmC,QAAQ,GAAGd,OAAO,CAACC,GAAR,CAAYC,eAAZ,GAA8B,SAA/C;AACA,QAAMkB,OAAO,GAAG;AACdC,IAAAA,MAAM,EAAE,KADM;AAEdC,IAAAA,OAAO,EAAE;AACP,sBAAgB,kBADT;AAEPC,MAAAA,aAAa,EAAE,YAAY5C,OAAO,CAAC6C;AAF5B;AAFK,GAAhB;AAQA,QAAME,GAAG,GAAG,MAAMC,KAAK,CAACb,QAAD,EAAWM,OAAX,CAAvB;AACA,SAAOM,GAAP;AACD,CAZD;;AAcA,MAAMsE,kBAAkB,GAAG,MAAOrH,OAAP,IAAmB;AAC5C,QAAMmC,QAAQ,GAAGd,OAAO,CAACC,GAAR,CAAYC,eAAZ,GAA8B,YAA/C;AACA,QAAMkB,OAAO,GAAG;AACdC,IAAAA,MAAM,EAAE,KADM;AAEdC,IAAAA,OAAO,EAAE;AACP,sBAAgB,kBADT;AAEPC,MAAAA,aAAa,EAAE,YAAY5C,OAAO,CAAC6C;AAF5B;AAFK,GAAhB;AAQA,QAAME,GAAG,GAAG,MAAMC,KAAK,CAACb,QAAD,EAAWM,OAAX,CAAvB;AACA,SAAOM,GAAP;AACD,CAZD;;AAcA,eAAenE,MAAf","sourcesContent":["import { useRef, useState } from \"react\";\nimport Head from \"next/head\";\nimport LayoutContent from \"@iso/components/utility/layoutContent\";\nimport LayoutWrapper from \"@iso/components/utility/layoutWrapper.js\";\nimport { Button, Form, Input, message, Upload, Space } from \"antd\";\nimport nookies from \"nookies\";\nimport { toast } from \"react-toastify\";\nimport { Spin, Row } from \"antd\";\nimport DashboardLayout from \"../../../containers/DashboardLayout/DashboardLayout\";\nimport TitlePage from \"../../../components/TitlePage/TitlePage\";\nimport Categories from \"../../../components/Form/AddProduct/Categories\";\nimport Manufactures from \"../../../components/Form/AddProduct/Manufactures\";\nimport SubCategories from \"../../../components/Form/AddProduct/subCategories\";\nimport Groups from \"../../../components/Form/AddProduct/Groups\";\nimport Locations from \"../../../components/Form/AddProduct/Locations\";\nimport { useRouter } from \"next/router\";\nimport Image from \"next/image\";\nimport UnitTable from \"../../../components/ReactDataTable/Product/UnitsTable\";\nimport { FileImageOutlined } from \"@ant-design/icons\";\nimport setDiskonValue from \"./utility/setDiskonValue\";\nimport setHargaValue from \"./utility/setHargaValue\";\nimport ConfirmDialog from \"../../../components/Alert/ConfirmDialog\";\nimport debounce from \"./utility/debounce\";\n\nconst Tambah = ({ props }) => {\n  const [image, setImage] = useState();\n  const [category, setCategory] = useState();\n  const [uploadedOnce, setUploadedOnce] = useState(true);\n  const [fileList, setFileList] = useState([]);\n  const [statusSKU, setStatusSKU] = useState({\n    status: \"\",\n    message: \"\",\n  });\n  const [form] = Form.useForm();\n  const [loading, setLoading] = useState(false);\n  const [firstInput, setFirstInputDiskon] = useState(true);\n  const cookies = nookies.get(null, \"token\");\n  const router = useRouter();\n  const submitBtn = useRef();\n\n  const { Dragger } = Upload;\n  const { TextArea } = Input;\n\n  const manufactures = props.manufactures;\n  const groups = props.groups;\n  const locations = props.locations;\n\n  const [selectedManufactures, setSelectedManufactures] = useState({});\n  const [selectedGroups, setSelectedGroup] = useState({});\n  const [selectLocations, setSelectLocation] = useState({});\n\n  const [subCategories, setSubCategories] = useState([]);\n  const [selectedSubCategory, setSelectedSubCategory] = useState();\n\n  const imageLoader = ({ src }) => {\n    return process.env.NEXT_PUBLIC_URL + image?.url;\n  };\n\n  const propsDagger = {\n    name: \"files\",\n    multiple: false,\n    fileList: fileList,\n    showUploadList: {\n      showDownloadIcon: false,\n      showRemoveIcon: true,\n    },\n\n    onRemove(info) {\n      setUploadedOnce(true);\n      setImage();\n      setFileList([]);\n    },\n\n    async onChange(info) {\n      if (info.fileList.length === 1) {\n        const endpoint = process.env.NEXT_PUBLIC_URL + \"/upload\";\n        const file = info.file.originFileObj;\n        const data = new FormData();\n        data.append(\"files\", file);\n\n        setFileList(info.fileList);\n\n        const options = {\n          method: \"POST\",\n          headers: {\n            Authorization: \"Bearer \" + cookies.token,\n          },\n          body: data,\n        };\n\n        if (uploadedOnce) {\n          setUploadedOnce(false);\n          const req = await fetch(endpoint, options);\n          const res = await req.json();\n\n          if (req.status === 200) {\n            setImage(res[0]);\n\n            message.success(`${info.file.name} berhasil diupload`);\n          } else {\n            message.error(`${info.file.name} gagal upload`);\n          }\n        }\n      } else if (info.fileList.length === 0) {\n        message.info(`Gambar berhasil dihapus`);\n      } else {\n        message.error(`Hanya dapat menambahkan 1 gambar`);\n      }\n    },\n  };\n\n  const onFinish = async (values) => {\n    setLoading(true);\n\n    // if (selectedSubCategory === 0) {\n    //   message.error(\n    //     `Sub Kategori tidak ditemukan pada Induk Kategori. Silahkan cek kembali`\n    //   );\n    // }\n\n    const categoryID = {\n      id: parseInt(values?.category_id),\n    };\n\n    const subCategoryID = {\n      id: values?.subCategories,\n    };\n\n    const manufacturesID = {\n      id: values?.manufactures,\n    };\n\n    const groupID = {\n      id: values?.groups,\n    };\n\n    const locationsID = values.locations.map((locationId) => locationId);\n\n    delete values.locations;\n    delete values.category_id;\n    delete values.subCategories;\n    delete values.manufactures;\n    delete values.groups;\n\n    const postData = {\n      ...values,\n      locations: locationsID,\n    };\n\n    const putData = {\n      category: categoryID,\n      sub_category: subCategoryID,\n      manufacture: manufacturesID,\n      group: groupID,\n      locations: locationsID,\n      image: { id: image?.id },\n    };\n\n    console.log(\"put data\", putData);\n\n    // POST DATA\n    const postRes = await handlePostData(postData);\n    console.log(postRes);\n    // PUT DATA\n    await handlePutData(postRes?.data?.id, putData);\n\n    setLoading(false);\n  };\n\n  const handlePostData = async (data) => {\n    const endpoint = process.env.NEXT_PUBLIC_URL + \"/products\";\n    const dataPost = { data: data };\n    const JSONdata = JSON.stringify(dataPost);\n    const options = {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + cookies.token,\n      },\n      body: JSONdata,\n    };\n\n    const req = await fetch(endpoint, options);\n    const res = await req.json();\n\n    return res;\n  };\n\n  const handlePutData = async (id, data) => {\n    const endpoint = process.env.NEXT_PUBLIC_URL + \"/products/\" + id;\n\n    for (const key in data) {\n      if (data[key].id === undefined || data[key].id === NaN) {\n        delete data[key];\n      }\n    }\n\n    console.log(endpoint);\n\n    const dataPut = { data: data };\n    const JSONdata = JSON.stringify(dataPut);\n\n    const options = {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + cookies.token,\n      },\n      body: JSONdata,\n    };\n\n    try {\n      const req = await fetch(endpoint, options);\n      const res = await req.json();\n\n      if (req.status === 200) {\n        setImage();\n        form.resetFields();\n        toast.success(\"Produk berhasil ditambahkan!\", {\n          position: toast.POSITION.TOP_RIGHT,\n        });\n        router.reload();\n      } else {\n        res?.error?.details?.errors.map((error) => {\n          const ErrorMsg = error.path[0];\n          toast.error(\n            ErrorMsg === \"SKU\"\n              ? \"SKU sudah digunakan\"\n              : \"Tidak dapat menambahkan Produk\",\n            {\n              position: toast.POSITION.TOP_RIGHT,\n            }\n          );\n        });\n      }\n    } catch (error) {\n      toast.error(\"Tidak dapat menambahkan Produk\", {\n        position: toast.POSITION.TOP_RIGHT,\n      });\n    }\n  };\n\n  const checkSKU = async (value) => {\n    setStatusSKU({ status: \"validating\", message: \"\" });\n\n    const endpoint =\n      process.env.NEXT_PUBLIC_URL + \"/products?filters[SKU][$eq]=\" + value;\n    const options = {\n      method: \"GET\",\n      headers: {\n        Authorization: \"Bearer \" + cookies.token,\n      },\n    };\n\n    const req = await fetch(endpoint, options);\n    const res = await req.json();\n\n    if (req.status === 200) {\n      if (res.data.length > 0) {\n        setStatusSKU({ status: \"error\", message: \"SKU sudah digunakan\" });\n      } else {\n        setStatusSKU({ status: \"success\", message: \"\" });\n      }\n    } else {\n      setStatusSKU({\n        status: \"error\",\n        message: \"Error ketika mengambil data SKU\",\n      });\n    }\n  };\n\n  const handleValueChange = async (changedValues, allValues) => {\n    const fieldName = Object.keys(changedValues)[0];\n    const unitArr = fieldName.split(\"_\");\n    const unit = unitArr[unitArr.length - 1];\n\n    // check SKU\n    if (fieldName === \"SKU\" && allValues.SKU !== \"\") {\n      debounce(checkSKU, 1000)(allValues.SKU);\n    } else if (fieldName === \"SKU\" && allValues.SKU === \"\") {\n      setStatusSKU({ status: \"error\", message: \"SKU tidak boleh kosong\" });\n    }\n\n    setDiskonValue(form, changedValues, allValues, fieldName, firstInput);\n    setHargaValue(form, changedValues, allValues, unit, firstInput);\n  };\n\n  return (\n    <>\n      <Head>\n        <title>Tambahkan Produk</title>\n      </Head>\n      <DashboardLayout>\n        <LayoutWrapper style={{}}>\n          <TitlePage titleText={\"Tambahkan Produk\"} />\n          <LayoutContent>\n            <Form\n              form={form}\n              name=\"add_product\"\n              initialValues={{\n                remember: true,\n              }}\n              onFinish={onFinish}\n              onValuesChange={handleValueChange}\n            >\n              <div className=\"flex flex-wrap -mx-3 mb-3\">\n                <div className=\"w-full md:w-1/3 px-3 mb-2 md:mb-0\">\n                  <Form.Item\n                    name=\"name\"\n                    rules={[\n                      {\n                        required: true,\n                        message: \"Nama Produk tidak boleh kosong!\",\n                      },\n                    ]}\n                  >\n                    <Input\n                      style={{ height: \"40px\" }}\n                      placeholder=\"Nama Produk\"\n                    />\n                  </Form.Item>\n                  <Categories\n                    selectedCategory={category}\n                    onSelectCategory={setCategory}\n                    setSubCategories={setSubCategories}\n                    setSelectedSubCategory={setSelectedSubCategory}\n                    selectedSubCategory={selectedSubCategory}\n                  />\n                  <SubCategories\n                    subCategories={subCategories}\n                    onSelect={setSelectedSubCategory}\n                    selectedSubCategory={selectedSubCategory}\n                  />\n                  <Form.Item name=\"description\">\n                    <TextArea rows={4} placeholder=\"Deskripsi\" />\n                  </Form.Item>\n                </div>\n                <div className=\"w-full md:w-1/3 px-3 mb-2 md:mb-0\">\n                  <Form.Item\n                    name=\"SKU\"\n                    hasFeedback\n                    validateStatus={statusSKU.status}\n                    help={statusSKU.message}\n                    rules={[\n                      {\n                        required: true,\n                        message: \"SKU tidak boleh kosong!\",\n                      },\n                    ]}\n                  >\n                    <Input style={{ height: \"40px\" }} placeholder=\"SKU\" />\n                  </Form.Item>\n                  <Manufactures\n                    data={manufactures.data}\n                    selectedManufactures={selectedManufactures}\n                    onSelect={setSelectedManufactures}\n                  />\n                  <Groups\n                    data={groups}\n                    selectedGroups={selectedGroups}\n                    onSelect={setSelectedGroup}\n                  />\n                  <Locations data={locations} onSelect={setSelectLocation} />\n                </div>\n\n                <div className=\"w-full md:w-1/3 px-3 mb-2 md:mb-0\">\n                  <Dragger {...propsDagger}>\n                    {image == null ? (\n                      <>\n                        <p className=\"ant-upload-drag-icon\">\n                          <FileImageOutlined />\n                        </p>\n                        <p className=\"ant-upload-text\">\n                          Klik atau tarik gambar ke kotak ini\n                        </p>\n                        <p className=\"ant-upload-hint  m-3\">\n                          Gambar akan digunakan sebagai contoh tampilan produk\n                        </p>\n                      </>\n                    ) : (\n                      <Image\n                        layout=\"fill\"\n                        loader={imageLoader}\n                        src={process.env.NEXT_PUBLIC_URL + image?.url}\n                      />\n                    )}\n                  </Dragger>\n                </div>\n              </div>\n\n              <div>\n                <h6 className=\"\">HARGA</h6>\n              </div>\n              <UnitTable form={form} />\n\n              <Form.Item className=\"mt-5\">\n                {loading ? (\n                  <div className=\" flex float-left ml-3 \">\n                    <Spin />\n                  </div>\n                ) : (\n                  <>\n                    <ConfirmDialog\n                      onConfirm={() => submitBtn?.current?.click()}\n                      onCancel={() => {}}\n                      title=\"Tambah Produk\"\n                      message=\"Apakah anda yakin ingin menambahkan produk ini?\"\n                      component={\n                        <Button className=\" hover:text-white hover:bg-cyan-700 border border-cyan-700 ml-1\">\n                          Simpan\n                        </Button>\n                      }\n                    />\n                    <Button htmlType=\"submit\" ref={submitBtn}></Button>\n                  </>\n                )}\n              </Form.Item>\n            </Form>\n          </LayoutContent>\n        </LayoutWrapper>\n      </DashboardLayout>\n    </>\n  );\n};\n\nTambah.getInitialProps = async (context) => {\n  const cookies = nookies.get(context);\n\n  const reqCategories = await fetchDataCategories(cookies);\n  const categories = await reqCategories.json();\n\n  const reqGroups = await fetchDataGroups(cookies);\n  const groups = await reqGroups.json();\n\n  const reqLocations = await fetchDataLocations(cookies);\n  const locations = await reqLocations.json();\n\n  const reqManufactures = await fetchDataManufactures(cookies);\n  const manufactures = await reqManufactures.json();\n\n  const reqSubCategories = await fetchDataSubCategories(cookies);\n  const subCategories = await reqSubCategories.json();\n\n  return {\n    props: {\n      categories,\n      groups,\n      locations,\n      manufactures,\n      subCategories,\n    },\n  };\n};\n\nconst fetchDataCategories = async (cookies) => {\n  const endpoint = process.env.NEXT_PUBLIC_URL + \"/categories\";\n  const options = {\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: \"Bearer \" + cookies.token,\n    },\n  };\n\n  const req = await fetch(endpoint, options);\n  return req;\n};\n\nconst fetchDataManufactures = async (cookies) => {\n  const endpoint = process.env.NEXT_PUBLIC_URL + \"/manufactures\";\n  const options = {\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: \"Bearer \" + cookies.token,\n    },\n  };\n\n  const req = await fetch(endpoint, options);\n  return req;\n};\n\nconst fetchDataSubCategories = async (cookies) => {\n  const endpoint = process.env.NEXT_PUBLIC_URL + \"/sub-categories\";\n  const options = {\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: \"Bearer \" + cookies.token,\n    },\n  };\n\n  const req = await fetch(endpoint, options);\n  return req;\n};\n\nconst fetchDataGroups = async (cookies) => {\n  const endpoint = process.env.NEXT_PUBLIC_URL + \"/groups\";\n  const options = {\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: \"Bearer \" + cookies.token,\n    },\n  };\n\n  const req = await fetch(endpoint, options);\n  return req;\n};\n\nconst fetchDataLocations = async (cookies) => {\n  const endpoint = process.env.NEXT_PUBLIC_URL + \"/locations\";\n  const options = {\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: \"Bearer \" + cookies.token,\n    },\n  };\n\n  const req = await fetch(endpoint, options);\n  return req;\n};\n\nexport default Tambah;\n"]},"metadata":{},"sourceType":"module"}