{"ast":null,"code":"import _Button from \"antd/lib/button\";\nimport _Spin from \"antd/lib/spin\";\nimport _FileImageOutlined from \"@ant-design/icons/lib/icons/FileImageOutlined\";\nimport _notification from \"antd/lib/notification\";\nimport _defineProperty from \"/Users/yudiananta/Development/NextJS/ERP Dev/JS Deploy/JS-Deploy/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _message from \"antd/lib/message\";\nimport _asyncToGenerator from \"/Users/yudiananta/Development/NextJS/ERP Dev/JS Deploy/JS-Deploy/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _Input from \"antd/lib/input\";\nimport _Upload from \"antd/lib/upload\";\nimport _Form from \"antd/lib/form\";\nimport _slicedToArray from \"/Users/yudiananta/Development/NextJS/ERP Dev/JS Deploy/JS-Deploy/node_modules/next/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"/Users/yudiananta/Development/NextJS/ERP Dev/JS Deploy/JS-Deploy/pages/dashboard/produk/edit/[id].js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport _regeneratorRuntime from \"/Users/yudiananta/Development/NextJS/ERP Dev/JS Deploy/JS-Deploy/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport { useRef, useState } from \"react\";\nimport Head from \"next/head\";\nimport LayoutContent from \"@iso/components/utility/layoutContent\";\nimport LayoutWrapper from \"@iso/components/utility/layoutWrapper.js\";\nimport nookies from \"nookies\";\nimport { toast } from \"react-toastify\";\nimport { useRouter } from \"next/router\";\nimport Image from \"next/image\";\nimport DashboardLayout from \"../../../../containers/DashboardLayout/DashboardLayout\";\nimport TitlePage from \"../../../../components/TitlePage/TitlePage\";\nimport Categories from \"../../../../components/Form/AddProduct/Categories\";\nimport Manufactures from \"../../../../components/Form/AddProduct/Manufactures\";\nimport SubCategories from \"../../../../components/Form/AddProduct/subCategories\";\nimport Groups from \"../../../../components/Form/AddProduct/Groups\";\nimport Locations from \"../../../../components/Form/AddProduct/Locations\";\nimport UnitTable from \"../../../../components/ReactDataTable/Product/UnitsTable\";\nimport ConfirmDialog from \"../../../../components/Alert/ConfirmDialog\";\nimport setHargaValue from \"../utility/setHargaValue\";\nimport setDiskonValue from \"../utility/setDiskonValue\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nvar Edit = function Edit(_ref) {\n  _s();\n\n  var _props$product, _product$attributes, _product$attributes$c, _product$attributes2, _product$attributes2$, _product$attributes3, _product$attributes3$, _product$attributes4, _product$attributes4$, _product$attributes5, _product$attributes5$, _product$attributes6, _product$attributes6$, _product$attributes7, _product$attributes$s, _product$attributes8, _product$attributes8$, _product$attributes8$2, _product$attributes$d, _product$attributes9, _product$attributes$S, _product$attributes10, _product$attributes11, _product$attributes12, _product$attributes13, _product$attributes14, _product$attributes15;\n\n  var props = _ref.props;\n  var productId = props === null || props === void 0 ? void 0 : props.product.data.id;\n  var product = props === null || props === void 0 ? void 0 : (_props$product = props.product) === null || _props$product === void 0 ? void 0 : _props$product.data;\n  var manufactures = props === null || props === void 0 ? void 0 : props.manufactures;\n  var groups = props === null || props === void 0 ? void 0 : props.groups;\n  var locations = props === null || props === void 0 ? void 0 : props.locations;\n  var initCategory = product === null || product === void 0 ? void 0 : (_product$attributes = product.attributes) === null || _product$attributes === void 0 ? void 0 : (_product$attributes$c = _product$attributes.category) === null || _product$attributes$c === void 0 ? void 0 : _product$attributes$c.data;\n  var subCategory = product === null || product === void 0 ? void 0 : (_product$attributes2 = product.attributes) === null || _product$attributes2 === void 0 ? void 0 : (_product$attributes2$ = _product$attributes2.sub_category) === null || _product$attributes2$ === void 0 ? void 0 : _product$attributes2$.data;\n  var initManufacture = product === null || product === void 0 ? void 0 : (_product$attributes3 = product.attributes) === null || _product$attributes3 === void 0 ? void 0 : (_product$attributes3$ = _product$attributes3.manufacture) === null || _product$attributes3$ === void 0 ? void 0 : _product$attributes3$.data;\n  var initGroup = product === null || product === void 0 ? void 0 : (_product$attributes4 = product.attributes) === null || _product$attributes4 === void 0 ? void 0 : (_product$attributes4$ = _product$attributes4.group) === null || _product$attributes4$ === void 0 ? void 0 : _product$attributes4$.data;\n\n  var _useState = useState((_product$attributes5 = product.attributes) !== null && _product$attributes5 !== void 0 && (_product$attributes5$ = _product$attributes5.image) !== null && _product$attributes5$ !== void 0 && _product$attributes5$.data ? (_product$attributes6 = product.attributes) === null || _product$attributes6 === void 0 ? void 0 : (_product$attributes6$ = _product$attributes6.image) === null || _product$attributes6$ === void 0 ? void 0 : _product$attributes6$.data[0].attributes : null),\n      image = _useState[0],\n      setImage = _useState[1];\n\n  var _useState2 = useState(),\n      category = _useState2[0],\n      setCategory = _useState2[1];\n\n  var _useState3 = useState(initCategory.id),\n      idCategory = _useState3[0],\n      setIdCategory = _useState3[1];\n\n  var _useState4 = useState(initManufacture.id),\n      idManufacture = _useState4[0],\n      setIdManufacture = _useState4[1];\n\n  var _useState5 = useState(true),\n      uploadedOnce = _useState5[0],\n      setUploadedOnce = _useState5[1];\n\n  var _useState6 = useState([]),\n      fileList = _useState6[0],\n      setFileList = _useState6[1];\n\n  var _useState7 = useState(true),\n      firstInput = _useState7[0],\n      setFirstInputDiskon = _useState7[1];\n\n  var _Form$useForm = _Form.useForm(),\n      _Form$useForm2 = _slicedToArray(_Form$useForm, 1),\n      form = _Form$useForm2[0];\n\n  var _useState8 = useState(false),\n      loading = _useState8[0],\n      setLoading = _useState8[1];\n\n  var cookies = nookies.get(null, \"token\");\n  var router = useRouter();\n  var submitBtn = useRef();\n  var Dragger = _Upload.Dragger;\n  var TextArea = _Input.TextArea;\n\n  var _useState9 = useState({}),\n      selectedManufactures = _useState9[0],\n      setSelectedManufactures = _useState9[1];\n\n  var _useState10 = useState({}),\n      selectedGroups = _useState10[0],\n      setSelectedGroup = _useState10[1];\n\n  var _useState11 = useState(),\n      selectLocations = _useState11[0],\n      setSelectLocation = _useState11[1];\n\n  var _useState12 = useState([]),\n      subCategories = _useState12[0],\n      setSubCategories = _useState12[1];\n\n  var _useState13 = useState(),\n      selectedSubCategory = _useState13[0],\n      setSelectedSubCategory = _useState13[1];\n\n  var _useState14 = useState(),\n      descUnit = _useState14[0],\n      setDescUnit = _useState14[1];\n\n  function locationsList() {\n    var locationNameList = [];\n    locations.data.forEach(function (element) {\n      locationNameList.push(element.attributes.name);\n    });\n    return locationNameList;\n  }\n\n  var imageLoader = function imageLoader(_ref2) {\n    var src = _ref2.src;\n    return process.env.NEXT_PUBLIC_URL + (image === null || image === void 0 ? void 0 : image.url);\n  };\n\n  var propsDagger = {\n    name: \"files\",\n    multiple: false,\n    fileList: fileList,\n    showUploadList: {\n      showDownloadIcon: false,\n      showRemoveIcon: true\n    },\n    onRemove: function onRemove(info) {\n      setUploadedOnce(true);\n      setImage();\n      setFileList([]);\n    },\n    onChange: function onChange(info) {\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var endpoint, file, data, options, req, res;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!(info.fileList.length === 1)) {\n                  _context.next = 18;\n                  break;\n                }\n\n                endpoint = process.env.NEXT_PUBLIC_URL + \"/upload\";\n                file = info.file.originFileObj;\n                data = new FormData();\n                data.append(\"files\", file);\n                setFileList(info.fileList);\n                options = {\n                  method: \"POST\",\n                  headers: {\n                    Authorization: \"Bearer \" + cookies.token\n                  },\n                  body: data\n                };\n\n                if (!uploadedOnce) {\n                  _context.next = 16;\n                  break;\n                }\n\n                setUploadedOnce(false);\n                _context.next = 11;\n                return fetch(endpoint, options);\n\n              case 11:\n                req = _context.sent;\n                _context.next = 14;\n                return req.json();\n\n              case 14:\n                res = _context.sent;\n\n                if (req.status === 200) {\n                  setImage(res[0]);\n\n                  _message.success(\"\".concat(info.file.name, \" berhasil diupload\"));\n                } else {\n                  _message.error(\"\".concat(info.file.name, \" gagal upload\"));\n                }\n\n              case 16:\n                _context.next = 19;\n                break;\n\n              case 18:\n                if (info.fileList.length === 0) {\n                  _message.info(\"Gambar berhasil dihapus\");\n                } else {\n                  _message.error(\"Hanya dapat menambahkan 1 gambar\");\n                }\n\n              case 19:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }))();\n    }\n  };\n\n  var categoryChecker = function categoryChecker(values) {\n    if (values.category_id === \"\".concat(initCategory.attributes.category_id, \" - \").concat(initCategory.attributes.name)) {\n      values.category_id = idCategory;\n    } else {\n      values.category_id = parseInt(values.category_id);\n    }\n\n    return values;\n  };\n\n  var subCategoryChecker = function subCategoryChecker(values) {\n    if (values.subCategories === (subCategory === null || subCategory === void 0 ? void 0 : subCategory.attributes.name)) {\n      values.subCategories = subCategory.id;\n    } else if (!subCategory) {} else {\n      values.subCategories = parseInt(values.subCategories);\n    }\n\n    return values;\n  };\n\n  var manufactureChecker = function manufactureChecker(values) {\n    if (values.manufactures === (initManufacture === null || initManufacture === void 0 ? void 0 : initManufacture.attributes.name)) {\n      values.manufactures = initManufacture.id;\n    } else if (!initManufacture) {} else {\n      values.manufactures = parseInt(values.manufactures);\n    }\n\n    return values;\n  };\n\n  var groupChecker = function groupChecker(values) {\n    if (values.groups === (initGroup === null || initGroup === void 0 ? void 0 : initGroup.attributes.name)) {\n      values.groups = initGroup.id;\n    } else if (!initGroup) {} else {\n      values.groups = parseInt(values.groups);\n    }\n\n    return values;\n  };\n\n  var onFinish = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(values) {\n      var _values, _parseInt, _values2, _values3, _values4, _values5, _values5$locations;\n\n      var categoryID, subCategoryID, manufacturesID, groupID, putData, key, _key, _putData$_key, _putData$_key2, data, index, dataPut, JSONdata, options, endpoint, req, res;\n\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              console.log(\"values\", values);\n              setLoading(true);\n              values = categoryChecker(values);\n              values = subCategoryChecker(values);\n              values = manufactureChecker(values);\n              values = groupChecker(values);\n              categoryID = {\n                id: parseInt((_values = values) === null || _values === void 0 ? void 0 : _values.category_id)\n              };\n              subCategoryID = {\n                id: (_parseInt = parseInt((_values2 = values) === null || _values2 === void 0 ? void 0 : _values2.subCategories)) !== null && _parseInt !== void 0 ? _parseInt : null\n              };\n              manufacturesID = {\n                id: parseInt((_values3 = values) === null || _values3 === void 0 ? void 0 : _values3.manufactures)\n              };\n              groupID = {\n                id: parseInt((_values4 = values) === null || _values4 === void 0 ? void 0 : _values4.groups)\n              };\n              values.locations = ((_values5 = values) === null || _values5 === void 0 ? void 0 : (_values5$locations = _values5.locations) === null || _values5$locations === void 0 ? void 0 : _values5$locations.map(function (location) {\n                if (location.value) {\n                  return {\n                    id: location.value\n                  };\n                }\n\n                return {\n                  id: location\n                };\n              })) || [];\n              delete values.category_id;\n              delete values.subCategories;\n              delete values.manufactures;\n              delete values.groups;\n              putData = {\n                // ...values,\n                category: categoryID,\n                sub_category: subCategoryID,\n                manufacture: manufacturesID,\n                group: groupID,\n                image: {\n                  id: image === null || image === void 0 ? void 0 : image.id\n                }\n              };\n\n              if (putData.sub_category.id === \"\") {\n                delete putData.sub_category;\n              } // remove undefined or null value from data\n\n\n              for (key in values) {\n                if (values[key] === undefined || values[key] === null) {\n                  delete values[key];\n                }\n              } // remove undefined or null value from data\n\n\n              for (_key in putData) {\n                if (((_putData$_key = putData[_key]) === null || _putData$_key === void 0 ? void 0 : _putData$_key.id) === null || isNaN((_putData$_key2 = putData[_key]) === null || _putData$_key2 === void 0 ? void 0 : _putData$_key2.id)) {\n                  delete putData[_key];\n                }\n              }\n\n              data = _objectSpread(_objectSpread({}, values), putData);\n\n              for (index = 1; index < 6; index++) {\n                if (data[\"purchase_discount_\".concat(index)] === \"-\") delete data[\"purchase_discount_\".concat(index)];\n              }\n\n              dataPut = {\n                data: data\n              };\n              JSONdata = JSON.stringify(dataPut);\n              console.log(\"tester\", putData);\n              options = {\n                method: \"PUT\",\n                headers: {\n                  \"Content-Type\": \"application/json\",\n                  Authorization: \"Bearer \" + cookies.token\n                },\n                body: JSONdata\n              };\n              endpoint = process.env.NEXT_PUBLIC_URL + \"/products/\" + productId;\n              _context2.next = 28;\n              return fetch(endpoint, options);\n\n            case 28:\n              req = _context2.sent;\n              _context2.next = 31;\n              return req.json();\n\n            case 31:\n              res = _context2.sent;\n\n              if (req.status === 200) {\n                toast.success(\"Produk berhasil diperbarui!\", {\n                  position: toast.POSITION.TOP_RIGHT\n                });\n                router.push(\"/dashboard/produk\");\n              } else {\n                console.log(res);\n                toast.error(\"Tidak dapat memperbarui Produk\", {\n                  position: toast.POSITION.TOP_RIGHT\n                });\n              }\n\n              setLoading(false);\n\n            case 34:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function onFinish(_x) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var handleValueChange = function handleValueChange(changedValues, allValues) {\n    var fieldName = Object.keys(changedValues)[0];\n    var unitArr = fieldName.split(\"_\");\n    var unit = unitArr[unitArr.length - 1];\n    setDiskonValue(form, changedValues, allValues, fieldName, firstInput);\n    setHargaValue(form, changedValues, allValues, unit, firstInput);\n  };\n\n  var getDescriptionUnit = function getDescriptionUnit() {\n    var _unitText$qty_, _unitText$unit_, _unitText$qty_2, _unitText$unit_2, _unitText$qty_3, _unitText$unit_3, _unitText$qty_4, _unitText$unit_4, _unitText$qty_5, _unitText$unit_5;\n\n    var unitText = form.getFieldsValue([\"unit_1\", \"qty_1\", \"unit_2\", \"qty_2\", \"unit_3\", \"qty_3\", \"unit_4\", \"qty_4\", \"unit_5\", \"qty_5\"]);\n    var unit1 = \"\".concat((_unitText$qty_ = unitText.qty_1) !== null && _unitText$qty_ !== void 0 ? _unitText$qty_ : \"\", \" \").concat((_unitText$unit_ = unitText.unit_1) !== null && _unitText$unit_ !== void 0 ? _unitText$unit_ : \"\", \" \");\n    var unit2 = \"\".concat((_unitText$qty_2 = unitText.qty_2) !== null && _unitText$qty_2 !== void 0 ? _unitText$qty_2 : \"\", \" \").concat((_unitText$unit_2 = unitText.unit_2) !== null && _unitText$unit_2 !== void 0 ? _unitText$unit_2 : \"\", \" \");\n    var unit3 = \"\".concat((_unitText$qty_3 = unitText.qty_3) !== null && _unitText$qty_3 !== void 0 ? _unitText$qty_3 : \"\", \" \").concat((_unitText$unit_3 = unitText.unit_3) !== null && _unitText$unit_3 !== void 0 ? _unitText$unit_3 : \"\", \" \");\n    var unit4 = \"\".concat((_unitText$qty_4 = unitText.qty_4) !== null && _unitText$qty_4 !== void 0 ? _unitText$qty_4 : \"\", \" \").concat((_unitText$unit_4 = unitText.unit_4) !== null && _unitText$unit_4 !== void 0 ? _unitText$unit_4 : \"\", \" \");\n    var unit5 = \"\".concat((_unitText$qty_5 = unitText.qty_5) !== null && _unitText$qty_5 !== void 0 ? _unitText$qty_5 : \"\", \" \").concat((_unitText$unit_5 = unitText.unit_5) !== null && _unitText$unit_5 !== void 0 ? _unitText$unit_5 : \"\", \" \");\n    var descUnit = unit1 + unit2 + unit3 + unit4 + unit5;\n    setDescUnit(descUnit);\n  };\n\n  var onFinishFailed = function onFinishFailed() {\n    var error = form.getFieldsError();\n    error.forEach(function (value) {\n      if (value.errors.length !== 0) {\n        var errorMsg = value.errors[0];\n\n        _notification[\"error\"]({\n          message: \"Field Masih Kosong\",\n          description: errorMsg\n        });\n      }\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Head, {\n      children: /*#__PURE__*/_jsxDEV(\"title\", {\n        children: \"Edit Produk\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 337,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 336,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(DashboardLayout, {\n      children: /*#__PURE__*/_jsxDEV(LayoutWrapper, {\n        style: {},\n        children: [/*#__PURE__*/_jsxDEV(TitlePage, {\n          titleText: \"Edit Produk\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 341,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(LayoutContent, {\n          children: /*#__PURE__*/_jsxDEV(_Form, {\n            form: form,\n            name: \"edit_product\",\n            initialValues: {\n              remember: true\n            },\n            onFinish: onFinish,\n            onFinishFailed: onFinishFailed,\n            onValuesChange: handleValueChange,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex flex-wrap -mx-3 mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-full md:w-1/3 px-3 mb-2 md:mb-0\",\n                children: [/*#__PURE__*/_jsxDEV(_Form.Item, {\n                  name: \"name\",\n                  initialValue: product === null || product === void 0 ? void 0 : (_product$attributes7 = product.attributes) === null || _product$attributes7 === void 0 ? void 0 : _product$attributes7.name,\n                  rules: [{\n                    required: true,\n                    message: \"Nama Produk tidak boleh kosong!\"\n                  }],\n                  children: /*#__PURE__*/_jsxDEV(_Input, {\n                    style: {\n                      height: \"40px\"\n                    },\n                    placeholder: \"Nama Produk\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 365,\n                    columnNumber: 21\n                  }, _this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 355,\n                  columnNumber: 19\n                }, _this), /*#__PURE__*/_jsxDEV(Categories, {\n                  initialValue: \"\".concat(initCategory.attributes.category_id, \" - \").concat(initCategory.attributes.name),\n                  selectedCategory: category,\n                  onSelectCategory: setCategory,\n                  setSubCategories: setSubCategories,\n                  setSelectedSubCategory: setSelectedSubCategory,\n                  selectedSubCategory: selectedSubCategory\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 370,\n                  columnNumber: 19\n                }, _this), /*#__PURE__*/_jsxDEV(SubCategories, {\n                  subCategories: subCategories,\n                  onSelect: setSelectedSubCategory,\n                  selectedSubCategory: selectedSubCategory,\n                  initialValue: \"\".concat((_product$attributes$s = (_product$attributes8 = product.attributes) === null || _product$attributes8 === void 0 ? void 0 : (_product$attributes8$ = _product$attributes8.sub_category) === null || _product$attributes8$ === void 0 ? void 0 : (_product$attributes8$2 = _product$attributes8$.data) === null || _product$attributes8$2 === void 0 ? void 0 : _product$attributes8$2.attributes.name) !== null && _product$attributes$s !== void 0 ? _product$attributes$s : \"\")\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 378,\n                  columnNumber: 19\n                }, _this), /*#__PURE__*/_jsxDEV(_Form.Item, {\n                  name: \"description\",\n                  initialValue: (_product$attributes$d = (_product$attributes9 = product.attributes) === null || _product$attributes9 === void 0 ? void 0 : _product$attributes9.description) !== null && _product$attributes$d !== void 0 ? _product$attributes$d : \"\",\n                  children: /*#__PURE__*/_jsxDEV(TextArea, {\n                    rows: 4,\n                    placeholder: \"Deskripsi\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 391,\n                    columnNumber: 21\n                  }, _this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 387,\n                  columnNumber: 19\n                }, _this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 354,\n                columnNumber: 17\n              }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-full md:w-1/3 px-3 mb-2 md:mb-0\",\n                children: [/*#__PURE__*/_jsxDEV(_Form.Item, {\n                  name: \"SKU\",\n                  rules: [{\n                    required: true,\n                    message: \"SKU tidak boleh kosong!\"\n                  }],\n                  initialValue: (_product$attributes$S = (_product$attributes10 = product.attributes) === null || _product$attributes10 === void 0 ? void 0 : _product$attributes10.SKU) !== null && _product$attributes$S !== void 0 ? _product$attributes$S : \"\",\n                  children: /*#__PURE__*/_jsxDEV(_Input, {\n                    style: {\n                      height: \"40px\"\n                    },\n                    placeholder: \"SKU\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 405,\n                    columnNumber: 21\n                  }, _this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 395,\n                  columnNumber: 19\n                }, _this), /*#__PURE__*/_jsxDEV(Manufactures, {\n                  data: manufactures.data,\n                  initialValue: (_product$attributes11 = product.attributes) === null || _product$attributes11 === void 0 ? void 0 : (_product$attributes12 = _product$attributes11.manufacture) === null || _product$attributes12 === void 0 ? void 0 : _product$attributes12.data,\n                  onSelect: setSelectedManufactures\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 407,\n                  columnNumber: 19\n                }, _this), /*#__PURE__*/_jsxDEV(Groups, {\n                  data: groups,\n                  onSelect: setSelectedGroup,\n                  initialValue: (_product$attributes13 = product.attributes) === null || _product$attributes13 === void 0 ? void 0 : (_product$attributes14 = _product$attributes13.group) === null || _product$attributes14 === void 0 ? void 0 : _product$attributes14.data\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 412,\n                  columnNumber: 19\n                }, _this), /*#__PURE__*/_jsxDEV(Locations, {\n                  required: true,\n                  data: locations,\n                  onSelect: setSelectLocation,\n                  initialValue: (_product$attributes15 = product.attributes) === null || _product$attributes15 === void 0 ? void 0 : _product$attributes15.locations.data\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 417,\n                  columnNumber: 19\n                }, _this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 394,\n                columnNumber: 17\n              }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-full md:w-1/3 px-3 mb-2 md:mb-0\",\n                children: /*#__PURE__*/_jsxDEV(Dragger, _objectSpread(_objectSpread({}, propsDagger), {}, {\n                  children: image == null ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"ant-upload-drag-icon\",\n                      children: /*#__PURE__*/_jsxDEV(_FileImageOutlined, {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 430,\n                        columnNumber: 27\n                      }, _this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 429,\n                      columnNumber: 25\n                    }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"ant-upload-text\",\n                      children: \"Klik atau tarik gambar ke kotak ini\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 432,\n                      columnNumber: 25\n                    }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"ant-upload-hint  m-3\",\n                      children: \"Gambar akan digunakan sebagai contoh tampilan produk\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 435,\n                      columnNumber: 25\n                    }, _this)]\n                  }, void 0, true) : /*#__PURE__*/_jsxDEV(Image, {\n                    layout: \"fill\",\n                    loader: imageLoader,\n                    src: process.env.NEXT_PUBLIC_URL + (image === null || image === void 0 ? void 0 : image.url)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 440,\n                    columnNumber: 23\n                  }, _this)\n                }), void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 426,\n                  columnNumber: 19\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 425,\n                columnNumber: 17\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 353,\n              columnNumber: 15\n            }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(\"h6\", {\n                className: \"\",\n                children: \"HARGA\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 451,\n                columnNumber: 17\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 450,\n              columnNumber: 15\n            }, _this), /*#__PURE__*/_jsxDEV(UnitTable, {\n              initialValue: product.attributes,\n              getDescUnit: getDescriptionUnit,\n              descUnit: descUnit\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 454,\n              columnNumber: 15\n            }, _this), /*#__PURE__*/_jsxDEV(_Form.Item, {\n              children: loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \" flex float-left ml-3 \",\n                children: /*#__PURE__*/_jsxDEV(_Spin, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 463,\n                  columnNumber: 21\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 462,\n                columnNumber: 19\n              }, _this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(ConfirmDialog, {\n                  onConfirm: function onConfirm() {\n                    var _submitBtn$current;\n\n                    return submitBtn === null || submitBtn === void 0 ? void 0 : (_submitBtn$current = submitBtn.current) === null || _submitBtn$current === void 0 ? void 0 : _submitBtn$current.click();\n                  },\n                  onCancel: function onCancel() {},\n                  title: \"Edit Produk\",\n                  message: \"Apakah anda yakin ingin mengedit produk ini?\",\n                  component: /*#__PURE__*/_jsxDEV(_Button, {\n                    className: \" hover:text-white hover:bg-cyan-700 border border-cyan-700 ml-1\",\n                    children: \"Simpan\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 473,\n                    columnNumber: 25\n                  }, _this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 467,\n                  columnNumber: 21\n                }, _this), /*#__PURE__*/_jsxDEV(_Button, {\n                  htmlType: \"submit\",\n                  ref: submitBtn\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 478,\n                  columnNumber: 21\n                }, _this)]\n              }, void 0, true)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 460,\n              columnNumber: 15\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 343,\n            columnNumber: 13\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 342,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 340,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 339,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true);\n};\n\n_s(Edit, \"xyv4mApfi9GZ2rz8bdFRotdCweY=\", false, function () {\n  return [_Form.useForm, useRouter];\n});\n\n_c = Edit;\n\nEdit.getInitialProps = /*#__PURE__*/function () {\n  var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(context) {\n    var _product$data$attribu;\n\n    var cookies, reqProduct, product, categoryId, reqCategories, categories, reqGroups, groups, reqLocations, locations, reqManufactures, manufactures, reqSubCategories, subCategories;\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            cookies = nookies.get(context);\n            _context3.next = 3;\n            return fetchProduct(cookies, context);\n\n          case 3:\n            reqProduct = _context3.sent;\n            _context3.next = 6;\n            return reqProduct.json();\n\n          case 6:\n            product = _context3.sent;\n            categoryId = (_product$data$attribu = product.data.attributes.category.data) === null || _product$data$attribu === void 0 ? void 0 : _product$data$attribu.id;\n            _context3.next = 10;\n            return fetchDataCategories(cookies);\n\n          case 10:\n            reqCategories = _context3.sent;\n            _context3.next = 13;\n            return reqCategories.json();\n\n          case 13:\n            categories = _context3.sent;\n            _context3.next = 16;\n            return fetchDataGroups(cookies);\n\n          case 16:\n            reqGroups = _context3.sent;\n            _context3.next = 19;\n            return reqGroups.json();\n\n          case 19:\n            groups = _context3.sent;\n            _context3.next = 22;\n            return fetchDataLocations(cookies);\n\n          case 22:\n            reqLocations = _context3.sent;\n            _context3.next = 25;\n            return reqLocations.json();\n\n          case 25:\n            locations = _context3.sent;\n            _context3.next = 28;\n            return fetchDataManufactures(cookies);\n\n          case 28:\n            reqManufactures = _context3.sent;\n            _context3.next = 31;\n            return reqManufactures.json();\n\n          case 31:\n            manufactures = _context3.sent;\n            _context3.next = 34;\n            return fetchDataSubCategories(cookies, categoryId);\n\n          case 34:\n            reqSubCategories = _context3.sent;\n            _context3.next = 37;\n            return reqSubCategories.json();\n\n          case 37:\n            subCategories = _context3.sent;\n            return _context3.abrupt(\"return\", {\n              props: {\n                product: product,\n                categories: categories,\n                groups: groups,\n                locations: locations,\n                manufactures: manufactures,\n                subCategories: subCategories\n              }\n            });\n\n          case 39:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n\n  return function (_x2) {\n    return _ref4.apply(this, arguments);\n  };\n}();\n\nvar fetchProduct = /*#__PURE__*/function () {\n  var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(cookies, context) {\n    var id, endpoint, options, req;\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            id = context.query.id;\n            endpoint = process.env.NEXT_PUBLIC_URL + \"/products/\" + id + \"?populate=*\";\n            options = {\n              method: \"GET\",\n              headers: {\n                \"Content-Type\": \"application/json\",\n                Authorization: \"Bearer \" + cookies.token\n              }\n            };\n            _context4.next = 5;\n            return fetch(endpoint, options);\n\n          case 5:\n            req = _context4.sent;\n            return _context4.abrupt(\"return\", req);\n\n          case 7:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4);\n  }));\n\n  return function fetchProduct(_x3, _x4) {\n    return _ref5.apply(this, arguments);\n  };\n}();\n\nvar fetchDataCategories = /*#__PURE__*/function () {\n  var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(cookies) {\n    var endpoint, options, req;\n    return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            endpoint = process.env.NEXT_PUBLIC_URL + \"/categories\";\n            options = {\n              method: \"GET\",\n              headers: {\n                \"Content-Type\": \"application/json\",\n                Authorization: \"Bearer \" + cookies.token\n              }\n            };\n            _context5.next = 4;\n            return fetch(endpoint, options);\n\n          case 4:\n            req = _context5.sent;\n            return _context5.abrupt(\"return\", req);\n\n          case 6:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    }, _callee5);\n  }));\n\n  return function fetchDataCategories(_x5) {\n    return _ref6.apply(this, arguments);\n  };\n}();\n\nvar fetchDataManufactures = /*#__PURE__*/function () {\n  var _ref7 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6(cookies) {\n    var endpoint, options, req;\n    return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n      while (1) {\n        switch (_context6.prev = _context6.next) {\n          case 0:\n            endpoint = process.env.NEXT_PUBLIC_URL + \"/manufactures\";\n            options = {\n              method: \"GET\",\n              headers: {\n                \"Content-Type\": \"application/json\",\n                Authorization: \"Bearer \" + cookies.token\n              }\n            };\n            _context6.next = 4;\n            return fetch(endpoint, options);\n\n          case 4:\n            req = _context6.sent;\n            return _context6.abrupt(\"return\", req);\n\n          case 6:\n          case \"end\":\n            return _context6.stop();\n        }\n      }\n    }, _callee6);\n  }));\n\n  return function fetchDataManufactures(_x6) {\n    return _ref7.apply(this, arguments);\n  };\n}();\n\nvar fetchDataSubCategories = /*#__PURE__*/function () {\n  var _ref8 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7(cookies, categoryId) {\n    var endpoint, options, req;\n    return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n      while (1) {\n        switch (_context7.prev = _context7.next) {\n          case 0:\n            endpoint = process.env.NEXT_PUBLIC_URL + \"/sub-categories?populate[category][filters][id][$eq]=\" + categoryId;\n            options = {\n              method: \"GET\",\n              headers: {\n                \"Content-Type\": \"application/json\",\n                Authorization: \"Bearer \" + cookies.token\n              }\n            };\n            _context7.next = 4;\n            return fetch(endpoint, options);\n\n          case 4:\n            req = _context7.sent;\n            return _context7.abrupt(\"return\", req);\n\n          case 6:\n          case \"end\":\n            return _context7.stop();\n        }\n      }\n    }, _callee7);\n  }));\n\n  return function fetchDataSubCategories(_x7, _x8) {\n    return _ref8.apply(this, arguments);\n  };\n}();\n\nvar fetchDataGroups = /*#__PURE__*/function () {\n  var _ref9 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8(cookies) {\n    var endpoint, options, req;\n    return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n      while (1) {\n        switch (_context8.prev = _context8.next) {\n          case 0:\n            endpoint = process.env.NEXT_PUBLIC_URL + \"/groups\";\n            options = {\n              method: \"GET\",\n              headers: {\n                \"Content-Type\": \"application/json\",\n                Authorization: \"Bearer \" + cookies.token\n              }\n            };\n            _context8.next = 4;\n            return fetch(endpoint, options);\n\n          case 4:\n            req = _context8.sent;\n            return _context8.abrupt(\"return\", req);\n\n          case 6:\n          case \"end\":\n            return _context8.stop();\n        }\n      }\n    }, _callee8);\n  }));\n\n  return function fetchDataGroups(_x9) {\n    return _ref9.apply(this, arguments);\n  };\n}();\n\nvar fetchDataLocations = /*#__PURE__*/function () {\n  var _ref10 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee9(cookies) {\n    var endpoint, options, req;\n    return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n      while (1) {\n        switch (_context9.prev = _context9.next) {\n          case 0:\n            endpoint = process.env.NEXT_PUBLIC_URL + \"/locations\";\n            options = {\n              method: \"GET\",\n              headers: {\n                \"Content-Type\": \"application/json\",\n                Authorization: \"Bearer \" + cookies.token\n              }\n            };\n            _context9.next = 4;\n            return fetch(endpoint, options);\n\n          case 4:\n            req = _context9.sent;\n            return _context9.abrupt(\"return\", req);\n\n          case 6:\n          case \"end\":\n            return _context9.stop();\n        }\n      }\n    }, _callee9);\n  }));\n\n  return function fetchDataLocations(_x10) {\n    return _ref10.apply(this, arguments);\n  };\n}();\n\nexport default Edit;\n\nvar _c;\n\n$RefreshReg$(_c, \"Edit\");","map":{"version":3,"sources":["/Users/yudiananta/Development/NextJS/ERP Dev/JS Deploy/JS-Deploy/pages/dashboard/produk/edit/[id].js"],"names":["useRef","useState","Head","LayoutContent","LayoutWrapper","nookies","toast","useRouter","Image","DashboardLayout","TitlePage","Categories","Manufactures","SubCategories","Groups","Locations","UnitTable","ConfirmDialog","setHargaValue","setDiskonValue","Edit","props","productId","product","data","id","manufactures","groups","locations","initCategory","attributes","category","subCategory","sub_category","initManufacture","manufacture","initGroup","group","image","setImage","setCategory","idCategory","setIdCategory","idManufacture","setIdManufacture","uploadedOnce","setUploadedOnce","fileList","setFileList","firstInput","setFirstInputDiskon","useForm","form","loading","setLoading","cookies","get","router","submitBtn","Dragger","TextArea","selectedManufactures","setSelectedManufactures","selectedGroups","setSelectedGroup","selectLocations","setSelectLocation","subCategories","setSubCategories","selectedSubCategory","setSelectedSubCategory","descUnit","setDescUnit","locationsList","locationNameList","forEach","element","push","name","imageLoader","src","process","env","NEXT_PUBLIC_URL","url","propsDagger","multiple","showUploadList","showDownloadIcon","showRemoveIcon","onRemove","info","onChange","length","endpoint","file","originFileObj","FormData","append","options","method","headers","Authorization","token","body","fetch","req","json","res","status","success","error","categoryChecker","values","category_id","parseInt","subCategoryChecker","manufactureChecker","groupChecker","onFinish","console","log","categoryID","subCategoryID","manufacturesID","groupID","map","location","value","putData","key","undefined","isNaN","index","dataPut","JSONdata","JSON","stringify","position","POSITION","TOP_RIGHT","handleValueChange","changedValues","allValues","fieldName","Object","keys","unitArr","split","unit","getDescriptionUnit","unitText","getFieldsValue","unit1","qty_1","unit_1","unit2","qty_2","unit_2","unit3","qty_3","unit_3","unit4","qty_4","unit_4","unit5","qty_5","unit_5","onFinishFailed","getFieldsError","errors","errorMsg","message","description","remember","required","height","SKU","current","click","getInitialProps","context","fetchProduct","reqProduct","categoryId","fetchDataCategories","reqCategories","categories","fetchDataGroups","reqGroups","fetchDataLocations","reqLocations","fetchDataManufactures","reqManufactures","fetchDataSubCategories","reqSubCategories","query"],"mappings":"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","sourcesContent":["import { useRef, useState } from \"react\";\nimport Head from \"next/head\";\nimport LayoutContent from \"@iso/components/utility/layoutContent\";\nimport LayoutWrapper from \"@iso/components/utility/layoutWrapper.js\";\nimport { Button, Form, Input, message, Upload, notification } from \"antd\";\nimport nookies from \"nookies\";\nimport { toast } from \"react-toastify\";\nimport { Spin, Row } from \"antd\";\nimport { useRouter } from \"next/router\";\nimport Image from \"next/image\";\nimport { FileImageOutlined } from \"@ant-design/icons\";\nimport DashboardLayout from \"../../../../containers/DashboardLayout/DashboardLayout\";\nimport TitlePage from \"../../../../components/TitlePage/TitlePage\";\nimport Categories from \"../../../../components/Form/AddProduct/Categories\";\nimport Manufactures from \"../../../../components/Form/AddProduct/Manufactures\";\nimport SubCategories from \"../../../../components/Form/AddProduct/subCategories\";\nimport Groups from \"../../../../components/Form/AddProduct/Groups\";\nimport Locations from \"../../../../components/Form/AddProduct/Locations\";\nimport UnitTable from \"../../../../components/ReactDataTable/Product/UnitsTable\";\nimport ConfirmDialog from \"../../../../components/Alert/ConfirmDialog\";\nimport setHargaValue from \"../utility/setHargaValue\";\nimport setDiskonValue from \"../utility/setDiskonValue\";\n\nconst Edit = ({ props }) => {\n  const productId = props?.product.data.id;\n  const product = props?.product?.data;\n  const manufactures = props?.manufactures;\n  const groups = props?.groups;\n  const locations = props?.locations;\n  const initCategory = product?.attributes?.category?.data;\n  const subCategory = product?.attributes?.sub_category?.data;\n  const initManufacture = product?.attributes?.manufacture?.data;\n  const initGroup = product?.attributes?.group?.data;\n\n  const [image, setImage] = useState(\n    product.attributes?.image?.data\n      ? product.attributes?.image?.data[0].attributes\n      : null\n  );\n\n  const [category, setCategory] = useState();\n  const [idCategory, setIdCategory] = useState(initCategory.id);\n  const [idManufacture, setIdManufacture] = useState(initManufacture.id);\n  const [uploadedOnce, setUploadedOnce] = useState(true);\n  const [fileList, setFileList] = useState([]);\n  const [firstInput, setFirstInputDiskon] = useState(true);\n  const [form] = Form.useForm();\n  const [loading, setLoading] = useState(false);\n  const cookies = nookies.get(null, \"token\");\n  const router = useRouter();\n  const submitBtn = useRef();\n\n  const { Dragger } = Upload;\n  const { TextArea } = Input;\n\n  const [selectedManufactures, setSelectedManufactures] = useState({});\n  const [selectedGroups, setSelectedGroup] = useState({});\n  const [selectLocations, setSelectLocation] = useState();\n\n  const [subCategories, setSubCategories] = useState([]);\n  const [selectedSubCategory, setSelectedSubCategory] = useState();\n\n  const [descUnit, setDescUnit] = useState();\n\n  function locationsList() {\n    const locationNameList = [];\n    locations.data.forEach((element) => {\n      locationNameList.push(element.attributes.name);\n    });\n\n    return locationNameList;\n  }\n\n  const imageLoader = ({ src }) => {\n    return process.env.NEXT_PUBLIC_URL + image?.url;\n  };\n\n  const propsDagger = {\n    name: \"files\",\n    multiple: false,\n    fileList: fileList,\n    showUploadList: {\n      showDownloadIcon: false,\n      showRemoveIcon: true,\n    },\n\n    onRemove(info) {\n      setUploadedOnce(true);\n      setImage();\n      setFileList([]);\n    },\n\n    async onChange(info) {\n      if (info.fileList.length === 1) {\n        const endpoint = process.env.NEXT_PUBLIC_URL + \"/upload\";\n        const file = info.file.originFileObj;\n        const data = new FormData();\n        data.append(\"files\", file);\n\n        setFileList(info.fileList);\n\n        const options = {\n          method: \"POST\",\n          headers: {\n            Authorization: \"Bearer \" + cookies.token,\n          },\n          body: data,\n        };\n\n        if (uploadedOnce) {\n          setUploadedOnce(false);\n          const req = await fetch(endpoint, options);\n          const res = await req.json();\n\n          if (req.status === 200) {\n            setImage(res[0]);\n\n            message.success(`${info.file.name} berhasil diupload`);\n          } else {\n            message.error(`${info.file.name} gagal upload`);\n          }\n        }\n      } else if (info.fileList.length === 0) {\n        message.info(`Gambar berhasil dihapus`);\n      } else {\n        message.error(`Hanya dapat menambahkan 1 gambar`);\n      }\n    },\n  };\n\n  const categoryChecker = (values) => {\n    if (\n      values.category_id ===\n      `${initCategory.attributes.category_id} - ${initCategory.attributes.name}`\n    ) {\n      values.category_id = idCategory;\n    } else {\n      values.category_id = parseInt(values.category_id);\n    }\n\n    return values;\n  };\n\n  const subCategoryChecker = (values) => {\n    if (values.subCategories === subCategory?.attributes.name) {\n      values.subCategories = subCategory.id;\n    } else if (!subCategory) {\n    } else {\n      values.subCategories = parseInt(values.subCategories);\n    }\n\n    return values;\n  };\n\n  const manufactureChecker = (values) => {\n    if (values.manufactures === initManufacture?.attributes.name) {\n      values.manufactures = initManufacture.id;\n    } else if (!initManufacture) {\n    } else {\n      values.manufactures = parseInt(values.manufactures);\n    }\n\n    return values;\n  };\n\n  const groupChecker = (values) => {\n    if (values.groups === initGroup?.attributes.name) {\n      values.groups = initGroup.id;\n    } else if (!initGroup) {\n    } else {\n      values.groups = parseInt(values.groups);\n    }\n\n    return values;\n  };\n\n  const onFinish = async (values) => {\n    console.log(\"values\", values);\n\n    setLoading(true);\n    values = categoryChecker(values);\n    values = subCategoryChecker(values);\n    values = manufactureChecker(values);\n    values = groupChecker(values);\n\n    const categoryID = {\n      id: parseInt(values?.category_id),\n    };\n\n    const subCategoryID = {\n      id: parseInt(values?.subCategories) ?? null,\n    };\n\n    const manufacturesID = {\n      id: parseInt(values?.manufactures),\n    };\n\n    const groupID = {\n      id: parseInt(values?.groups),\n    };\n\n    values.locations =\n      values?.locations?.map((location) => {\n        if (location.value) {\n          return { id: location.value };\n        }\n\n        return { id: location };\n      }) || [];\n\n    delete values.category_id;\n    delete values.subCategories;\n    delete values.manufactures;\n    delete values.groups;\n\n    const putData = {\n      // ...values,\n      category: categoryID,\n      sub_category: subCategoryID,\n      manufacture: manufacturesID,\n      group: groupID,\n      image: { id: image?.id },\n    };\n\n    if (putData.sub_category.id === \"\") {\n      delete putData.sub_category;\n    }\n\n    // remove undefined or null value from data\n    for (const key in values) {\n      if (values[key] === undefined || values[key] === null) {\n        delete values[key];\n      }\n    }\n\n    // remove undefined or null value from data\n    for (const key in putData) {\n      if (putData[key]?.id === null || isNaN(putData[key]?.id)) {\n        delete putData[key];\n      }\n    }\n\n    const data = {\n      ...values,\n      ...putData,\n    };\n\n    for (let index = 1; index < 6; index++) {\n      if (data[`purchase_discount_${index}`] === \"-\")\n        delete data[`purchase_discount_${index}`];\n    }\n\n    const dataPut = { data: data };\n    const JSONdata = JSON.stringify(dataPut);\n\n    console.log(\"tester\", putData);\n\n   \n\n    const options = {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + cookies.token,\n      },\n      body: JSONdata,\n    };\n\n    const endpoint = process.env.NEXT_PUBLIC_URL + \"/products/\" + productId;\n    const req = await fetch(endpoint, options);\n    const res = await req.json();\n\n    if (req.status === 200) {\n      toast.success(\"Produk berhasil diperbarui!\", {\n        position: toast.POSITION.TOP_RIGHT,\n      });\n      router.push(\"/dashboard/produk\");\n    } else {\n      console.log(res);\n      toast.error(\"Tidak dapat memperbarui Produk\", {\n        position: toast.POSITION.TOP_RIGHT,\n      });\n    }\n\n    setLoading(false);\n  };\n\n  const handleValueChange = (changedValues, allValues) => {\n    const fieldName = Object.keys(changedValues)[0];\n    const unitArr = fieldName.split(\"_\");\n    const unit = unitArr[unitArr.length - 1];\n\n    setDiskonValue(form, changedValues, allValues, fieldName, firstInput);\n    setHargaValue(form, changedValues, allValues, unit, firstInput);\n  };\n\n  const getDescriptionUnit = () => {\n    const unitText = form.getFieldsValue([\n      \"unit_1\",\n      \"qty_1\",\n      \"unit_2\",\n      \"qty_2\",\n      \"unit_3\",\n      \"qty_3\",\n      \"unit_4\",\n      \"qty_4\",\n      \"unit_5\",\n      \"qty_5\",\n    ]);\n\n    let unit1 = `${unitText.qty_1 ?? \"\"} ${unitText.unit_1 ?? \"\"} `;\n    let unit2 = `${unitText.qty_2 ?? \"\"} ${unitText.unit_2 ?? \"\"} `;\n    let unit3 = `${unitText.qty_3 ?? \"\"} ${unitText.unit_3 ?? \"\"} `;\n    let unit4 = `${unitText.qty_4 ?? \"\"} ${unitText.unit_4 ?? \"\"} `;\n    let unit5 = `${unitText.qty_5 ?? \"\"} ${unitText.unit_5 ?? \"\"} `;\n\n    let descUnit = unit1 + unit2 + unit3 + unit4 + unit5;\n    setDescUnit(descUnit);\n  };\n\n  const onFinishFailed = () => {\n    const error = form.getFieldsError();\n    error.forEach((value) => {\n      if (value.errors.length !== 0) {\n        let errorMsg = value.errors[0];\n        notification[\"error\"]({\n          message: \"Field Masih Kosong\",\n          description: errorMsg,\n        });\n      }\n    });\n  };\n\n  return (\n    <>\n      <Head>\n        <title>Edit Produk</title>\n      </Head>\n      <DashboardLayout>\n        <LayoutWrapper style={{}}>\n          <TitlePage titleText={\"Edit Produk\"} />\n          <LayoutContent>\n            <Form\n              form={form}\n              name=\"edit_product\"\n              initialValues={{\n                remember: true,\n              }}\n              onFinish={onFinish}\n              onFinishFailed={onFinishFailed}\n              onValuesChange={handleValueChange}\n            >\n              <div className=\"flex flex-wrap -mx-3 mb-3\">\n                <div className=\"w-full md:w-1/3 px-3 mb-2 md:mb-0\">\n                  <Form.Item\n                    name=\"name\"\n                    initialValue={product?.attributes?.name}\n                    rules={[\n                      {\n                        required: true,\n                        message: \"Nama Produk tidak boleh kosong!\",\n                      },\n                    ]}\n                  >\n                    <Input\n                      style={{ height: \"40px\" }}\n                      placeholder=\"Nama Produk\"\n                    />\n                  </Form.Item>\n                  <Categories\n                    initialValue={`${initCategory.attributes.category_id} - ${initCategory.attributes.name}`}\n                    selectedCategory={category}\n                    onSelectCategory={setCategory}\n                    setSubCategories={setSubCategories}\n                    setSelectedSubCategory={setSelectedSubCategory}\n                    selectedSubCategory={selectedSubCategory}\n                  />\n                  <SubCategories\n                    subCategories={subCategories}\n                    onSelect={setSelectedSubCategory}\n                    selectedSubCategory={selectedSubCategory}\n                    initialValue={`${\n                      product.attributes?.sub_category?.data?.attributes.name ??\n                      \"\"\n                    }`}\n                  />\n                  <Form.Item\n                    name=\"description\"\n                    initialValue={product.attributes?.description ?? \"\"}\n                  >\n                    <TextArea rows={4} placeholder=\"Deskripsi\" />\n                  </Form.Item>\n                </div>\n                <div className=\"w-full md:w-1/3 px-3 mb-2 md:mb-0\">\n                  <Form.Item\n                    name=\"SKU\"\n                    rules={[\n                      {\n                        required: true,\n                        message: \"SKU tidak boleh kosong!\",\n                      },\n                    ]}\n                    initialValue={product.attributes?.SKU ?? \"\"}\n                  >\n                    <Input style={{ height: \"40px\" }} placeholder=\"SKU\" />\n                  </Form.Item>\n                  <Manufactures\n                    data={manufactures.data}\n                    initialValue={product.attributes?.manufacture?.data}\n                    onSelect={setSelectedManufactures}\n                  />\n                  <Groups\n                    data={groups}\n                    onSelect={setSelectedGroup}\n                    initialValue={product.attributes?.group?.data}\n                  />\n                  <Locations\n                    required={true}\n                    data={locations}\n                    onSelect={setSelectLocation}\n                    initialValue={product.attributes?.locations.data}\n                  />\n                </div>\n\n                <div className=\"w-full md:w-1/3 px-3 mb-2 md:mb-0\">\n                  <Dragger {...propsDagger}>\n                    {image == null ? (\n                      <>\n                        <p className=\"ant-upload-drag-icon\">\n                          <FileImageOutlined />\n                        </p>\n                        <p className=\"ant-upload-text\">\n                          Klik atau tarik gambar ke kotak ini\n                        </p>\n                        <p className=\"ant-upload-hint  m-3\">\n                          Gambar akan digunakan sebagai contoh tampilan produk\n                        </p>\n                      </>\n                    ) : (\n                      <Image\n                        layout=\"fill\"\n                        loader={imageLoader}\n                        src={process.env.NEXT_PUBLIC_URL + image?.url}\n                      />\n                    )}\n                  </Dragger>\n                </div>\n              </div>\n\n              <div>\n                <h6 className=\"\">HARGA</h6>\n              </div>\n\n              <UnitTable\n                initialValue={product.attributes}\n                getDescUnit={getDescriptionUnit}\n                descUnit={descUnit}\n              />\n\n              <Form.Item>\n                {loading ? (\n                  <div className=\" flex float-left ml-3 \">\n                    <Spin />\n                  </div>\n                ) : (\n                  <>\n                    <ConfirmDialog\n                      onConfirm={() => submitBtn?.current?.click()}\n                      onCancel={() => {}}\n                      title=\"Edit Produk\"\n                      message=\"Apakah anda yakin ingin mengedit produk ini?\"\n                      component={\n                        <Button className=\" hover:text-white hover:bg-cyan-700 border border-cyan-700 ml-1\">\n                          Simpan\n                        </Button>\n                      }\n                    />\n                    <Button htmlType=\"submit\" ref={submitBtn}></Button>\n                  </>\n                )}\n              </Form.Item>\n            </Form>\n          </LayoutContent>\n        </LayoutWrapper>\n      </DashboardLayout>\n    </>\n  );\n};\n\nEdit.getInitialProps = async (context) => {\n  const cookies = nookies.get(context);\n\n  const reqProduct = await fetchProduct(cookies, context);\n  const product = await reqProduct.json();\n\n  const categoryId = product.data.attributes.category.data?.id;\n\n  const reqCategories = await fetchDataCategories(cookies);\n  const categories = await reqCategories.json();\n\n  const reqGroups = await fetchDataGroups(cookies);\n  const groups = await reqGroups.json();\n\n  const reqLocations = await fetchDataLocations(cookies);\n  const locations = await reqLocations.json();\n\n  const reqManufactures = await fetchDataManufactures(cookies);\n  const manufactures = await reqManufactures.json();\n\n  const reqSubCategories = await fetchDataSubCategories(cookies, categoryId);\n  const subCategories = await reqSubCategories.json();\n\n  return {\n    props: {\n      product,\n      categories,\n      groups,\n      locations,\n      manufactures,\n      subCategories,\n    },\n  };\n};\n\nconst fetchProduct = async (cookies, context) => {\n  const id = context.query.id;\n  const endpoint =\n    process.env.NEXT_PUBLIC_URL + \"/products/\" + id + \"?populate=*\";\n  const options = {\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: \"Bearer \" + cookies.token,\n    },\n  };\n  const req = await fetch(endpoint, options);\n\n  return req;\n};\n\nconst fetchDataCategories = async (cookies) => {\n  const endpoint = process.env.NEXT_PUBLIC_URL + \"/categories\";\n  const options = {\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: \"Bearer \" + cookies.token,\n    },\n  };\n\n  const req = await fetch(endpoint, options);\n  return req;\n};\n\nconst fetchDataManufactures = async (cookies) => {\n  const endpoint = process.env.NEXT_PUBLIC_URL + \"/manufactures\";\n  const options = {\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: \"Bearer \" + cookies.token,\n    },\n  };\n\n  const req = await fetch(endpoint, options);\n  return req;\n};\n\nconst fetchDataSubCategories = async (cookies, categoryId) => {\n  const endpoint =\n    process.env.NEXT_PUBLIC_URL +\n    \"/sub-categories?populate[category][filters][id][$eq]=\" +\n    categoryId;\n  const options = {\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: \"Bearer \" + cookies.token,\n    },\n  };\n\n  const req = await fetch(endpoint, options);\n  return req;\n};\n\nconst fetchDataGroups = async (cookies) => {\n  const endpoint = process.env.NEXT_PUBLIC_URL + \"/groups\";\n  const options = {\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: \"Bearer \" + cookies.token,\n    },\n  };\n\n  const req = await fetch(endpoint, options);\n  return req;\n};\n\nconst fetchDataLocations = async (cookies) => {\n  const endpoint = process.env.NEXT_PUBLIC_URL + \"/locations\";\n  const options = {\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: \"Bearer \" + cookies.token,\n    },\n  };\n\n  const req = await fetch(endpoint, options);\n  return req;\n};\n\nexport default Edit;\n"]},"metadata":{},"sourceType":"module"}