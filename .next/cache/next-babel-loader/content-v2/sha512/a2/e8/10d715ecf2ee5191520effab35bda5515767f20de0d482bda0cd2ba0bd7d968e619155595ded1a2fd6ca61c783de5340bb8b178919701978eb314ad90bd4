{"ast":null,"code":"import _Button from \"antd/lib/button\";\nimport _Spin from \"antd/lib/spin\";\nimport _FileImageOutlined from \"@ant-design/icons/lib/icons/FileImageOutlined\";\nimport _message from \"antd/lib/message\";\nimport _Input from \"antd/lib/input\";\nimport _Upload from \"antd/lib/upload\";\nimport _Form from \"antd/lib/form\";\nvar _jsxFileName = \"/Users/yudiananta/Development/NextJS/ERP Dev/JS Deploy/ERP-Sejati/pages/dashboard/produk/edit/[id].js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { useRef, useState } from \"react\";\nimport Head from \"next/head\";\nimport LayoutContent from \"@iso/components/utility/layoutContent\";\nimport LayoutWrapper from \"@iso/components/utility/layoutWrapper.js\";\nimport nookies from \"nookies\";\nimport { toast } from \"react-toastify\";\nimport { useRouter } from \"next/router\";\nimport Image from \"next/image\";\nimport DashboardLayout from \"../../../../containers/DashboardLayout/DashboardLayout\";\nimport TitlePage from \"../../../../components/TitlePage/TitlePage\";\nimport Categories from \"../../../../components/Form/AddProduct/Categories\";\nimport Manufactures from \"../../../../components/Form/AddProduct/Manufactures\";\nimport SubCategories from \"../../../../components/Form/AddProduct/subCategories\";\nimport Groups from \"../../../../components/Form/AddProduct/Groups\";\nimport Locations from \"../../../../components/Form/AddProduct/Locations\";\nimport UnitTable from \"../../../../components/ReactDataTable/Product/UnitsTable\";\nimport ConfirmDialog from \"../../../../components/Alert/ConfirmDialog\";\nimport setHargaValue from \"../utility/setHargaValue\";\nimport setDiskonValue from \"../utility/setDiskonValue\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Edit = ({\n  props\n}) => {\n  var _props$product, _product$attributes, _product$attributes$c, _product$attributes2, _product$attributes2$, _product$attributes3, _product$attributes3$, _product$attributes4, _product$attributes4$, _product$attributes5, _product$attributes$s, _product$attributes6, _product$attributes6$, _product$attributes6$2, _product$attributes$d, _product$attributes7, _product$attributes$S, _product$attributes8, _product$attributes9, _product$attributes9$, _product$attributes10, _product$attributes11, _product$attributes12;\n\n  const productId = props === null || props === void 0 ? void 0 : props.product.data.id;\n  const product = props === null || props === void 0 ? void 0 : (_props$product = props.product) === null || _props$product === void 0 ? void 0 : _props$product.data;\n  const manufactures = props === null || props === void 0 ? void 0 : props.manufactures;\n  const groups = props === null || props === void 0 ? void 0 : props.groups;\n  const locations = props === null || props === void 0 ? void 0 : props.locations;\n  const initCategory = product === null || product === void 0 ? void 0 : (_product$attributes = product.attributes) === null || _product$attributes === void 0 ? void 0 : (_product$attributes$c = _product$attributes.category) === null || _product$attributes$c === void 0 ? void 0 : _product$attributes$c.data;\n  const subCategory = product === null || product === void 0 ? void 0 : (_product$attributes2 = product.attributes) === null || _product$attributes2 === void 0 ? void 0 : (_product$attributes2$ = _product$attributes2.sub_category) === null || _product$attributes2$ === void 0 ? void 0 : _product$attributes2$.data;\n  const {\n    0: image,\n    1: setImage\n  } = useState((_product$attributes3 = product.attributes) !== null && _product$attributes3 !== void 0 && (_product$attributes3$ = _product$attributes3.image) !== null && _product$attributes3$ !== void 0 && _product$attributes3$.data ? (_product$attributes4 = product.attributes) === null || _product$attributes4 === void 0 ? void 0 : (_product$attributes4$ = _product$attributes4.image) === null || _product$attributes4$ === void 0 ? void 0 : _product$attributes4$.data[0].attributes : null);\n  const {\n    0: category,\n    1: setCategory\n  } = useState();\n  const {\n    0: idCategory,\n    1: setIdCategory\n  } = useState(initCategory.id);\n  const {\n    0: uploadedOnce,\n    1: setUploadedOnce\n  } = useState(true);\n  const {\n    0: fileList,\n    1: setFileList\n  } = useState([]);\n  const {\n    0: firstInput,\n    1: setFirstInputDiskon\n  } = useState(true);\n\n  const [form] = _Form.useForm();\n\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(false);\n  const cookies = nookies.get(null, \"token\");\n  const router = useRouter();\n  const submitBtn = useRef();\n  const {\n    Dragger\n  } = _Upload;\n  const {\n    TextArea\n  } = _Input;\n  const {\n    0: selectedManufactures,\n    1: setSelectedManufactures\n  } = useState({});\n  const {\n    0: selectedGroups,\n    1: setSelectedGroup\n  } = useState({});\n  const {\n    0: selectLocations,\n    1: setSelectLocation\n  } = useState();\n  const {\n    0: subCategories,\n    1: setSubCategories\n  } = useState([]);\n  const {\n    0: selectedSubCategory,\n    1: setSelectedSubCategory\n  } = useState();\n\n  function locationsList() {\n    const locationNameList = [];\n    locations.data.forEach(element => {\n      locationNameList.push(element.attributes.name);\n    });\n    return locationNameList;\n  }\n\n  const imageLoader = ({\n    src\n  }) => {\n    return process.env.BASE_URL + (image === null || image === void 0 ? void 0 : image.url);\n  };\n\n  const propsDagger = {\n    name: \"files\",\n    multiple: false,\n    fileList: fileList,\n    showUploadList: {\n      showDownloadIcon: false,\n      showRemoveIcon: true\n    },\n\n    onRemove(info) {\n      setUploadedOnce(true);\n      setImage();\n      setFileList([]);\n    },\n\n    async onChange(info) {\n      if (info.fileList.length === 1) {\n        const endpoint = process.env.NEXT_PUBLIC_URL + \"/upload\";\n        const file = info.file.originFileObj;\n        const data = new FormData();\n        data.append(\"files\", file);\n        setFileList(info.fileList);\n        const options = {\n          method: \"POST\",\n          headers: {\n            Authorization: \"Bearer \" + cookies.token\n          },\n          body: data\n        };\n\n        if (uploadedOnce) {\n          setUploadedOnce(false);\n          const req = await fetch(endpoint, options);\n          const res = await req.json();\n\n          if (req.status === 200) {\n            setImage(res[0]);\n\n            _message.success(`${info.file.name} berhasil diupload`);\n          } else {\n            _message.error(`${info.file.name} gagal upload`);\n          }\n        }\n      } else if (info.fileList.length === 0) {\n        _message.info(`Gambar berhasil dihapus`);\n      } else {\n        _message.error(`Hanya dapat menambahkan 1 gambar`);\n      }\n    }\n\n  };\n\n  const categoryChecker = values => {\n    if (values.category_id === `${initCategory.attributes.category_id} - ${initCategory.attributes.name}`) {\n      console.log(\"category tidak berubah. jadikan id\");\n      values.category_id = idCategory;\n    } else {\n      console.log(\"category berubah. jadikan tipe int\");\n      values.category_id = parseInt(values.category_id);\n    }\n\n    return values;\n  };\n\n  const subCategoryChecker = values => {\n    console.log(\"checker \", values.subCategories, subCategory);\n\n    if (values.subCategories === (subCategory === null || subCategory === void 0 ? void 0 : subCategory.attributes.name)) {\n      console.log(\"sub category tidak berubah. jadikan id\");\n      values.subCategories = subCategory.id;\n    } else if (!subCategory) {\n      console.log(\"tidak ada datanya cuy\");\n    } else {\n      console.log(\"sub category berubah. jadikan tipe int\");\n      values.subCategories = parseInt(values.subCategories);\n    }\n\n    return values;\n  };\n\n  const onFinish = async values => {\n    var _values, _values$subCategories, _values2, _values3, _values4, _values5, _values5$locations;\n\n    console.log(\"values\", values);\n    setLoading(true);\n    values = categoryChecker(values);\n    values = subCategoryChecker(values);\n    const categoryID = {\n      id: parseInt((_values = values) === null || _values === void 0 ? void 0 : _values.category_id)\n    };\n    const subCategoryID = {\n      id: (_values$subCategories = (_values2 = values) === null || _values2 === void 0 ? void 0 : _values2.subCategories) !== null && _values$subCategories !== void 0 ? _values$subCategories : null\n    };\n    const manufacturesID = {\n      id: (_values3 = values) === null || _values3 === void 0 ? void 0 : _values3.manufactures\n    };\n    const groupID = {\n      id: (_values4 = values) === null || _values4 === void 0 ? void 0 : _values4.groups\n    };\n    values.locations = ((_values5 = values) === null || _values5 === void 0 ? void 0 : (_values5$locations = _values5.locations) === null || _values5$locations === void 0 ? void 0 : _values5$locations.map(location => {\n      if (location.value) {\n        return {\n          id: location.value\n        };\n      }\n\n      return {\n        id: location\n      };\n    })) || [];\n    delete values.category_id;\n    delete values.subCategories;\n    delete values.manufactures;\n    delete values.groups;\n    const putData = {\n      // ...values,\n      category: categoryID,\n      sub_category: subCategoryID,\n      manufacture: manufacturesID,\n      group: groupID,\n      image: {\n        id: image === null || image === void 0 ? void 0 : image.id\n      }\n    };\n\n    if (putData.sub_category.id === \"\") {\n      delete putData.sub_category;\n    }\n\n    console.log(\"tester\", putData); // remove undefined or null value from data\n\n    for (const key in values) {\n      if (values[key] === undefined || values[key] === null) {\n        delete values[key];\n      }\n    } // remove undefined or null value from data\n\n\n    for (const key in putData) {\n      if (putData[key].id === undefined || putData[key].id === NaN) {\n        delete putData[key];\n      }\n    }\n\n    const data = _objectSpread(_objectSpread({}, values), putData);\n\n    console.log(\"data\", data);\n\n    for (let index = 1; index < 6; index++) {\n      if (data[`purchase_discount_${index}`] === \"-\") delete data[`purchase_discount_${index}`];\n    }\n\n    const dataPut = {\n      data: data\n    };\n    const JSONdata = JSON.stringify(dataPut);\n    const options = {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + cookies.token\n      },\n      body: JSONdata\n    };\n    const endpoint = process.env.NEXT_PUBLIC_URL + \"/products/\" + productId;\n    const req = await fetch(endpoint, options);\n    const res = await req.json();\n    console.log(\"dataput \", dataPut);\n    console.log(req);\n    console.log(res);\n\n    if (req.status === 200) {\n      toast.success(\"Produk berhasil diperbarui!\", {\n        position: toast.POSITION.TOP_RIGHT\n      });\n      router.push(\"/dashboard/produk\");\n    } else {\n      console.log(res);\n      toast.error(\"Tidak dapat memperbarui Produk\", {\n        position: toast.POSITION.TOP_RIGHT\n      });\n    }\n\n    setLoading(false);\n  };\n\n  const handleValueChange = (changedValues, allValues) => {\n    const fieldName = Object.keys(changedValues)[0];\n    const unitArr = fieldName.split(\"_\");\n    const unit = unitArr[unitArr.length - 1];\n    setDiskonValue(form, changedValues, allValues, fieldName, firstInput);\n    setHargaValue(form, changedValues, allValues, unit, firstInput);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Head, {\n      children: /*#__PURE__*/_jsxDEV(\"title\", {\n        children: \"Edit Produk\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(DashboardLayout, {\n      children: /*#__PURE__*/_jsxDEV(LayoutWrapper, {\n        style: {},\n        children: [/*#__PURE__*/_jsxDEV(TitlePage, {\n          titleText: \"Edit Produk\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(LayoutContent, {\n          children: /*#__PURE__*/_jsxDEV(_Form, {\n            form: form,\n            name: \"edit_product\",\n            initialValues: {\n              remember: true\n            },\n            onFinish: onFinish,\n            onValuesChange: handleValueChange,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex flex-wrap -mx-3 mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-full md:w-1/3 px-3 mb-2 md:mb-0\",\n                children: [/*#__PURE__*/_jsxDEV(_Form.Item, {\n                  name: \"name\",\n                  initialValue: product === null || product === void 0 ? void 0 : (_product$attributes5 = product.attributes) === null || _product$attributes5 === void 0 ? void 0 : _product$attributes5.name,\n                  rules: [{\n                    required: true,\n                    message: \"Nama Produk tidak boleh kosong!\"\n                  }],\n                  children: /*#__PURE__*/_jsxDEV(_Input, {\n                    style: {\n                      height: \"40px\"\n                    },\n                    placeholder: \"Nama Produk\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 299,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 289,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Categories, {\n                  initialValue: `${initCategory.attributes.category_id} - ${initCategory.attributes.name}`,\n                  selectedCategory: category,\n                  onSelectCategory: setCategory,\n                  setSubCategories: setSubCategories,\n                  setSelectedSubCategory: setSelectedSubCategory,\n                  selectedSubCategory: selectedSubCategory\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 301,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(SubCategories, {\n                  subCategories: subCategories,\n                  onSelect: setSelectedSubCategory,\n                  selectedSubCategory: selectedSubCategory,\n                  initialValue: `${(_product$attributes$s = (_product$attributes6 = product.attributes) === null || _product$attributes6 === void 0 ? void 0 : (_product$attributes6$ = _product$attributes6.sub_category) === null || _product$attributes6$ === void 0 ? void 0 : (_product$attributes6$2 = _product$attributes6$.data) === null || _product$attributes6$2 === void 0 ? void 0 : _product$attributes6$2.attributes.name) !== null && _product$attributes$s !== void 0 ? _product$attributes$s : \"\"}`\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 309,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(_Form.Item, {\n                  name: \"description\",\n                  initialValue: (_product$attributes$d = (_product$attributes7 = product.attributes) === null || _product$attributes7 === void 0 ? void 0 : _product$attributes7.description) !== null && _product$attributes$d !== void 0 ? _product$attributes$d : \"\",\n                  children: /*#__PURE__*/_jsxDEV(TextArea, {\n                    rows: 4,\n                    placeholder: \"Deskripsi\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 316,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 315,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 288,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-full md:w-1/3 px-3 mb-2 md:mb-0\",\n                children: [/*#__PURE__*/_jsxDEV(_Form.Item, {\n                  name: \"SKU\",\n                  rules: [{\n                    required: true,\n                    message: \"SKU tidak boleh kosong!\"\n                  }],\n                  initialValue: (_product$attributes$S = (_product$attributes8 = product.attributes) === null || _product$attributes8 === void 0 ? void 0 : _product$attributes8.SKU) !== null && _product$attributes$S !== void 0 ? _product$attributes$S : \"\",\n                  children: /*#__PURE__*/_jsxDEV(_Input, {\n                    style: {\n                      height: \"40px\"\n                    },\n                    placeholder: \"SKU\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 330,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 320,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Manufactures, {\n                  data: manufactures.data,\n                  initialValue: (_product$attributes9 = product.attributes) === null || _product$attributes9 === void 0 ? void 0 : (_product$attributes9$ = _product$attributes9.manufacture) === null || _product$attributes9$ === void 0 ? void 0 : _product$attributes9$.data,\n                  onSelect: setSelectedManufactures\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 332,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Groups, {\n                  data: groups,\n                  onSelect: setSelectedGroup,\n                  initialValue: (_product$attributes10 = product.attributes) === null || _product$attributes10 === void 0 ? void 0 : (_product$attributes11 = _product$attributes10.group) === null || _product$attributes11 === void 0 ? void 0 : _product$attributes11.data\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 333,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Locations, {\n                  data: locations,\n                  onSelect: setSelectLocation,\n                  initialValue: (_product$attributes12 = product.attributes) === null || _product$attributes12 === void 0 ? void 0 : _product$attributes12.locations.data\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 334,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 319,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-full md:w-1/3 px-3 mb-2 md:mb-0\",\n                children: /*#__PURE__*/_jsxDEV(Dragger, _objectSpread(_objectSpread({}, propsDagger), {}, {\n                  children: image == null ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"ant-upload-drag-icon\",\n                      children: /*#__PURE__*/_jsxDEV(_FileImageOutlined, {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 342,\n                        columnNumber: 27\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 341,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"ant-upload-text\",\n                      children: \"Klik atau tarik gambar ke kotak ini\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 344,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"ant-upload-hint  m-3\",\n                      children: \"Gambar akan digunakan sebagai contoh tampilan produk\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 345,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true) : /*#__PURE__*/_jsxDEV(Image, {\n                    layout: \"fill\",\n                    loader: imageLoader,\n                    src: process.env.BASE_URL + (image === null || image === void 0 ? void 0 : image.url)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 348,\n                    columnNumber: 23\n                  }, this)\n                }), void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 338,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 337,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 287,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(\"h6\", {\n                className: \"\",\n                children: \"HARGA\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 355,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 354,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(UnitTable, {\n              initialValue: product.attributes\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 358,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(_Form.Item, {\n              children: loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \" flex float-left ml-3 \",\n                children: /*#__PURE__*/_jsxDEV(_Spin, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 363,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 362,\n                columnNumber: 19\n              }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(ConfirmDialog, {\n                  onConfirm: () => {\n                    var _submitBtn$current;\n\n                    return submitBtn === null || submitBtn === void 0 ? void 0 : (_submitBtn$current = submitBtn.current) === null || _submitBtn$current === void 0 ? void 0 : _submitBtn$current.click();\n                  },\n                  onCancel: () => {},\n                  title: \"Edit Produk\",\n                  message: \"Apakah anda yakin ingin mengedit produk ini?\",\n                  component: /*#__PURE__*/_jsxDEV(_Button, {\n                    className: \" hover:text-white hover:bg-cyan-700 border border-cyan-700 ml-1\",\n                    children: \"Simpan\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 372,\n                    columnNumber: 34\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 367,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(_Button, {\n                  htmlType: \"submit\",\n                  ref: submitBtn\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 374,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 360,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 278,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\nEdit.getInitialProps = async context => {\n  var _product$data$attribu;\n\n  const cookies = nookies.get(context);\n  const reqProduct = await fetchProduct(cookies, context);\n  const product = await reqProduct.json();\n  const categoryId = (_product$data$attribu = product.data.attributes.category.data) === null || _product$data$attribu === void 0 ? void 0 : _product$data$attribu.id;\n  const reqCategories = await fetchDataCategories(cookies);\n  const categories = await reqCategories.json();\n  const reqGroups = await fetchDataGroups(cookies);\n  const groups = await reqGroups.json();\n  const reqLocations = await fetchDataLocations(cookies);\n  const locations = await reqLocations.json();\n  const reqManufactures = await fetchDataManufactures(cookies);\n  const manufactures = await reqManufactures.json();\n  const reqSubCategories = await fetchDataSubCategories(cookies, categoryId);\n  const subCategories = await reqSubCategories.json();\n  return {\n    props: {\n      product,\n      categories,\n      groups,\n      locations,\n      manufactures,\n      subCategories\n    }\n  };\n};\n\nconst fetchProduct = async (cookies, context) => {\n  const id = context.query.id;\n  const endpoint = process.env.NEXT_PUBLIC_URL + \"/products/\" + id + \"?populate=*\";\n  const options = {\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: \"Bearer \" + cookies.token\n    }\n  };\n  const req = await fetch(endpoint, options);\n  return req;\n};\n\nconst fetchDataCategories = async cookies => {\n  const endpoint = process.env.NEXT_PUBLIC_URL + \"/categories\";\n  const options = {\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: \"Bearer \" + cookies.token\n    }\n  };\n  const req = await fetch(endpoint, options);\n  return req;\n};\n\nconst fetchDataManufactures = async cookies => {\n  const endpoint = process.env.NEXT_PUBLIC_URL + \"/manufactures\";\n  const options = {\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: \"Bearer \" + cookies.token\n    }\n  };\n  const req = await fetch(endpoint, options);\n  return req;\n};\n\nconst fetchDataSubCategories = async (cookies, categoryId) => {\n  const endpoint = process.env.NEXT_PUBLIC_URL + \"/sub-categories?populate[category][filters][id][$eq]=\" + categoryId;\n  const options = {\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: \"Bearer \" + cookies.token\n    }\n  };\n  const req = await fetch(endpoint, options);\n  return req;\n};\n\nconst fetchDataGroups = async cookies => {\n  const endpoint = process.env.NEXT_PUBLIC_URL + \"/groups\";\n  const options = {\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: \"Bearer \" + cookies.token\n    }\n  };\n  const req = await fetch(endpoint, options);\n  return req;\n};\n\nconst fetchDataLocations = async cookies => {\n  const endpoint = process.env.NEXT_PUBLIC_URL + \"/locations\";\n  const options = {\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: \"Bearer \" + cookies.token\n    }\n  };\n  const req = await fetch(endpoint, options);\n  return req;\n};\n\nexport default Edit;","map":{"version":3,"sources":["/Users/yudiananta/Development/NextJS/ERP Dev/JS Deploy/ERP-Sejati/pages/dashboard/produk/edit/[id].js"],"names":["useRef","useState","Head","LayoutContent","LayoutWrapper","nookies","toast","useRouter","Image","DashboardLayout","TitlePage","Categories","Manufactures","SubCategories","Groups","Locations","UnitTable","ConfirmDialog","setHargaValue","setDiskonValue","Edit","props","productId","product","data","id","manufactures","groups","locations","initCategory","attributes","category","subCategory","sub_category","image","setImage","setCategory","idCategory","setIdCategory","uploadedOnce","setUploadedOnce","fileList","setFileList","firstInput","setFirstInputDiskon","form","useForm","loading","setLoading","cookies","get","router","submitBtn","Dragger","TextArea","selectedManufactures","setSelectedManufactures","selectedGroups","setSelectedGroup","selectLocations","setSelectLocation","subCategories","setSubCategories","selectedSubCategory","setSelectedSubCategory","locationsList","locationNameList","forEach","element","push","name","imageLoader","src","process","env","BASE_URL","url","propsDagger","multiple","showUploadList","showDownloadIcon","showRemoveIcon","onRemove","info","onChange","length","endpoint","NEXT_PUBLIC_URL","file","originFileObj","FormData","append","options","method","headers","Authorization","token","body","req","fetch","res","json","status","success","error","categoryChecker","values","category_id","console","log","parseInt","subCategoryChecker","onFinish","categoryID","subCategoryID","manufacturesID","groupID","map","location","value","putData","manufacture","group","key","undefined","NaN","index","dataPut","JSONdata","JSON","stringify","position","POSITION","TOP_RIGHT","handleValueChange","changedValues","allValues","fieldName","Object","keys","unitArr","split","unit","remember","required","message","height","description","SKU","current","click","getInitialProps","context","reqProduct","fetchProduct","categoryId","reqCategories","fetchDataCategories","categories","reqGroups","fetchDataGroups","reqLocations","fetchDataLocations","reqManufactures","fetchDataManufactures","reqSubCategories","fetchDataSubCategories","query"],"mappings":"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","sourcesContent":["import { useRef, useState } from \"react\";\nimport Head from \"next/head\";\nimport LayoutContent from \"@iso/components/utility/layoutContent\";\nimport LayoutWrapper from \"@iso/components/utility/layoutWrapper.js\";\nimport { Button, Form, Input, message, Upload, Space } from \"antd\";\nimport nookies from \"nookies\";\nimport { toast } from \"react-toastify\";\nimport { Spin, Row } from \"antd\";\nimport { useRouter } from \"next/router\";\nimport Image from \"next/image\";\nimport { FileImageOutlined } from \"@ant-design/icons\";\nimport DashboardLayout from \"../../../../containers/DashboardLayout/DashboardLayout\";\nimport TitlePage from \"../../../../components/TitlePage/TitlePage\";\nimport Categories from \"../../../../components/Form/AddProduct/Categories\";\nimport Manufactures from \"../../../../components/Form/AddProduct/Manufactures\";\nimport SubCategories from \"../../../../components/Form/AddProduct/subCategories\";\nimport Groups from \"../../../../components/Form/AddProduct/Groups\";\nimport Locations from \"../../../../components/Form/AddProduct/Locations\";\nimport UnitTable from \"../../../../components/ReactDataTable/Product/UnitsTable\";\nimport ConfirmDialog from \"../../../../components/Alert/ConfirmDialog\";\nimport setHargaValue from \"../utility/setHargaValue\";\nimport setDiskonValue from \"../utility/setDiskonValue\";\n\nconst Edit = ({ props }) => {\n  const productId = props?.product.data.id;\n  const product = props?.product?.data;\n  const manufactures = props?.manufactures;\n  const groups = props?.groups;\n  const locations = props?.locations;\n  const initCategory = product?.attributes?.category?.data;\n  const subCategory = product?.attributes?.sub_category?.data;\n\n  const [image, setImage] = useState(product.attributes?.image?.data ? product.attributes?.image?.data[0].attributes : null);\n\n  const [category, setCategory] = useState();\n  const [idCategory, setIdCategory] = useState(initCategory.id);\n  const [uploadedOnce, setUploadedOnce] = useState(true);\n  const [fileList, setFileList] = useState([]);\n  const [firstInput, setFirstInputDiskon] = useState(true);\n  const [form] = Form.useForm();\n  const [loading, setLoading] = useState(false);\n  const cookies = nookies.get(null, \"token\");\n  const router = useRouter();\n  const submitBtn = useRef();\n\n  const { Dragger } = Upload;\n  const { TextArea } = Input;\n\n  const [selectedManufactures, setSelectedManufactures] = useState({});\n  const [selectedGroups, setSelectedGroup] = useState({});\n  const [selectLocations, setSelectLocation] = useState();\n\n  const [subCategories, setSubCategories] = useState([]);\n  const [selectedSubCategory, setSelectedSubCategory] = useState();\n\n  function locationsList() {\n    const locationNameList = [];\n    locations.data.forEach((element) => {\n      locationNameList.push(element.attributes.name);\n    });\n\n    return locationNameList;\n  }\n\n  const imageLoader = ({ src }) => {\n    return process.env.BASE_URL + image?.url;\n  };\n\n  const propsDagger = {\n    name: \"files\",\n    multiple: false,\n    fileList: fileList,\n    showUploadList: {\n      showDownloadIcon: false,\n      showRemoveIcon: true,\n    },\n\n    onRemove(info) {\n      setUploadedOnce(true);\n      setImage();\n      setFileList([]);\n    },\n\n    async onChange(info) {\n      if (info.fileList.length === 1) {\n        const endpoint = process.env.NEXT_PUBLIC_URL + \"/upload\";\n        const file = info.file.originFileObj;\n        const data = new FormData();\n        data.append(\"files\", file);\n\n        setFileList(info.fileList);\n\n        const options = {\n          method: \"POST\",\n          headers: {\n            Authorization: \"Bearer \" + cookies.token,\n          },\n          body: data,\n        };\n\n        if (uploadedOnce) {\n          setUploadedOnce(false);\n          const req = await fetch(endpoint, options);\n          const res = await req.json();\n\n          if (req.status === 200) {\n            setImage(res[0]);\n\n            message.success(`${info.file.name} berhasil diupload`);\n          } else {\n            message.error(`${info.file.name} gagal upload`);\n          }\n        }\n      } else if (info.fileList.length === 0) {\n        message.info(`Gambar berhasil dihapus`);\n      } else {\n        message.error(`Hanya dapat menambahkan 1 gambar`);\n      }\n    },\n  };\n\n  const categoryChecker = (values) => {\n    if (values.category_id === `${initCategory.attributes.category_id} - ${initCategory.attributes.name}`) {\n      console.log(\"category tidak berubah. jadikan id\");\n      values.category_id = idCategory;\n    } else {\n      console.log(\"category berubah. jadikan tipe int\");\n      values.category_id = parseInt(values.category_id);\n    }\n\n    return values;\n  };\n\n  const subCategoryChecker = (values) => {\n    console.log(\"checker \", values.subCategories, subCategory);\n    if (values.subCategories === subCategory?.attributes.name) {\n      console.log(\"sub category tidak berubah. jadikan id\");\n      values.subCategories = subCategory.id;\n    } else if (!subCategory) {\n      console.log(\"tidak ada datanya cuy\");\n    } else {\n      console.log(\"sub category berubah. jadikan tipe int\");\n      values.subCategories = parseInt(values.subCategories);\n    }\n\n    return values;\n  };\n\n  const onFinish = async (values) => {\n    console.log(\"values\", values);\n    setLoading(true);\n    values = categoryChecker(values);\n    values = subCategoryChecker(values);\n\n    const categoryID = {\n      id: parseInt(values?.category_id),\n    };\n\n    const subCategoryID = {\n      id: values?.subCategories ?? null,\n    };\n\n    const manufacturesID = {\n      id: values?.manufactures,\n    };\n\n    const groupID = {\n      id: values?.groups,\n    };\n\n    values.locations =\n      values?.locations?.map((location) => {\n        if (location.value) {\n          return { id: location.value };\n        }\n\n        return { id: location };\n      }) || [];\n\n    delete values.category_id;\n    delete values.subCategories;\n    delete values.manufactures;\n    delete values.groups;\n\n    const putData = {\n      // ...values,\n      category: categoryID,\n      sub_category: subCategoryID,\n      manufacture: manufacturesID,\n      group: groupID,\n      image: { id: image?.id },\n    };\n\n    if (putData.sub_category.id === \"\") {\n      delete putData.sub_category;\n    }\n\n    console.log(\"tester\", putData);\n\n    // remove undefined or null value from data\n    for (const key in values) {\n      if (values[key] === undefined || values[key] === null) {\n        delete values[key];\n      }\n    }\n\n    // remove undefined or null value from data\n    for (const key in putData) {\n      if (putData[key].id === undefined || putData[key].id === NaN) {\n        delete putData[key];\n      }\n    }\n\n    const data = {\n      ...values,\n      ...putData,\n    };\n\n    console.log(\"data\", data);\n\n    for (let index = 1; index < 6; index++) {\n      if (data[`purchase_discount_${index}`] === \"-\") delete data[`purchase_discount_${index}`];\n    }\n\n    const dataPut = { data: data };\n    const JSONdata = JSON.stringify(dataPut);\n\n    const options = {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + cookies.token,\n      },\n      body: JSONdata,\n    };\n\n    const endpoint = process.env.NEXT_PUBLIC_URL + \"/products/\" + productId;\n    const req = await fetch(endpoint, options);\n    const res = await req.json();\n\n    console.log(\"dataput \", dataPut);\n    console.log(req);\n    console.log(res);\n\n    if (req.status === 200) {\n      toast.success(\"Produk berhasil diperbarui!\", {\n        position: toast.POSITION.TOP_RIGHT,\n      });\n      router.push(\"/dashboard/produk\");\n    } else {\n      console.log(res);\n      toast.error(\"Tidak dapat memperbarui Produk\", {\n        position: toast.POSITION.TOP_RIGHT,\n      });\n    }\n\n    setLoading(false);\n  };\n\n  const handleValueChange = (changedValues, allValues) => {\n    const fieldName = Object.keys(changedValues)[0];\n    const unitArr = fieldName.split(\"_\");\n    const unit = unitArr[unitArr.length - 1];\n\n    setDiskonValue(form, changedValues, allValues, fieldName, firstInput);\n    setHargaValue(form, changedValues, allValues, unit, firstInput);\n  };\n\n  return (\n    <>\n      <Head>\n        <title>Edit Produk</title>\n      </Head>\n      <DashboardLayout>\n        <LayoutWrapper style={{}}>\n          <TitlePage titleText={\"Edit Produk\"} />\n          <LayoutContent>\n            <Form\n              form={form}\n              name=\"edit_product\"\n              initialValues={{\n                remember: true,\n              }}\n              onFinish={onFinish}\n              onValuesChange={handleValueChange}\n            >\n              <div className=\"flex flex-wrap -mx-3 mb-3\">\n                <div className=\"w-full md:w-1/3 px-3 mb-2 md:mb-0\">\n                  <Form.Item\n                    name=\"name\"\n                    initialValue={product?.attributes?.name}\n                    rules={[\n                      {\n                        required: true,\n                        message: \"Nama Produk tidak boleh kosong!\",\n                      },\n                    ]}\n                  >\n                    <Input style={{ height: \"40px\" }} placeholder=\"Nama Produk\" />\n                  </Form.Item>\n                  <Categories\n                    initialValue={`${initCategory.attributes.category_id} - ${initCategory.attributes.name}`}\n                    selectedCategory={category}\n                    onSelectCategory={setCategory}\n                    setSubCategories={setSubCategories}\n                    setSelectedSubCategory={setSelectedSubCategory}\n                    selectedSubCategory={selectedSubCategory}\n                  />\n                  <SubCategories\n                    subCategories={subCategories}\n                    onSelect={setSelectedSubCategory}\n                    selectedSubCategory={selectedSubCategory}\n                    initialValue={`${product.attributes?.sub_category?.data?.attributes.name ?? \"\"}`}\n                  />\n                  <Form.Item name=\"description\" initialValue={product.attributes?.description ?? \"\"}>\n                    <TextArea rows={4} placeholder=\"Deskripsi\" />\n                  </Form.Item>\n                </div>\n                <div className=\"w-full md:w-1/3 px-3 mb-2 md:mb-0\">\n                  <Form.Item\n                    name=\"SKU\"\n                    rules={[\n                      {\n                        required: true,\n                        message: \"SKU tidak boleh kosong!\",\n                      },\n                    ]}\n                    initialValue={product.attributes?.SKU ?? \"\"}\n                  >\n                    <Input style={{ height: \"40px\" }} placeholder=\"SKU\" />\n                  </Form.Item>\n                  <Manufactures data={manufactures.data} initialValue={product.attributes?.manufacture?.data} onSelect={setSelectedManufactures} />\n                  <Groups data={groups} onSelect={setSelectedGroup} initialValue={product.attributes?.group?.data} />\n                  <Locations data={locations} onSelect={setSelectLocation} initialValue={product.attributes?.locations.data} />\n                </div>\n\n                <div className=\"w-full md:w-1/3 px-3 mb-2 md:mb-0\">\n                  <Dragger {...propsDagger}>\n                    {image == null ? (\n                      <>\n                        <p className=\"ant-upload-drag-icon\">\n                          <FileImageOutlined />\n                        </p>\n                        <p className=\"ant-upload-text\">Klik atau tarik gambar ke kotak ini</p>\n                        <p className=\"ant-upload-hint  m-3\">Gambar akan digunakan sebagai contoh tampilan produk</p>\n                      </>\n                    ) : (\n                      <Image layout=\"fill\" loader={imageLoader} src={process.env.BASE_URL + image?.url} />\n                    )}\n                  </Dragger>\n                </div>\n              </div>\n\n              <div>\n                <h6 className=\"\">HARGA</h6>\n              </div>\n\n              <UnitTable initialValue={product.attributes} />\n\n              <Form.Item>\n                {loading ? (\n                  <div className=\" flex float-left ml-3 \">\n                    <Spin />\n                  </div>\n                ) : (\n                  <>\n                    <ConfirmDialog\n                      onConfirm={() => submitBtn?.current?.click()}\n                      onCancel={() => {}}\n                      title=\"Edit Produk\"\n                      message=\"Apakah anda yakin ingin mengedit produk ini?\"\n                      component={<Button className=\" hover:text-white hover:bg-cyan-700 border border-cyan-700 ml-1\">Simpan</Button>}\n                    />\n                    <Button htmlType=\"submit\" ref={submitBtn}></Button>\n                  </>\n                )}\n              </Form.Item>\n            </Form>\n          </LayoutContent>\n        </LayoutWrapper>\n      </DashboardLayout>\n    </>\n  );\n};\n\nEdit.getInitialProps = async (context) => {\n  const cookies = nookies.get(context);\n\n  const reqProduct = await fetchProduct(cookies, context);\n  const product = await reqProduct.json();\n\n  const categoryId = product.data.attributes.category.data?.id;\n\n  const reqCategories = await fetchDataCategories(cookies);\n  const categories = await reqCategories.json();\n\n  const reqGroups = await fetchDataGroups(cookies);\n  const groups = await reqGroups.json();\n\n  const reqLocations = await fetchDataLocations(cookies);\n  const locations = await reqLocations.json();\n\n  const reqManufactures = await fetchDataManufactures(cookies);\n  const manufactures = await reqManufactures.json();\n\n  const reqSubCategories = await fetchDataSubCategories(cookies, categoryId);\n  const subCategories = await reqSubCategories.json();\n\n  return {\n    props: {\n      product,\n      categories,\n      groups,\n      locations,\n      manufactures,\n      subCategories,\n    },\n  };\n};\n\nconst fetchProduct = async (cookies, context) => {\n  const id = context.query.id;\n  const endpoint = process.env.NEXT_PUBLIC_URL + \"/products/\" + id + \"?populate=*\";\n  const options = {\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: \"Bearer \" + cookies.token,\n    },\n  };\n  const req = await fetch(endpoint, options);\n\n  return req;\n};\n\nconst fetchDataCategories = async (cookies) => {\n  const endpoint = process.env.NEXT_PUBLIC_URL + \"/categories\";\n  const options = {\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: \"Bearer \" + cookies.token,\n    },\n  };\n\n  const req = await fetch(endpoint, options);\n  return req;\n};\n\nconst fetchDataManufactures = async (cookies) => {\n  const endpoint = process.env.NEXT_PUBLIC_URL + \"/manufactures\";\n  const options = {\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: \"Bearer \" + cookies.token,\n    },\n  };\n\n  const req = await fetch(endpoint, options);\n  return req;\n};\n\nconst fetchDataSubCategories = async (cookies, categoryId) => {\n  const endpoint = process.env.NEXT_PUBLIC_URL + \"/sub-categories?populate[category][filters][id][$eq]=\" + categoryId;\n  const options = {\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: \"Bearer \" + cookies.token,\n    },\n  };\n\n  const req = await fetch(endpoint, options);\n  return req;\n};\n\nconst fetchDataGroups = async (cookies) => {\n  const endpoint = process.env.NEXT_PUBLIC_URL + \"/groups\";\n  const options = {\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: \"Bearer \" + cookies.token,\n    },\n  };\n\n  const req = await fetch(endpoint, options);\n  return req;\n};\n\nconst fetchDataLocations = async (cookies) => {\n  const endpoint = process.env.NEXT_PUBLIC_URL + \"/locations\";\n  const options = {\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: \"Bearer \" + cookies.token,\n    },\n  };\n\n  const req = await fetch(endpoint, options);\n  return req;\n};\n\nexport default Edit;\n"]},"metadata":{},"sourceType":"module"}