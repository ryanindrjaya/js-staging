{"ast":null,"code":"import _Form from \"antd/lib/form\";\nimport _Select from \"antd/lib/select\";\nvar _jsxFileName = \"/Users/yudiananta/Development/NextJS/ERP Dev/JS Deploy/JS-Deploy/components/Form/AddProduct/Groups.js\";\nimport nookies from \"nookies\";\nimport { useState } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Groups({\n  onSelect,\n  selectedGroups,\n  initialValue\n}) {\n  var _initialValue$attribu;\n\n  const {\n    0: groups,\n    1: setSelectedGroups\n  } = useState(selectedGroups);\n  const {\n    0: data,\n    1: setData\n  } = useState([]);\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(false);\n  const cookies = nookies.get(null, \"token\");\n  const options = data === null || data === void 0 ? void 0 : data.map(d => /*#__PURE__*/_jsxDEV(_Select.Option, {\n    children: d.label\n  }, d.value, false, {\n    fileName: _jsxFileName,\n    lineNumber: 12,\n    columnNumber: 5\n  }, this));\n\n  const handleSearchGroups = newValue => {\n    if (newValue) {\n      fetchGroups(newValue, setData);\n    } else {\n      setData([]);\n    }\n  };\n\n  const handleChangeGroups = newValue => {\n    setSelectedGroups(newValue);\n    onSelect(newValue);\n  };\n\n  const fetchGroups = async (query, callback) => {\n    if (!query) {\n      callback([]);\n    } else {\n      setLoading(true);\n\n      try {\n        const endpoint = process.env.NEXT_PUBLIC_URL + `/groups?filters[$or][0][name][$containsi]=${query}&filters[$or][1][code][$containsi]=${query}`;\n        const options = {\n          method: \"GET\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: \"Bearer \" + cookies.token\n          }\n        };\n        const req = await fetch(endpoint, options);\n        const res = await req.json();\n\n        if (req.status == 200) {\n          const manufactureResult = res.data.map(manufacture => ({\n            label: `${manufacture.attributes.name}`,\n            value: manufacture.id\n          }));\n          callback(manufactureResult);\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    }\n\n    setLoading(false);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"w-full md:w-full mb-2 md:mb-0\",\n    children: /*#__PURE__*/_jsxDEV(_Form.Item, {\n      name: \"groups\",\n      className: \"w-1/1\",\n      initialValue: initialValue === null || initialValue === void 0 ? void 0 : initialValue.attributes.name,\n      children: /*#__PURE__*/_jsxDEV(_Select, {\n        size: \"large\",\n        value: groups !== null && groups !== void 0 ? groups : initialValue === null || initialValue === void 0 ? void 0 : initialValue.attributes.name,\n        defaultValue: initialValue && {\n          value: initialValue === null || initialValue === void 0 ? void 0 : initialValue.id,\n          label: initialValue === null || initialValue === void 0 ? void 0 : (_initialValue$attribu = initialValue.attributes) === null || _initialValue$attribu === void 0 ? void 0 : _initialValue$attribu.name\n        },\n        showSearch: true,\n        showArrow: false,\n        filterOption: false,\n        defaultActiveFirstOption: false,\n        loading: loading,\n        placeholder: \"Golongan\",\n        onChange: handleChangeGroups,\n        onSearch: handleSearchGroups,\n        children: options\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 5\n  }, this);\n}","map":{"version":3,"sources":["/Users/yudiananta/Development/NextJS/ERP Dev/JS Deploy/JS-Deploy/components/Form/AddProduct/Groups.js"],"names":["nookies","useState","Groups","onSelect","selectedGroups","initialValue","groups","setSelectedGroups","data","setData","loading","setLoading","cookies","get","options","map","d","label","value","handleSearchGroups","newValue","fetchGroups","handleChangeGroups","query","callback","endpoint","process","env","NEXT_PUBLIC_URL","method","headers","Authorization","token","req","fetch","res","json","status","manufactureResult","manufacture","attributes","name","id","error","console","log"],"mappings":"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","sourcesContent":["import { Form, Select } from \"antd\";\nimport nookies from \"nookies\";\nimport { useState } from \"react\";\n\nexport default function Groups({ onSelect, selectedGroups, initialValue }) {\n  const [groups, setSelectedGroups] = useState(selectedGroups);\n  const [data, setData] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const cookies = nookies.get(null, \"token\");\n\n  const options = data?.map((d) => (\n    <Select.Option key={d.value}>{d.label}</Select.Option>\n  ));\n\n  const handleSearchGroups = (newValue) => {\n    if (newValue) {\n      fetchGroups(newValue, setData);\n    } else {\n      setData([]);\n    }\n  };\n\n  const handleChangeGroups = (newValue) => {\n    setSelectedGroups(newValue);\n    onSelect(newValue);\n  };\n\n  const fetchGroups = async (query, callback) => {\n    if (!query) {\n      callback([]);\n    } else {\n      setLoading(true);\n      try {\n        const endpoint =\n          process.env.NEXT_PUBLIC_URL +\n          `/groups?filters[$or][0][name][$containsi]=${query}&filters[$or][1][code][$containsi]=${query}`;\n        const options = {\n          method: \"GET\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: \"Bearer \" + cookies.token,\n          },\n        };\n\n        const req = await fetch(endpoint, options);\n        const res = await req.json();\n\n        if (req.status == 200) {\n          const manufactureResult = res.data.map((manufacture) => ({\n            label: `${manufacture.attributes.name}`,\n            value: manufacture.id,\n          }));\n\n          callback(manufactureResult);\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    }\n    setLoading(false);\n  };\n\n  return (\n    <div className=\"w-full md:w-full mb-2 md:mb-0\">\n      <Form.Item\n        name=\"groups\"\n        className=\"w-1/1\"\n        initialValue={initialValue?.attributes.name}\n      >\n        <Select\n          size=\"large\"\n          value={groups ?? initialValue?.attributes.name}\n          defaultValue={\n            initialValue && {\n              value: initialValue?.id,\n              label: initialValue?.attributes?.name,\n            }\n          }\n          showSearch\n          showArrow={false}\n          filterOption={false}\n          defaultActiveFirstOption={false}\n          loading={loading}\n          placeholder=\"Golongan\"\n          onChange={handleChangeGroups}\n          onSearch={handleSearchGroups}\n        >\n          {options}\n        </Select>\n      </Form.Item>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}