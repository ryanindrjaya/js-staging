{"ast":null,"code":"import _Button from \"antd/lib/button\";\nimport _Spin from \"antd/lib/spin\";\nimport _FileImageOutlined from \"@ant-design/icons/lib/icons/FileImageOutlined\";\nimport _defineProperty from \"/Users/yudiananta/Development/NextJS/ERP Dev/JS Deploy/ERP-Sejati/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _message from \"antd/lib/message\";\nimport _asyncToGenerator from \"/Users/yudiananta/Development/NextJS/ERP Dev/JS Deploy/ERP-Sejati/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _Input from \"antd/lib/input\";\nimport _Upload from \"antd/lib/upload\";\nimport _Form from \"antd/lib/form\";\nimport _slicedToArray from \"/Users/yudiananta/Development/NextJS/ERP Dev/JS Deploy/ERP-Sejati/node_modules/next/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"/Users/yudiananta/Development/NextJS/ERP Dev/JS Deploy/ERP-Sejati/pages/dashboard/produk/tambah.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport _regeneratorRuntime from \"/Users/yudiananta/Development/NextJS/ERP Dev/JS Deploy/ERP-Sejati/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport { useRef, useState } from \"react\";\nimport Head from \"next/head\";\nimport LayoutContent from \"@iso/components/utility/layoutContent\";\nimport LayoutWrapper from \"@iso/components/utility/layoutWrapper.js\";\nimport nookies from \"nookies\";\nimport { toast } from \"react-toastify\";\nimport DashboardLayout from \"../../../containers/DashboardLayout/DashboardLayout\";\nimport TitlePage from \"../../../components/TitlePage/TitlePage\";\nimport Categories from \"../../../components/Form/AddProduct/Categories\";\nimport Manufactures from \"../../../components/Form/AddProduct/Manufactures\";\nimport SubCategories from \"../../../components/Form/AddProduct/subCategories\";\nimport Groups from \"../../../components/Form/AddProduct/Groups\";\nimport Locations from \"../../../components/Form/AddProduct/Locations\";\nimport { useRouter } from \"next/router\";\nimport Image from \"next/image\";\nimport UnitTable from \"../../../components/ReactDataTable/Product/UnitsTable\";\nimport setDiskonValue from \"./utility/setDiskonValue\";\nimport setHargaValue from \"./utility/setHargaValue\";\nimport ConfirmDialog from \"../../../components/Alert/ConfirmDialog\";\nimport debounce from \"./utility/debounce\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nvar Tambah = function Tambah(_ref) {\n  _s();\n\n  var props = _ref.props;\n\n  var _useState = useState(),\n      image = _useState[0],\n      setImage = _useState[1];\n\n  var _useState2 = useState(),\n      category = _useState2[0],\n      setCategory = _useState2[1];\n\n  var _useState3 = useState(true),\n      uploadedOnce = _useState3[0],\n      setUploadedOnce = _useState3[1];\n\n  var _useState4 = useState([]),\n      fileList = _useState4[0],\n      setFileList = _useState4[1];\n\n  var _useState5 = useState({\n    status: \"\",\n    message: \"\"\n  }),\n      statusSKU = _useState5[0],\n      setStatusSKU = _useState5[1];\n\n  var _Form$useForm = _Form.useForm(),\n      _Form$useForm2 = _slicedToArray(_Form$useForm, 1),\n      form = _Form$useForm2[0];\n\n  var _useState6 = useState(false),\n      loading = _useState6[0],\n      setLoading = _useState6[1];\n\n  var _useState7 = useState(true),\n      firstInput = _useState7[0],\n      setFirstInputDiskon = _useState7[1];\n\n  var cookies = nookies.get(null, \"token\");\n  var router = useRouter();\n  var submitBtn = useRef();\n  var Dragger = _Upload.Dragger;\n  var TextArea = _Input.TextArea;\n  var manufactures = props.manufactures;\n  var groups = props.groups;\n  var locations = props.locations;\n\n  var _useState8 = useState({}),\n      selectedManufactures = _useState8[0],\n      setSelectedManufactures = _useState8[1];\n\n  var _useState9 = useState({}),\n      selectedGroups = _useState9[0],\n      setSelectedGroup = _useState9[1];\n\n  var _useState10 = useState({}),\n      selectLocations = _useState10[0],\n      setSelectLocation = _useState10[1];\n\n  var _useState11 = useState([]),\n      subCategories = _useState11[0],\n      setSubCategories = _useState11[1];\n\n  var _useState12 = useState(),\n      selectedSubCategory = _useState12[0],\n      setSelectedSubCategory = _useState12[1];\n\n  var imageLoader = function imageLoader(_ref2) {\n    var src = _ref2.src;\n    return process.env.NEXT_PUBLIC_URL + (image === null || image === void 0 ? void 0 : image.url);\n  };\n\n  var propsDagger = {\n    name: \"files\",\n    multiple: false,\n    fileList: fileList,\n    showUploadList: {\n      showDownloadIcon: false,\n      showRemoveIcon: true\n    },\n    onRemove: function onRemove(info) {\n      setUploadedOnce(true);\n      setImage();\n      setFileList([]);\n    },\n    onChange: function onChange(info) {\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var endpoint, file, data, options, req, res;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!(info.fileList.length === 1)) {\n                  _context.next = 18;\n                  break;\n                }\n\n                endpoint = process.env.NEXT_PUBLIC_URL + \"/upload\";\n                file = info.file.originFileObj;\n                data = new FormData();\n                data.append(\"files\", file);\n                setFileList(info.fileList);\n                options = {\n                  method: \"POST\",\n                  headers: {\n                    Authorization: \"Bearer \" + cookies.token\n                  },\n                  body: data\n                };\n\n                if (!uploadedOnce) {\n                  _context.next = 16;\n                  break;\n                }\n\n                setUploadedOnce(false);\n                _context.next = 11;\n                return fetch(endpoint, options);\n\n              case 11:\n                req = _context.sent;\n                _context.next = 14;\n                return req.json();\n\n              case 14:\n                res = _context.sent;\n\n                if (req.status === 200) {\n                  setImage(res[0]);\n\n                  _message.success(\"\".concat(info.file.name, \" berhasil diupload\"));\n                } else {\n                  _message.error(\"\".concat(info.file.name, \" gagal upload\"));\n                }\n\n              case 16:\n                _context.next = 19;\n                break;\n\n              case 18:\n                if (info.fileList.length === 0) {\n                  _message.info(\"Gambar berhasil dihapus\");\n                } else {\n                  _message.error(\"Hanya dapat menambahkan 1 gambar\");\n                }\n\n              case 19:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }))();\n    }\n  };\n\n  var onFinish = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(values) {\n      var _postRes$data;\n\n      var categoryID, subCategoryID, manufacturesID, groupID, locationsID, postData, putData, postRes;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              setLoading(true); // if (selectedSubCategory === 0) {\n              //   message.error(\n              //     `Sub Kategori tidak ditemukan pada Induk Kategori. Silahkan cek kembali`\n              //   );\n              // }\n\n              categoryID = {\n                id: parseInt(values === null || values === void 0 ? void 0 : values.category_id)\n              };\n              subCategoryID = {\n                id: values === null || values === void 0 ? void 0 : values.subCategories\n              };\n              manufacturesID = {\n                id: values === null || values === void 0 ? void 0 : values.manufactures\n              };\n              groupID = {\n                id: values === null || values === void 0 ? void 0 : values.groups\n              };\n              locationsID = values.locations.map(function (locationId) {\n                return locationId;\n              });\n              delete values.locations;\n              delete values.category_id;\n              delete values.subCategories;\n              delete values.manufactures;\n              delete values.groups;\n              postData = _objectSpread(_objectSpread({}, values), {}, {\n                locations: locationsID\n              });\n              putData = {\n                category: categoryID,\n                sub_category: subCategoryID,\n                manufacture: manufacturesID,\n                group: groupID,\n                locations: locationsID,\n                image: {\n                  id: image === null || image === void 0 ? void 0 : image.id\n                }\n              };\n              console.log(\"put data\", putData); // POST DATA\n\n              _context2.next = 16;\n              return handlePostData(postData);\n\n            case 16:\n              postRes = _context2.sent;\n              console.log(postRes); // PUT DATA\n\n              _context2.next = 20;\n              return handlePutData(postRes === null || postRes === void 0 ? void 0 : (_postRes$data = postRes.data) === null || _postRes$data === void 0 ? void 0 : _postRes$data.id, putData);\n\n            case 20:\n              setLoading(false);\n\n            case 21:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function onFinish(_x) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var handlePostData = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(data) {\n      var endpoint, dataPost, JSONdata, options, req, res;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              endpoint = process.env.NEXT_PUBLIC_URL + \"/products\";\n              dataPost = {\n                data: data\n              };\n              JSONdata = JSON.stringify(dataPost);\n              options = {\n                method: \"POST\",\n                headers: {\n                  \"Content-Type\": \"application/json\",\n                  Authorization: \"Bearer \" + cookies.token\n                },\n                body: JSONdata\n              };\n              _context3.next = 6;\n              return fetch(endpoint, options);\n\n            case 6:\n              req = _context3.sent;\n              _context3.next = 9;\n              return req.json();\n\n            case 9:\n              res = _context3.sent;\n              return _context3.abrupt(\"return\", res);\n\n            case 11:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function handlePostData(_x2) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  var handlePutData = /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(id, data) {\n      var endpoint, key, dataPut, JSONdata, options, req, res, _res$error, _res$error$details;\n\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              endpoint = process.env.NEXT_PUBLIC_URL + \"/products/\" + id;\n\n              for (key in data) {\n                if (data[key].id === undefined || data[key].id === NaN) {\n                  delete data[key];\n                }\n              }\n\n              console.log(endpoint);\n              dataPut = {\n                data: data\n              };\n              JSONdata = JSON.stringify(dataPut);\n              options = {\n                method: \"PUT\",\n                headers: {\n                  \"Content-Type\": \"application/json\",\n                  Authorization: \"Bearer \" + cookies.token\n                },\n                body: JSONdata\n              };\n              _context4.prev = 6;\n              _context4.next = 9;\n              return fetch(endpoint, options);\n\n            case 9:\n              req = _context4.sent;\n              _context4.next = 12;\n              return req.json();\n\n            case 12:\n              res = _context4.sent;\n\n              if (req.status === 200) {\n                setImage();\n                form.resetFields();\n                toast.success(\"Produk berhasil ditambahkan!\", {\n                  position: toast.POSITION.TOP_RIGHT\n                });\n                router.reload();\n              } else {\n                res === null || res === void 0 ? void 0 : (_res$error = res.error) === null || _res$error === void 0 ? void 0 : (_res$error$details = _res$error.details) === null || _res$error$details === void 0 ? void 0 : _res$error$details.errors.map(function (error) {\n                  var ErrorMsg = error.path[0];\n                  toast.error(ErrorMsg === \"SKU\" ? \"SKU sudah digunakan\" : \"Tidak dapat menambahkan Produk\", {\n                    position: toast.POSITION.TOP_RIGHT\n                  });\n                });\n              }\n\n              _context4.next = 19;\n              break;\n\n            case 16:\n              _context4.prev = 16;\n              _context4.t0 = _context4[\"catch\"](6);\n              toast.error(\"Tidak dapat menambahkan Produk\", {\n                position: toast.POSITION.TOP_RIGHT\n              });\n\n            case 19:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4, null, [[6, 16]]);\n    }));\n\n    return function handlePutData(_x3, _x4) {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n\n  var checkSKU = /*#__PURE__*/function () {\n    var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(value) {\n      var endpoint, options, req, res;\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              setStatusSKU({\n                status: \"validating\",\n                message: \"\"\n              });\n              endpoint = process.env.NEXT_PUBLIC_URL + \"/products?filters[SKU][$eq]=\" + value;\n              options = {\n                method: \"GET\",\n                headers: {\n                  Authorization: \"Bearer \" + cookies.token\n                }\n              };\n              _context5.next = 5;\n              return fetch(endpoint, options);\n\n            case 5:\n              req = _context5.sent;\n              _context5.next = 8;\n              return req.json();\n\n            case 8:\n              res = _context5.sent;\n\n              if (req.status === 200) {\n                if (res.data.length > 0) {\n                  setStatusSKU({\n                    status: \"error\",\n                    message: \"SKU sudah digunakan\"\n                  });\n                } else {\n                  setStatusSKU({\n                    status: \"success\",\n                    message: \"\"\n                  });\n                }\n              } else {\n                setStatusSKU({\n                  status: \"error\",\n                  message: \"Error ketika mengambil data SKU\"\n                });\n              }\n\n            case 10:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5);\n    }));\n\n    return function checkSKU(_x5) {\n      return _ref6.apply(this, arguments);\n    };\n  }();\n\n  var handleValueChange = /*#__PURE__*/function () {\n    var _ref7 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6(changedValues, allValues) {\n      var fieldName, unitArr, unit;\n      return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n        while (1) {\n          switch (_context6.prev = _context6.next) {\n            case 0:\n              fieldName = Object.keys(changedValues)[0];\n              unitArr = fieldName.split(\"_\");\n              unit = unitArr[unitArr.length - 1]; // check SKU\n\n              if (fieldName === \"SKU\" && allValues.SKU !== \"\") {\n                debounce(checkSKU, 1000)(allValues.SKU);\n              } else if (fieldName === \"SKU\" && allValues.SKU === \"\") {\n                setStatusSKU({\n                  status: \"error\",\n                  message: \"SKU tidak boleh kosong\"\n                });\n              }\n\n              setDiskonValue(form, changedValues, allValues, fieldName, firstInput);\n              setHargaValue(form, changedValues, allValues, unit, firstInput);\n\n            case 6:\n            case \"end\":\n              return _context6.stop();\n          }\n        }\n      }, _callee6);\n    }));\n\n    return function handleValueChange(_x6, _x7) {\n      return _ref7.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Head, {\n      children: /*#__PURE__*/_jsxDEV(\"title\", {\n        children: \"Tambahkan Produk\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(DashboardLayout, {\n      children: /*#__PURE__*/_jsxDEV(LayoutWrapper, {\n        style: {},\n        children: [/*#__PURE__*/_jsxDEV(TitlePage, {\n          titleText: \"Tambahkan Produk\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(LayoutContent, {\n          children: /*#__PURE__*/_jsxDEV(_Form, {\n            form: form,\n            name: \"add_product\",\n            initialValues: {\n              remember: true\n            },\n            onFinish: onFinish,\n            onValuesChange: handleValueChange,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex flex-wrap -mx-3 mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-full md:w-1/3 px-3 mb-2 md:mb-0\",\n                children: [/*#__PURE__*/_jsxDEV(_Form.Item, {\n                  name: \"name\",\n                  rules: [{\n                    required: true,\n                    message: \"Nama Produk tidak boleh kosong!\"\n                  }],\n                  children: /*#__PURE__*/_jsxDEV(_Input, {\n                    style: {\n                      height: \"40px\"\n                    },\n                    placeholder: \"Nama Produk\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 308,\n                    columnNumber: 21\n                  }, _this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 299,\n                  columnNumber: 19\n                }, _this), /*#__PURE__*/_jsxDEV(Categories, {\n                  selectedCategory: category,\n                  onSelectCategory: setCategory,\n                  setSubCategories: setSubCategories,\n                  setSelectedSubCategory: setSelectedSubCategory,\n                  selectedSubCategory: selectedSubCategory\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 310,\n                  columnNumber: 19\n                }, _this), /*#__PURE__*/_jsxDEV(SubCategories, {\n                  subCategories: subCategories,\n                  onSelect: setSelectedSubCategory,\n                  selectedSubCategory: selectedSubCategory\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 317,\n                  columnNumber: 19\n                }, _this), /*#__PURE__*/_jsxDEV(_Form.Item, {\n                  name: \"description\",\n                  children: /*#__PURE__*/_jsxDEV(TextArea, {\n                    rows: 4,\n                    placeholder: \"Deskripsi\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 319,\n                    columnNumber: 21\n                  }, _this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 318,\n                  columnNumber: 19\n                }, _this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 298,\n                columnNumber: 17\n              }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-full md:w-1/3 px-3 mb-2 md:mb-0\",\n                children: [/*#__PURE__*/_jsxDEV(_Form.Item, {\n                  name: \"SKU\",\n                  hasFeedback: true,\n                  validateStatus: statusSKU.status,\n                  help: statusSKU.message,\n                  rules: [{\n                    required: true,\n                    message: \"SKU tidak boleh kosong!\"\n                  }],\n                  children: /*#__PURE__*/_jsxDEV(_Input, {\n                    style: {\n                      height: \"40px\"\n                    },\n                    placeholder: \"SKU\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 335,\n                    columnNumber: 21\n                  }, _this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 323,\n                  columnNumber: 19\n                }, _this), /*#__PURE__*/_jsxDEV(Manufactures, {\n                  data: manufactures.data,\n                  selectedManufactures: selectedManufactures,\n                  onSelect: setSelectedManufactures\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 337,\n                  columnNumber: 19\n                }, _this), /*#__PURE__*/_jsxDEV(Groups, {\n                  data: groups,\n                  selectedGroups: selectedGroups,\n                  onSelect: setSelectedGroup\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 338,\n                  columnNumber: 19\n                }, _this), /*#__PURE__*/_jsxDEV(Locations, {\n                  data: locations,\n                  onSelect: setSelectLocation\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 339,\n                  columnNumber: 19\n                }, _this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 322,\n                columnNumber: 17\n              }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-full md:w-1/3 px-3 mb-2 md:mb-0\",\n                children: /*#__PURE__*/_jsxDEV(Dragger, _objectSpread(_objectSpread({}, propsDagger), {}, {\n                  children: image == null ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"ant-upload-drag-icon\",\n                      children: /*#__PURE__*/_jsxDEV(_FileImageOutlined, {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 347,\n                        columnNumber: 27\n                      }, _this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 346,\n                      columnNumber: 25\n                    }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"ant-upload-text\",\n                      children: \"Klik atau tarik gambar ke kotak ini\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 349,\n                      columnNumber: 25\n                    }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"ant-upload-hint  m-3\",\n                      children: \"Gambar akan digunakan sebagai contoh tampilan produk\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 350,\n                      columnNumber: 25\n                    }, _this)]\n                  }, void 0, true) : /*#__PURE__*/_jsxDEV(Image, {\n                    layout: \"fill\",\n                    loader: imageLoader,\n                    src: process.env.NEXT_PUBLIC_URL + (image === null || image === void 0 ? void 0 : image.url)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 353,\n                    columnNumber: 23\n                  }, _this)\n                }), void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 343,\n                  columnNumber: 19\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 342,\n                columnNumber: 17\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 297,\n              columnNumber: 15\n            }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(\"h6\", {\n                className: \"\",\n                children: \"HARGA\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 360,\n                columnNumber: 17\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 359,\n              columnNumber: 15\n            }, _this), /*#__PURE__*/_jsxDEV(UnitTable, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 362,\n              columnNumber: 15\n            }, _this), /*#__PURE__*/_jsxDEV(_Form.Item, {\n              className: \"mt-5\",\n              children: loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \" flex float-left ml-3 \",\n                children: /*#__PURE__*/_jsxDEV(_Spin, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 367,\n                  columnNumber: 21\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 366,\n                columnNumber: 19\n              }, _this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(ConfirmDialog, {\n                  onConfirm: function onConfirm() {\n                    var _submitBtn$current;\n\n                    return submitBtn === null || submitBtn === void 0 ? void 0 : (_submitBtn$current = submitBtn.current) === null || _submitBtn$current === void 0 ? void 0 : _submitBtn$current.click();\n                  },\n                  onCancel: function onCancel() {},\n                  title: \"Tambah Produk\",\n                  message: \"Apakah anda yakin ingin menambahkan produk ini?\",\n                  component: /*#__PURE__*/_jsxDEV(_Button, {\n                    className: \" hover:text-white hover:bg-cyan-700 border border-cyan-700 ml-1\",\n                    children: \"Simpan\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 376,\n                    columnNumber: 34\n                  }, _this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 371,\n                  columnNumber: 21\n                }, _this), /*#__PURE__*/_jsxDEV(_Button, {\n                  htmlType: \"submit\",\n                  ref: submitBtn\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 378,\n                  columnNumber: 21\n                }, _this)]\n              }, void 0, true)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 364,\n              columnNumber: 15\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 288,\n            columnNumber: 13\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true);\n};\n\n_s(Tambah, \"s6PTX5dFU/Mk1AutXzrR8jSXOcw=\", false, function () {\n  return [_Form.useForm, useRouter];\n});\n\n_c = Tambah;\n\nTambah.getInitialProps = /*#__PURE__*/function () {\n  var _ref8 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7(context) {\n    var cookies, reqCategories, categories, reqGroups, groups, reqLocations, locations, reqManufactures, manufactures, reqSubCategories, subCategories;\n    return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n      while (1) {\n        switch (_context7.prev = _context7.next) {\n          case 0:\n            cookies = nookies.get(context);\n            _context7.next = 3;\n            return fetchDataCategories(cookies);\n\n          case 3:\n            reqCategories = _context7.sent;\n            _context7.next = 6;\n            return reqCategories.json();\n\n          case 6:\n            categories = _context7.sent;\n            _context7.next = 9;\n            return fetchDataGroups(cookies);\n\n          case 9:\n            reqGroups = _context7.sent;\n            _context7.next = 12;\n            return reqGroups.json();\n\n          case 12:\n            groups = _context7.sent;\n            _context7.next = 15;\n            return fetchDataLocations(cookies);\n\n          case 15:\n            reqLocations = _context7.sent;\n            _context7.next = 18;\n            return reqLocations.json();\n\n          case 18:\n            locations = _context7.sent;\n            _context7.next = 21;\n            return fetchDataManufactures(cookies);\n\n          case 21:\n            reqManufactures = _context7.sent;\n            _context7.next = 24;\n            return reqManufactures.json();\n\n          case 24:\n            manufactures = _context7.sent;\n            _context7.next = 27;\n            return fetchDataSubCategories(cookies);\n\n          case 27:\n            reqSubCategories = _context7.sent;\n            _context7.next = 30;\n            return reqSubCategories.json();\n\n          case 30:\n            subCategories = _context7.sent;\n            return _context7.abrupt(\"return\", {\n              props: {\n                categories: categories,\n                groups: groups,\n                locations: locations,\n                manufactures: manufactures,\n                subCategories: subCategories\n              }\n            });\n\n          case 32:\n          case \"end\":\n            return _context7.stop();\n        }\n      }\n    }, _callee7);\n  }));\n\n  return function (_x8) {\n    return _ref8.apply(this, arguments);\n  };\n}();\n\nvar fetchDataCategories = /*#__PURE__*/function () {\n  var _ref9 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8(cookies) {\n    var endpoint, options, req;\n    return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n      while (1) {\n        switch (_context8.prev = _context8.next) {\n          case 0:\n            endpoint = process.env.NEXT_PUBLIC_URL + \"/categories\";\n            options = {\n              method: \"GET\",\n              headers: {\n                \"Content-Type\": \"application/json\",\n                Authorization: \"Bearer \" + cookies.token\n              }\n            };\n            _context8.next = 4;\n            return fetch(endpoint, options);\n\n          case 4:\n            req = _context8.sent;\n            return _context8.abrupt(\"return\", req);\n\n          case 6:\n          case \"end\":\n            return _context8.stop();\n        }\n      }\n    }, _callee8);\n  }));\n\n  return function fetchDataCategories(_x9) {\n    return _ref9.apply(this, arguments);\n  };\n}();\n\nvar fetchDataManufactures = /*#__PURE__*/function () {\n  var _ref10 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee9(cookies) {\n    var endpoint, options, req;\n    return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n      while (1) {\n        switch (_context9.prev = _context9.next) {\n          case 0:\n            endpoint = process.env.NEXT_PUBLIC_URL + \"/manufactures\";\n            options = {\n              method: \"GET\",\n              headers: {\n                \"Content-Type\": \"application/json\",\n                Authorization: \"Bearer \" + cookies.token\n              }\n            };\n            _context9.next = 4;\n            return fetch(endpoint, options);\n\n          case 4:\n            req = _context9.sent;\n            return _context9.abrupt(\"return\", req);\n\n          case 6:\n          case \"end\":\n            return _context9.stop();\n        }\n      }\n    }, _callee9);\n  }));\n\n  return function fetchDataManufactures(_x10) {\n    return _ref10.apply(this, arguments);\n  };\n}();\n\nvar fetchDataSubCategories = /*#__PURE__*/function () {\n  var _ref11 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee10(cookies) {\n    var endpoint, options, req;\n    return _regeneratorRuntime.wrap(function _callee10$(_context10) {\n      while (1) {\n        switch (_context10.prev = _context10.next) {\n          case 0:\n            endpoint = process.env.NEXT_PUBLIC_URL + \"/sub-categories\";\n            options = {\n              method: \"GET\",\n              headers: {\n                \"Content-Type\": \"application/json\",\n                Authorization: \"Bearer \" + cookies.token\n              }\n            };\n            _context10.next = 4;\n            return fetch(endpoint, options);\n\n          case 4:\n            req = _context10.sent;\n            return _context10.abrupt(\"return\", req);\n\n          case 6:\n          case \"end\":\n            return _context10.stop();\n        }\n      }\n    }, _callee10);\n  }));\n\n  return function fetchDataSubCategories(_x11) {\n    return _ref11.apply(this, arguments);\n  };\n}();\n\nvar fetchDataGroups = /*#__PURE__*/function () {\n  var _ref12 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee11(cookies) {\n    var endpoint, options, req;\n    return _regeneratorRuntime.wrap(function _callee11$(_context11) {\n      while (1) {\n        switch (_context11.prev = _context11.next) {\n          case 0:\n            endpoint = process.env.NEXT_PUBLIC_URL + \"/groups\";\n            options = {\n              method: \"GET\",\n              headers: {\n                \"Content-Type\": \"application/json\",\n                Authorization: \"Bearer \" + cookies.token\n              }\n            };\n            _context11.next = 4;\n            return fetch(endpoint, options);\n\n          case 4:\n            req = _context11.sent;\n            return _context11.abrupt(\"return\", req);\n\n          case 6:\n          case \"end\":\n            return _context11.stop();\n        }\n      }\n    }, _callee11);\n  }));\n\n  return function fetchDataGroups(_x12) {\n    return _ref12.apply(this, arguments);\n  };\n}();\n\nvar fetchDataLocations = /*#__PURE__*/function () {\n  var _ref13 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee12(cookies) {\n    var endpoint, options, req;\n    return _regeneratorRuntime.wrap(function _callee12$(_context12) {\n      while (1) {\n        switch (_context12.prev = _context12.next) {\n          case 0:\n            endpoint = process.env.NEXT_PUBLIC_URL + \"/locations\";\n            options = {\n              method: \"GET\",\n              headers: {\n                \"Content-Type\": \"application/json\",\n                Authorization: \"Bearer \" + cookies.token\n              }\n            };\n            _context12.next = 4;\n            return fetch(endpoint, options);\n\n          case 4:\n            req = _context12.sent;\n            return _context12.abrupt(\"return\", req);\n\n          case 6:\n          case \"end\":\n            return _context12.stop();\n        }\n      }\n    }, _callee12);\n  }));\n\n  return function fetchDataLocations(_x13) {\n    return _ref13.apply(this, arguments);\n  };\n}();\n\nexport default Tambah;\n\nvar _c;\n\n$RefreshReg$(_c, \"Tambah\");","map":{"version":3,"sources":["/Users/yudiananta/Development/NextJS/ERP Dev/JS Deploy/ERP-Sejati/pages/dashboard/produk/tambah.js"],"names":["useRef","useState","Head","LayoutContent","LayoutWrapper","nookies","toast","DashboardLayout","TitlePage","Categories","Manufactures","SubCategories","Groups","Locations","useRouter","Image","UnitTable","setDiskonValue","setHargaValue","ConfirmDialog","debounce","Tambah","props","image","setImage","category","setCategory","uploadedOnce","setUploadedOnce","fileList","setFileList","status","message","statusSKU","setStatusSKU","useForm","form","loading","setLoading","firstInput","setFirstInputDiskon","cookies","get","router","submitBtn","Dragger","TextArea","manufactures","groups","locations","selectedManufactures","setSelectedManufactures","selectedGroups","setSelectedGroup","selectLocations","setSelectLocation","subCategories","setSubCategories","selectedSubCategory","setSelectedSubCategory","imageLoader","src","process","env","NEXT_PUBLIC_URL","url","propsDagger","name","multiple","showUploadList","showDownloadIcon","showRemoveIcon","onRemove","info","onChange","length","endpoint","file","originFileObj","data","FormData","append","options","method","headers","Authorization","token","body","fetch","req","json","res","success","error","onFinish","values","categoryID","id","parseInt","category_id","subCategoryID","manufacturesID","groupID","locationsID","map","locationId","postData","putData","sub_category","manufacture","group","console","log","handlePostData","postRes","handlePutData","dataPost","JSONdata","JSON","stringify","key","undefined","NaN","dataPut","resetFields","position","POSITION","TOP_RIGHT","reload","details","errors","ErrorMsg","path","checkSKU","value","handleValueChange","changedValues","allValues","fieldName","Object","keys","unitArr","split","unit","SKU","remember","required","height","current","click","getInitialProps","context","fetchDataCategories","reqCategories","categories","fetchDataGroups","reqGroups","fetchDataLocations","reqLocations","fetchDataManufactures","reqManufactures","fetchDataSubCategories","reqSubCategories"],"mappings":"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","sourcesContent":["import { useRef, useState } from \"react\";\nimport Head from \"next/head\";\nimport LayoutContent from \"@iso/components/utility/layoutContent\";\nimport LayoutWrapper from \"@iso/components/utility/layoutWrapper.js\";\nimport { Button, Form, Input, message, Upload, Space } from \"antd\";\nimport nookies from \"nookies\";\nimport { toast } from \"react-toastify\";\nimport { Spin, Row } from \"antd\";\nimport DashboardLayout from \"../../../containers/DashboardLayout/DashboardLayout\";\nimport TitlePage from \"../../../components/TitlePage/TitlePage\";\nimport Categories from \"../../../components/Form/AddProduct/Categories\";\nimport Manufactures from \"../../../components/Form/AddProduct/Manufactures\";\nimport SubCategories from \"../../../components/Form/AddProduct/subCategories\";\nimport Groups from \"../../../components/Form/AddProduct/Groups\";\nimport Locations from \"../../../components/Form/AddProduct/Locations\";\nimport { useRouter } from \"next/router\";\nimport Image from \"next/image\";\nimport UnitTable from \"../../../components/ReactDataTable/Product/UnitsTable\";\nimport { FileImageOutlined } from \"@ant-design/icons\";\nimport setDiskonValue from \"./utility/setDiskonValue\";\nimport setHargaValue from \"./utility/setHargaValue\";\nimport ConfirmDialog from \"../../../components/Alert/ConfirmDialog\";\nimport debounce from \"./utility/debounce\";\n\nconst Tambah = ({ props }) => {\n  const [image, setImage] = useState();\n  const [category, setCategory] = useState();\n  const [uploadedOnce, setUploadedOnce] = useState(true);\n  const [fileList, setFileList] = useState([]);\n  const [statusSKU, setStatusSKU] = useState({\n    status: \"\",\n    message: \"\",\n  });\n  const [form] = Form.useForm();\n  const [loading, setLoading] = useState(false);\n  const [firstInput, setFirstInputDiskon] = useState(true);\n  const cookies = nookies.get(null, \"token\");\n  const router = useRouter();\n  const submitBtn = useRef();\n\n  const { Dragger } = Upload;\n  const { TextArea } = Input;\n\n  const manufactures = props.manufactures;\n  const groups = props.groups;\n  const locations = props.locations;\n\n  const [selectedManufactures, setSelectedManufactures] = useState({});\n  const [selectedGroups, setSelectedGroup] = useState({});\n  const [selectLocations, setSelectLocation] = useState({});\n\n  const [subCategories, setSubCategories] = useState([]);\n  const [selectedSubCategory, setSelectedSubCategory] = useState();\n\n  const imageLoader = ({ src }) => {\n    return process.env.NEXT_PUBLIC_URL + image?.url;\n  };\n\n  const propsDagger = {\n    name: \"files\",\n    multiple: false,\n    fileList: fileList,\n    showUploadList: {\n      showDownloadIcon: false,\n      showRemoveIcon: true,\n    },\n\n    onRemove(info) {\n      setUploadedOnce(true);\n      setImage();\n      setFileList([]);\n    },\n\n    async onChange(info) {\n      if (info.fileList.length === 1) {\n        const endpoint = process.env.NEXT_PUBLIC_URL + \"/upload\";\n        const file = info.file.originFileObj;\n        const data = new FormData();\n        data.append(\"files\", file);\n\n        setFileList(info.fileList);\n\n        const options = {\n          method: \"POST\",\n          headers: {\n            Authorization: \"Bearer \" + cookies.token,\n          },\n          body: data,\n        };\n\n        if (uploadedOnce) {\n          setUploadedOnce(false);\n          const req = await fetch(endpoint, options);\n          const res = await req.json();\n\n          if (req.status === 200) {\n            setImage(res[0]);\n\n            message.success(`${info.file.name} berhasil diupload`);\n          } else {\n            message.error(`${info.file.name} gagal upload`);\n          }\n        }\n      } else if (info.fileList.length === 0) {\n        message.info(`Gambar berhasil dihapus`);\n      } else {\n        message.error(`Hanya dapat menambahkan 1 gambar`);\n      }\n    },\n  };\n\n  const onFinish = async (values) => {\n    setLoading(true);\n\n    // if (selectedSubCategory === 0) {\n    //   message.error(\n    //     `Sub Kategori tidak ditemukan pada Induk Kategori. Silahkan cek kembali`\n    //   );\n    // }\n\n    const categoryID = {\n      id: parseInt(values?.category_id),\n    };\n\n    const subCategoryID = {\n      id: values?.subCategories,\n    };\n\n    const manufacturesID = {\n      id: values?.manufactures,\n    };\n\n    const groupID = {\n      id: values?.groups,\n    };\n\n    const locationsID = values.locations.map((locationId) => locationId);\n\n    delete values.locations;\n    delete values.category_id;\n    delete values.subCategories;\n    delete values.manufactures;\n    delete values.groups;\n\n    const postData = {\n      ...values,\n      locations: locationsID,\n    };\n\n    const putData = {\n      category: categoryID,\n      sub_category: subCategoryID,\n      manufacture: manufacturesID,\n      group: groupID,\n      locations: locationsID,\n      image: { id: image?.id },\n    };\n\n    console.log(\"put data\", putData);\n\n    // POST DATA\n    const postRes = await handlePostData(postData);\n    console.log(postRes);\n    // PUT DATA\n    await handlePutData(postRes?.data?.id, putData);\n\n    setLoading(false);\n  };\n\n  const handlePostData = async (data) => {\n    const endpoint = process.env.NEXT_PUBLIC_URL + \"/products\";\n    const dataPost = { data: data };\n    const JSONdata = JSON.stringify(dataPost);\n    const options = {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + cookies.token,\n      },\n      body: JSONdata,\n    };\n\n    const req = await fetch(endpoint, options);\n    const res = await req.json();\n\n    return res;\n  };\n\n  const handlePutData = async (id, data) => {\n    const endpoint = process.env.NEXT_PUBLIC_URL + \"/products/\" + id;\n\n    for (const key in data) {\n      if (data[key].id === undefined || data[key].id === NaN) {\n        delete data[key];\n      }\n    }\n\n    console.log(endpoint);\n\n    const dataPut = { data: data };\n    const JSONdata = JSON.stringify(dataPut);\n\n    const options = {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + cookies.token,\n      },\n      body: JSONdata,\n    };\n\n    try {\n      const req = await fetch(endpoint, options);\n      const res = await req.json();\n\n      if (req.status === 200) {\n        setImage();\n        form.resetFields();\n        toast.success(\"Produk berhasil ditambahkan!\", {\n          position: toast.POSITION.TOP_RIGHT,\n        });\n        router.reload();\n      } else {\n        res?.error?.details?.errors.map((error) => {\n          const ErrorMsg = error.path[0];\n          toast.error(ErrorMsg === \"SKU\" ? \"SKU sudah digunakan\" : \"Tidak dapat menambahkan Produk\", {\n            position: toast.POSITION.TOP_RIGHT,\n          });\n        });\n      }\n    } catch (error) {\n      toast.error(\"Tidak dapat menambahkan Produk\", {\n        position: toast.POSITION.TOP_RIGHT,\n      });\n    }\n  };\n\n  const checkSKU = async (value) => {\n    setStatusSKU({ status: \"validating\", message: \"\" });\n\n    const endpoint = process.env.NEXT_PUBLIC_URL + \"/products?filters[SKU][$eq]=\" + value;\n    const options = {\n      method: \"GET\",\n      headers: {\n        Authorization: \"Bearer \" + cookies.token,\n      },\n    };\n\n    const req = await fetch(endpoint, options);\n    const res = await req.json();\n\n    if (req.status === 200) {\n      if (res.data.length > 0) {\n        setStatusSKU({ status: \"error\", message: \"SKU sudah digunakan\" });\n      } else {\n        setStatusSKU({ status: \"success\", message: \"\" });\n      }\n    } else {\n      setStatusSKU({ status: \"error\", message: \"Error ketika mengambil data SKU\" });\n    }\n  };\n\n  const handleValueChange = async (changedValues, allValues) => {\n    const fieldName = Object.keys(changedValues)[0];\n    const unitArr = fieldName.split(\"_\");\n    const unit = unitArr[unitArr.length - 1];\n\n    // check SKU\n    if (fieldName === \"SKU\" && allValues.SKU !== \"\") {\n      debounce(checkSKU, 1000)(allValues.SKU);\n    } else if (fieldName === \"SKU\" && allValues.SKU === \"\") {\n      setStatusSKU({ status: \"error\", message: \"SKU tidak boleh kosong\" });\n    }\n\n    setDiskonValue(form, changedValues, allValues, fieldName, firstInput);\n    setHargaValue(form, changedValues, allValues, unit, firstInput);\n  };\n\n  return (\n    <>\n      <Head>\n        <title>Tambahkan Produk</title>\n      </Head>\n      <DashboardLayout>\n        <LayoutWrapper style={{}}>\n          <TitlePage titleText={\"Tambahkan Produk\"} />\n          <LayoutContent>\n            <Form\n              form={form}\n              name=\"add_product\"\n              initialValues={{\n                remember: true,\n              }}\n              onFinish={onFinish}\n              onValuesChange={handleValueChange}\n            >\n              <div className=\"flex flex-wrap -mx-3 mb-3\">\n                <div className=\"w-full md:w-1/3 px-3 mb-2 md:mb-0\">\n                  <Form.Item\n                    name=\"name\"\n                    rules={[\n                      {\n                        required: true,\n                        message: \"Nama Produk tidak boleh kosong!\",\n                      },\n                    ]}\n                  >\n                    <Input style={{ height: \"40px\" }} placeholder=\"Nama Produk\" />\n                  </Form.Item>\n                  <Categories\n                    selectedCategory={category}\n                    onSelectCategory={setCategory}\n                    setSubCategories={setSubCategories}\n                    setSelectedSubCategory={setSelectedSubCategory}\n                    selectedSubCategory={selectedSubCategory}\n                  />\n                  <SubCategories subCategories={subCategories} onSelect={setSelectedSubCategory} selectedSubCategory={selectedSubCategory} />\n                  <Form.Item name=\"description\">\n                    <TextArea rows={4} placeholder=\"Deskripsi\" />\n                  </Form.Item>\n                </div>\n                <div className=\"w-full md:w-1/3 px-3 mb-2 md:mb-0\">\n                  <Form.Item\n                    name=\"SKU\"\n                    hasFeedback\n                    validateStatus={statusSKU.status}\n                    help={statusSKU.message}\n                    rules={[\n                      {\n                        required: true,\n                        message: \"SKU tidak boleh kosong!\",\n                      },\n                    ]}\n                  >\n                    <Input style={{ height: \"40px\" }} placeholder=\"SKU\" />\n                  </Form.Item>\n                  <Manufactures data={manufactures.data} selectedManufactures={selectedManufactures} onSelect={setSelectedManufactures} />\n                  <Groups data={groups} selectedGroups={selectedGroups} onSelect={setSelectedGroup} />\n                  <Locations data={locations} onSelect={setSelectLocation} />\n                </div>\n\n                <div className=\"w-full md:w-1/3 px-3 mb-2 md:mb-0\">\n                  <Dragger {...propsDagger}>\n                    {image == null ? (\n                      <>\n                        <p className=\"ant-upload-drag-icon\">\n                          <FileImageOutlined />\n                        </p>\n                        <p className=\"ant-upload-text\">Klik atau tarik gambar ke kotak ini</p>\n                        <p className=\"ant-upload-hint  m-3\">Gambar akan digunakan sebagai contoh tampilan produk</p>\n                      </>\n                    ) : (\n                      <Image layout=\"fill\" loader={imageLoader} src={process.env.NEXT_PUBLIC_URL + image?.url} />\n                    )}\n                  </Dragger>\n                </div>\n              </div>\n\n              <div>\n                <h6 className=\"\">HARGA</h6>\n              </div>\n              <UnitTable />\n\n              <Form.Item className=\"mt-5\">\n                {loading ? (\n                  <div className=\" flex float-left ml-3 \">\n                    <Spin />\n                  </div>\n                ) : (\n                  <>\n                    <ConfirmDialog\n                      onConfirm={() => submitBtn?.current?.click()}\n                      onCancel={() => {}}\n                      title=\"Tambah Produk\"\n                      message=\"Apakah anda yakin ingin menambahkan produk ini?\"\n                      component={<Button className=\" hover:text-white hover:bg-cyan-700 border border-cyan-700 ml-1\">Simpan</Button>}\n                    />\n                    <Button htmlType=\"submit\" ref={submitBtn}></Button>\n                  </>\n                )}\n              </Form.Item>\n            </Form>\n          </LayoutContent>\n        </LayoutWrapper>\n      </DashboardLayout>\n    </>\n  );\n};\n\nTambah.getInitialProps = async (context) => {\n  const cookies = nookies.get(context);\n\n  const reqCategories = await fetchDataCategories(cookies);\n  const categories = await reqCategories.json();\n\n  const reqGroups = await fetchDataGroups(cookies);\n  const groups = await reqGroups.json();\n\n  const reqLocations = await fetchDataLocations(cookies);\n  const locations = await reqLocations.json();\n\n  const reqManufactures = await fetchDataManufactures(cookies);\n  const manufactures = await reqManufactures.json();\n\n  const reqSubCategories = await fetchDataSubCategories(cookies);\n  const subCategories = await reqSubCategories.json();\n\n  return {\n    props: {\n      categories,\n      groups,\n      locations,\n      manufactures,\n      subCategories,\n    },\n  };\n};\n\nconst fetchDataCategories = async (cookies) => {\n  const endpoint = process.env.NEXT_PUBLIC_URL + \"/categories\";\n  const options = {\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: \"Bearer \" + cookies.token,\n    },\n  };\n\n  const req = await fetch(endpoint, options);\n  return req;\n};\n\nconst fetchDataManufactures = async (cookies) => {\n  const endpoint = process.env.NEXT_PUBLIC_URL + \"/manufactures\";\n  const options = {\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: \"Bearer \" + cookies.token,\n    },\n  };\n\n  const req = await fetch(endpoint, options);\n  return req;\n};\n\nconst fetchDataSubCategories = async (cookies) => {\n  const endpoint = process.env.NEXT_PUBLIC_URL + \"/sub-categories\";\n  const options = {\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: \"Bearer \" + cookies.token,\n    },\n  };\n\n  const req = await fetch(endpoint, options);\n  return req;\n};\n\nconst fetchDataGroups = async (cookies) => {\n  const endpoint = process.env.NEXT_PUBLIC_URL + \"/groups\";\n  const options = {\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: \"Bearer \" + cookies.token,\n    },\n  };\n\n  const req = await fetch(endpoint, options);\n  return req;\n};\n\nconst fetchDataLocations = async (cookies) => {\n  const endpoint = process.env.NEXT_PUBLIC_URL + \"/locations\";\n  const options = {\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: \"Bearer \" + cookies.token,\n    },\n  };\n\n  const req = await fetch(endpoint, options);\n  return req;\n};\n\nexport default Tambah;\n"]},"metadata":{},"sourceType":"module"}