{"ast":null,"code":"import _asyncToGenerator from \"/Users/yudiananta/Development/NextJS/ERP Dev/JS Deploy/ERP-Sejati/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _regeneratorRuntime from \"/Users/yudiananta/Development/NextJS/ERP Dev/JS Deploy/ERP-Sejati/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport Head from \"next/head\";\nimport React, { useState } from \"react\";\nimport LayoutContent from \"@iso/components/utility/layoutContent\";\nimport LayoutWrapper from \"@iso/components/utility/layoutWrapper.js\";\nimport { useRouter } from \"next/router\";\nimport { toast } from \"react-toastify\";\nimport nookies from \"nookies\";\nimport DashboardLayout from \"../../../../containers/DashboardLayout/DashboardLayout\";\nimport TitlePage from \"../../../../components/TitlePage/TitlePage\";\nimport UnitTable from \"../../../../components/ReactDataTable/UnitTable\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\n\nvar Satuan = function Satuan(_ref) {\n  var props = _ref.props;\n  console.log(props);\n  var data = props.data.data;\n\n  var _useState = useState(data),\n      unit = _useState[0],\n      setUnit = _useState[1];\n\n  var router = useRouter();\n\n  var handleAddUnit = function handleAddUnit() {\n    router.push(\"/dashboard/produk/satuan/tambah\");\n  };\n\n  var handleDelete = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(id) {\n      var endpoint, cookies, options, req, res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              endpoint = process.env.NEXT_PUBLIC_URL + \"/units/\" + id;\n              cookies = nookies.get(null, \"token\");\n              options = {\n                method: \"DELETE\",\n                headers: {\n                  \"Content-Type\": \"application/json\",\n                  Authorization: \"Bearer \" + cookies.token\n                }\n              };\n              _context.next = 5;\n              return fetch(endpoint, options);\n\n            case 5:\n              req = _context.sent;\n              _context.next = 8;\n              return req.json();\n\n            case 8:\n              res = _context.sent;\n\n              if (!res) {\n                _context.next = 14;\n                break;\n              }\n\n              _context.next = 12;\n              return fetchData(cookies);\n\n            case 12:\n              toast.success(\"Satuan berhasil dihapus\");\n              router.reload(\"/dashboard/produk/satuan\");\n\n            case 14:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleDelete(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsx(Head, {\n      children: /*#__PURE__*/_jsx(\"title\", {\n        children: \"Satuan Produk\"\n      })\n    }), /*#__PURE__*/_jsx(DashboardLayout, {\n      children: /*#__PURE__*/_jsxs(LayoutWrapper, {\n        style: {},\n        children: [/*#__PURE__*/_jsx(TitlePage, {\n          titleText: \"Satuan\"\n        }), /*#__PURE__*/_jsxs(LayoutContent, {\n          children: [/*#__PURE__*/_jsx(\"button\", {\n            onClick: handleAddUnit,\n            type: \"button\",\n            className: \"bg-cyan-700 rounded px-5 py-2 hover:bg-cyan-800  shadow-sm flex float-right mb-5\",\n            children: /*#__PURE__*/_jsx(\"div\", {\n              className: \"text-white text-center text-sm font-bold\",\n              children: /*#__PURE__*/_jsx(\"a\", {\n                className: \"text-white no-underline text-xs sm:text-xs\",\n                children: \"+ Tambah\"\n              })\n            })\n          }), /*#__PURE__*/_jsx(UnitTable, {\n            unitData: unit,\n            onDelete: handleDelete\n          })]\n        })]\n      })\n    })]\n  });\n};\n\nSatuan.getInitialProps = /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(context) {\n    var cookies, data, req;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            cookies = nookies.get(context);\n            _context2.next = 3;\n            return fetchData(cookies);\n\n          case 3:\n            req = _context2.sent;\n            _context2.next = 6;\n            return req.json();\n\n          case 6:\n            data = _context2.sent;\n            return _context2.abrupt(\"return\", {\n              props: {\n                data: data\n              }\n            });\n\n          case 8:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n\n  return function (_x2) {\n    return _ref3.apply(this, arguments);\n  };\n}();\n\nvar fetchData = /*#__PURE__*/function () {\n  var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(cookies) {\n    var endpoint, options, req;\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            endpoint = process.env.NEXT_PUBLIC_URL + \"/units\";\n            options = {\n              method: \"GET\",\n              headers: {\n                \"Content-Type\": \"application/json\",\n                Authorization: \"Bearer \" + cookies.token\n              }\n            };\n            _context3.next = 4;\n            return fetch(endpoint, options);\n\n          case 4:\n            req = _context3.sent;\n            return _context3.abrupt(\"return\", req);\n\n          case 6:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n\n  return function fetchData(_x3) {\n    return _ref4.apply(this, arguments);\n  };\n}();\n\nexport default Satuan;","map":null,"metadata":{},"sourceType":"module"}