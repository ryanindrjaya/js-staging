{"ast":null,"code":"import _Button from \"antd/lib/button\";\nimport _Spin from \"antd/lib/spin\";\nimport _DatePicker from \"antd/lib/date-picker\";\nimport _Select from \"antd/lib/select\";\nimport _InputNumber from \"antd/lib/input-number\";\nimport _Row from \"antd/lib/row\";\nimport _notification from \"antd/lib/notification\";\nimport _Form from \"antd/lib/form\";\nimport _slicedToArray from \"/Users/yudiananta/Development/NextJS/ERP Dev/JS Deploy/ERP-Sejati/node_modules/next/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _Collapse from \"antd/lib/collapse\";\nimport _Input from \"antd/lib/input\";\nimport _asyncToGenerator from \"/Users/yudiananta/Development/NextJS/ERP Dev/JS Deploy/ERP-Sejati/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _regeneratorRuntime from \"/Users/yudiananta/Development/NextJS/ERP Dev/JS Deploy/ERP-Sejati/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport Head from \"next/head\";\nimport React, { useEffect, useState } from \"react\";\nimport { useRouter } from \"next/router\";\nimport LayoutContent from \"@iso/components/utility/layoutContent\";\nimport DashboardLayout from \"../../../../../containers/DashboardLayout/DashboardLayout\";\nimport LayoutWrapper from \"@iso/components/utility/layoutWrapper.js\";\nimport TitlePage from \"@iso/components/TitlePage/TitlePage\";\nimport nookies from \"nookies\";\nimport PurchasingPaymentTable from \"../../../../../components/ReactDataTable/Purchases/PurchasingPaymentTable\";\nimport * as moment from \"moment\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\n\nPembayaran.getInitialProps = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(context) {\n    var cookies, id, endpoint, options, res, purchases;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            cookies = nookies.get(context);\n            id = context.query.id;\n            endpoint = process.env.NEXT_PUBLIC_URL + \"/purchasings/\" + id + \"?populate=deep\";\n            options = {\n              method: \"GET\",\n              headers: {\n                \"Content-Type\": \"application/json\",\n                Authorization: \"Bearer \" + cookies.token\n              }\n            };\n            _context.next = 6;\n            return fetch(endpoint, options);\n\n          case 6:\n            res = _context.sent;\n            _context.next = 9;\n            return res.json();\n\n          case 9:\n            purchases = _context.sent;\n            return _context.abrupt(\"return\", {\n              props: {\n                purchases: purchases\n              }\n            });\n\n          case 11:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function (_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nfunction Pembayaran(_ref2) {\n  var _props$purchases$data, _props$purchases$data2, _props$purchases$data3, _props$purchases$data4, _props$purchases$data5, _props$purchases$data6, _props$purchases$data7, _props$purchases$data8, _props$purchases$data9, _props$purchases$data10, _props$purchases$data11, _props$purchases$data12, _purchasingHistory$la;\n\n  var props = _ref2.props;\n  var TextArea = _Input.TextArea;\n  var Panel = _Collapse.Panel;\n\n  var _Form$useForm = _Form.useForm(),\n      _Form$useForm2 = _slicedToArray(_Form$useForm, 1),\n      form = _Form$useForm2[0];\n\n  var _useState = useState(false),\n      loading = _useState[0],\n      setLoading = _useState[1];\n\n  var _useState2 = useState(0),\n      totalPayment = _useState2[0],\n      setTotalPayment = _useState2[1];\n\n  var _useState3 = useState(0),\n      tempoPayment = _useState3[0],\n      setTempoPayment = _useState3[1];\n\n  var _useState4 = useState(0),\n      changePrice = _useState4[0],\n      setChangePrice = _useState4[1];\n\n  var router = useRouter();\n  var data = props.purchases;\n  var dataTable = props.purchases.data.attributes.purchasing_details;\n  var noLPB = props.purchases.data.attributes.no_purchasing;\n  var tempoTime = props.purchases.data.attributes.tempo_time;\n  var tempoDays = props.purchases.data.attributes.tempo_days;\n  var statusPembayaran = props.purchases.data.attributes.status_pembayaran; // SUPPLIER INFO\n\n  var supplierName = (_props$purchases$data = props.purchases.data.attributes.supplier) === null || _props$purchases$data === void 0 ? void 0 : (_props$purchases$data2 = _props$purchases$data.data) === null || _props$purchases$data2 === void 0 ? void 0 : _props$purchases$data2.attributes.name;\n  var supplierAddress = (_props$purchases$data3 = props.purchases.data.attributes.supplier) === null || _props$purchases$data3 === void 0 ? void 0 : (_props$purchases$data4 = _props$purchases$data3.data) === null || _props$purchases$data4 === void 0 ? void 0 : _props$purchases$data4.attributes.address;\n  var noNota = (_props$purchases$data5 = props.purchases.data.attributes.no_nota_suppplier) !== null && _props$purchases$data5 !== void 0 ? _props$purchases$data5 : \"-\"; // PURCHASING INFO\n\n  var purchasingDate = props.purchases.data.attributes.date_purchasing;\n  var statusPembelian = props.purchases.data.attributes.status;\n  var lokasi = (_props$purchases$data6 = props.purchases.data.attributes) === null || _props$purchases$data6 === void 0 ? void 0 : (_props$purchases$data7 = _props$purchases$data6.location.data) === null || _props$purchases$data7 === void 0 ? void 0 : _props$purchases$data7.attributes.name;\n  var totalItem = (_props$purchases$data8 = (_props$purchases$data9 = props.purchases.data.attributes.purchasing_details.data) === null || _props$purchases$data9 === void 0 ? void 0 : _props$purchases$data9.length) !== null && _props$purchases$data8 !== void 0 ? _props$purchases$data8 : 0;\n  var deliveryFee = (_props$purchases$data10 = props.purchases.data.attributes.delivery_fee) !== null && _props$purchases$data10 !== void 0 ? _props$purchases$data10 : 0;\n  var priceAfterDisc = (_props$purchases$data11 = props.purchases.data.attributes.price_after_disc) !== null && _props$purchases$data11 !== void 0 ? _props$purchases$data11 : 0;\n  var totalPurchasing = props.purchases.data.attributes.total_purchasing; // HISTORY\n\n  var purchasingHistory = (_props$purchases$data12 = props.purchases.data.attributes.purchasing_payments) === null || _props$purchases$data12 === void 0 ? void 0 : _props$purchases$data12.data;\n  var lastIndex = purchasingHistory.length - 1;\n  var paymentRemaining = (_purchasingHistory$la = purchasingHistory[lastIndex]) === null || _purchasingHistory$la === void 0 ? void 0 : _purchasingHistory$la.attributes.payment_remaining;\n  useEffect(function () {\n    setTempoPayment(getPriceAfterDisc());\n  }, []);\n\n  var getPriceAfterDisc = function getPriceAfterDisc() {\n    // set payment remaining if there's a payment before.\n    // if not, then set to default\n    if (paymentRemaining >= 0) {\n      return paymentRemaining;\n    } else {\n      if (priceAfterDisc === 0) {\n        return totalPurchasing;\n      } else {\n        return priceAfterDisc;\n      }\n    }\n  };\n\n  var getPriceInclTax = function getPriceInclTax() {\n    if (priceAfterDisc === 0) {\n      return totalPurchasing;\n    } else {\n      return priceAfterDisc;\n    }\n  };\n\n  var getTotalProduct = function getTotalProduct() {\n    var total = 0;\n    props.purchases.data.attributes.purchasing_details.data.forEach(function (element) {\n      total = total + element.attributes.sub_total;\n    });\n    return total;\n  };\n\n  var getAdditionalFee = function getAdditionalFee() {\n    var total = 0;\n\n    for (var index = 1; index < 6; index++) {\n      var price = props.purchases.data.attributes[\"additional_fee_\".concat(index, \"_sub\")];\n      total = total + price;\n    }\n\n    return total;\n  };\n\n  var getDiscPrice = function getDiscPrice() {\n    var total = 0;\n\n    if (props.purchases.data.attributes.disc_type === \"Tetap\") {\n      total = props.purchases.data.attributes.disc_value;\n    } else if (props.purchases.data.attributes.disc_type === \"Persentase\") {\n      var totalProduct = getTotalProduct();\n      total = totalProduct - totalProduct * props.purchases.data.attributes.disc_value;\n    }\n\n    return total;\n  };\n\n  var getDPP = function getDPP() {\n    var isDPPactive = props.purchases.data.attributes.DPP_active;\n    var priceDisc = props.purchases.data.attributes.price_after_disc;\n    var totalPurchasing = props.purchases.data.attributes.total_purchasing;\n    var dppValue = 0;\n\n    if (isDPPactive) {\n      if (priceDisc !== 0) {\n        dppValue = priceDisc / 1.11;\n      } else {\n        dppValue = totalPurchasing / 1.11;\n      }\n    }\n\n    return dppValue;\n  };\n\n  var getPPN = function getPPN() {\n    var dppPrice = getDPP();\n    var ppnPrice = 0;\n    var isPPNactive = props.purchases.data.attributes.PPN_active;\n    var totalPurchasing = props.purchases.data.attributes.total_purchasing;\n\n    if (isPPNactive) {\n      ppnPrice = totalPurchasing - dppPrice;\n    }\n\n    return ppnPrice;\n  };\n\n  var setTotal = function setTotal() {\n    var total = 0;\n    var field = form.getFieldsValue();\n\n    for (var index = 1; index < 4; index++) {\n      total = total + field[\"payment_value_\".concat(index)];\n    }\n\n    var totalTempo = getPriceAfterDisc();\n    var remains = totalTempo - total;\n    setTotalPayment(total);\n\n    if (remains >= 0) {\n      setTempoPayment(remains);\n      setChangePrice(0);\n    } else {\n      setTempoPayment(0);\n      setChangePrice(remains * -1);\n    }\n  };\n\n  var getFirstPayment = function getFirstPayment() {\n    var _props$purchases$data13, _props$purchases$data14;\n\n    var firstPayment = 0;\n    var paymentHistory = (_props$purchases$data13 = props.purchases.data.attributes.purchasing_payments.data[0]) === null || _props$purchases$data13 === void 0 ? void 0 : (_props$purchases$data14 = _props$purchases$data13.attributes) === null || _props$purchases$data14 === void 0 ? void 0 : _props$purchases$data14.payment;\n\n    if (paymentHistory) {\n      firstPayment = paymentHistory;\n    }\n\n    return firstPayment;\n  };\n\n  var formatter = new Intl.NumberFormat(\"id-ID\", {\n    style: \"currency\",\n    currency: \"IDR\",\n    maximumFractionDigits: 0\n  });\n\n  var onFinish = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(values) {\n      var isValid, index;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              setLoading(true);\n              isValid = true; // checking payment method\n\n              if (totalPayment === 0) {\n                isValid = false;\n\n                _notification[\"error\"]({\n                  message: \"Pembayaran kosong\",\n                  description: \"Tidak ada pembayaran yang dilakukan. Silahkan masukan jumlah pembayaran yang akan dilakukan\"\n                });\n              }\n\n              for (index = 1; index < 4; index++) {\n                if (values[\"payment_value_\".concat(index)]) {\n                  if (values[\"payment_method_\".concat(index)] === null || values[\"payment_method_\".concat(index)] === undefined) {\n                    _notification[\"error\"]({\n                      message: \"Metode Pembayaran \".concat(index, \" Kosong\"),\n                      description: \"Silahkan pilih metode pembayaran terlebih dahulu\"\n                    });\n\n                    isValid = false;\n                  }\n                }\n              } // if valid go to next steo\n\n\n              if (!isValid) {\n                _context2.next = 7;\n                break;\n              }\n\n              _context2.next = 7;\n              return createPayment(values);\n\n            case 7:\n              setLoading(false);\n\n            case 8:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function onFinish(_x2) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var createPayment = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(values) {\n      var date, newDate, data, endpoint, JSONdata, cookies, options, req, res;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              date = new Date(values.payment_date);\n              newDate = moment.utc(date).utcOffset(7 * 60).format();\n              values.payment_date = newDate;\n              values.payment = totalPayment;\n              values.payment_remaining = tempoPayment;\n              values.total_payment = getPriceInclTax();\n              values.change = changePrice;\n              values.purchasing = {\n                id: props.purchases.data.id\n              };\n              data = {\n                data: values\n              };\n              endpoint = process.env.NEXT_PUBLIC_URL + \"/purchasing-payments\";\n              JSONdata = JSON.stringify(data);\n              cookies = nookies.get(null, \"token\");\n              options = {\n                method: \"POST\",\n                headers: {\n                  \"Content-Type\": \"application/json\",\n                  Authorization: \"Bearer \" + cookies.token\n                },\n                body: JSONdata\n              };\n              _context3.next = 15;\n              return fetch(endpoint, options);\n\n            case 15:\n              req = _context3.sent;\n              _context3.next = 18;\n              return req.json();\n\n            case 18:\n              res = _context3.sent;\n\n              if (!(req.status === 200)) {\n                _context3.next = 25;\n                break;\n              }\n\n              if (!(values.payment_remaining === 0)) {\n                _context3.next = 23;\n                break;\n              }\n\n              _context3.next = 23;\n              return getPaymentData(res.data.id);\n\n            case 23:\n              router.replace(\"/dashboard/pembelian/pembelian_barang\");\n\n              _notification[\"success\"]({\n                message: \"Pembayaran Berhasil\",\n                description: \"Pembayaran berhasil ditambahkan ke dalam pembelian. Silahkan cek untuk detail lebih lanjut\"\n              });\n\n            case 25:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function createPayment(_x3) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  var getPaymentData = /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(paymentId) {\n      var id, endpoint, cookies, options, req, res;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              id = props.purchases.data.id;\n              endpoint = process.env.NEXT_PUBLIC_URL + \"/purchasings/\" + id + \"?populate=*\";\n              cookies = nookies.get(null, \"token\");\n              options = {\n                method: \"GET\",\n                headers: {\n                  \"Content-Type\": \"application/json\",\n                  Authorization: \"Bearer \" + cookies.token\n                }\n              };\n              _context4.next = 6;\n              return fetch(endpoint, options);\n\n            case 6:\n              req = _context4.sent;\n              _context4.next = 9;\n              return req.json();\n\n            case 9:\n              res = _context4.sent;\n              _context4.next = 12;\n              return setPaymentStatus(res.data.attributes, paymentId);\n\n            case 12:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n\n    return function getPaymentData(_x4) {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n\n  var setPaymentStatus = /*#__PURE__*/function () {\n    var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(data, paymentId) {\n      var id, key, list, postData, endpoint, JSONdata, cookies, options, req, res;\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              id = props.purchases.data.id;\n\n              for (key in data) {\n                if (data[key] === null) {\n                  delete data[key];\n                }\n              }\n\n              list = [];\n              data.purchasing_details.data.forEach(function (element) {\n                list.push({\n                  id: element.id\n                });\n              });\n              data.status_pembayaran = \"Lunas\";\n              data.supplier = {\n                id: data.supplier.data.id\n              };\n              data.location = {\n                id: data.location.data.id\n              };\n              data.purchase = {\n                id: data.purchase.data.id\n              };\n              data.purchasing_details = list;\n              data.purchasing_payments = [{\n                id: paymentId\n              }];\n              postData = {\n                data: data\n              };\n              endpoint = process.env.NEXT_PUBLIC_URL + \"/purchasings/\" + id;\n              JSONdata = JSON.stringify(postData);\n              cookies = nookies.get(null, \"token\");\n              options = {\n                method: \"PUT\",\n                headers: {\n                  \"Content-Type\": \"application/json\",\n                  Authorization: \"Bearer \" + cookies.token\n                },\n                body: JSONdata\n              };\n              _context5.next = 17;\n              return fetch(endpoint, options);\n\n            case 17:\n              req = _context5.sent;\n              _context5.next = 20;\n              return req.json();\n\n            case 20:\n              res = _context5.sent;\n\n              if (req.status === 200) {\n                _notification[\"success\"]({\n                  message: \"Pembayaran Lunas\",\n                  description: \"Pembayaran pada transaksi ini sudah lunas. Silahkan cek kembali status pembayaran\"\n                });\n              }\n\n            case 22:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5);\n    }));\n\n    return function setPaymentStatus(_x5, _x6) {\n      return _ref6.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsx(Head, {\n      children: /*#__PURE__*/_jsx(\"title\", {\n        children: \"Pembayaran Pembelian\"\n      })\n    }), /*#__PURE__*/_jsx(DashboardLayout, {\n      children: /*#__PURE__*/_jsxs(LayoutWrapper, {\n        style: {},\n        children: [/*#__PURE__*/_jsx(TitlePage, {\n          titleText: \"Pembayaran Pembelian\"\n        }), /*#__PURE__*/_jsx(LayoutContent, {\n          children: /*#__PURE__*/_jsxs(_Form, {\n            form: form,\n            name: \"add\",\n            initialValues: {\n              remember: true\n            },\n            onFinish: onFinish,\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              children: /*#__PURE__*/_jsxs(_Row, {\n                justify: \"space-between\",\n                children: [/*#__PURE__*/_jsxs(\"p\", {\n                  className: \"text-sm font-bold\",\n                  children: [\"NO : \", noLPB]\n                }), /*#__PURE__*/_jsxs(\"p\", {\n                  className: \"text-sm font-bold\",\n                  children: [\"Tempo : \", tempoDays, \" \", tempoTime]\n                })]\n              })\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \"mt-2\",\n              children: /*#__PURE__*/_jsxs(_Row, {\n                justify: \"space-between flex flex-wrap -mx-3 mb-3\",\n                children: [/*#__PURE__*/_jsxs(\"div\", {\n                  className: \"w-1/3\",\n                  children: [/*#__PURE__*/_jsxs(\"p\", {\n                    className: \"text-sm m-0 pt-1\",\n                    children: [\"Nama Supplier : \", supplierName]\n                  }), /*#__PURE__*/_jsxs(\"p\", {\n                    className: \"text-sm m-0 pt-1\",\n                    children: [\"Alamat Supplier : \", supplierAddress]\n                  }), /*#__PURE__*/_jsxs(\"p\", {\n                    className: \"text-sm m-0 pt-1 font-bold\",\n                    children: [\"No Nota Supplier : \", noNota]\n                  })]\n                }), /*#__PURE__*/_jsx(\"div\", {\n                  className: \"w-1/3 uppercase\",\n                  children: statusPembayaran === \"Belum Lunas\" ? /*#__PURE__*/_jsx(\"p\", {\n                    className: \"text-lg m-0 pt-1 font-bold text-red-500\",\n                    children: statusPembayaran\n                  }) : /*#__PURE__*/_jsx(\"p\", {\n                    className: \"text-lg m-0 pt-1 font-bold text-green-400\",\n                    children: statusPembayaran\n                  })\n                }), /*#__PURE__*/_jsxs(\"div\", {\n                  className: \"mt-14 md:mt-1\",\n                  children: [/*#__PURE__*/_jsxs(\"p\", {\n                    className: \"text-sm m-0 pt-1 right-16\",\n                    children: [\"Tanggal Pembelian : \", purchasingDate]\n                  }), /*#__PURE__*/_jsxs(\"p\", {\n                    className: \"text-sm m-0 pt-1\",\n                    children: [\"Status Pembelian : \", statusPembelian]\n                  }), /*#__PURE__*/_jsxs(\"p\", {\n                    className: \"text-sm m-0 pt-1\",\n                    children: [\"Lokasi Gudang : \", lokasi]\n                  }), /*#__PURE__*/_jsx(\"button\", {\n                    type: \"button\",\n                    className: \"bg-cyan-700 rounded px-5 py-2 hover:bg-cyan-800  shadow-sm flex mb-4 mt-4\",\n                    children: /*#__PURE__*/_jsx(\"div\", {\n                      className: \"text-white text-center text-sm font-bold\",\n                      children: /*#__PURE__*/_jsx(\"a\", {\n                        className: \"text-white no-underline text-xs sm:text-xs\",\n                        children: \"Lihat Dokumen\"\n                      })\n                    })\n                  })]\n                })]\n              })\n            }), /*#__PURE__*/_jsx(\"div\", {\n              children: /*#__PURE__*/_jsx(PurchasingPaymentTable, {\n                data: dataTable\n              })\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \"mt-5 mr-5 mb-5\",\n              children: /*#__PURE__*/_jsxs(_Row, {\n                justify: \"space-between\",\n                children: [/*#__PURE__*/_jsxs(\"div\", {\n                  className: \"w-full md:w-1/3\",\n                  children: [/*#__PURE__*/_jsx(_Form.Item, {\n                    name: \"disc_description\",\n                    noStyle: true,\n                    children: /*#__PURE__*/_jsx(_Input, {\n                      size: \"large\",\n                      placeholder: \"Keterangan Diskon\"\n                    })\n                  }), /*#__PURE__*/_jsx(\"div\", {\n                    className: \"pt-3\",\n                    children: /*#__PURE__*/_jsxs(_Row, {\n                      justify: \"start\",\n                      children: [/*#__PURE__*/_jsx(_Form.Item, {\n                        name: \"disc_value\",\n                        initialValue: 0,\n                        noStyle: true,\n                        children: /*#__PURE__*/_jsx(_InputNumber, {\n                          size: \"large\",\n                          style: {\n                            width: \"50%\"\n                          }\n                        })\n                      }), /*#__PURE__*/_jsx(_Form.Item, {\n                        name: \"disc_type\",\n                        noStyle: true,\n                        children: /*#__PURE__*/_jsxs(_Select, {\n                          placeholder: \"Jenis Diskon\",\n                          size: \"large\",\n                          style: {\n                            width: \"50%\"\n                          },\n                          children: [/*#__PURE__*/_jsx(_Select.Option, {\n                            value: \"Tetap\",\n                            children: \"Tetap\"\n                          }, \"Tetap\"), /*#__PURE__*/_jsx(_Select.Option, {\n                            value: \"Persentase\",\n                            children: \"Persentase\"\n                          }, \"Persentase\")]\n                        })\n                      })]\n                    })\n                  }), /*#__PURE__*/_jsx(\"div\", {\n                    className: \"pt-3 w-full md:w-1/3\",\n                    children: /*#__PURE__*/_jsx(_Form.Item, {\n                      name: \"payment_date\",\n                      rules: [{\n                        required: true,\n                        message: \"Tanggal Pembayaran tidak boleh kosong!\"\n                      }],\n                      children: /*#__PURE__*/_jsx(_DatePicker, {\n                        placeholder: \"Tanggal Pembayaran\",\n                        size: \"large\",\n                        format: \"DD/MM/YYYY\",\n                        style: {\n                          width: \"200%\"\n                        }\n                      })\n                    })\n                  }), /*#__PURE__*/_jsxs(\"div\", {\n                    children: [/*#__PURE__*/_jsxs(\"p\", {\n                      className: \"text-sm m-0 pt-1  text-start\",\n                      children: [\"Saldo Di muka : \", formatter.format(getFirstPayment())]\n                    }), /*#__PURE__*/_jsxs(\"p\", {\n                      className: \"text-sm m-0 pt-1  text-start\",\n                      children: [\"Jumlah Pembayaran : \", formatter.format(totalPayment)]\n                    })]\n                  }), /*#__PURE__*/_jsx(\"div\", {\n                    className: \"pt-3\",\n                    children: /*#__PURE__*/_jsxs(_Row, {\n                      justify: \"start\",\n                      children: [/*#__PURE__*/_jsx(_Form.Item, {\n                        name: \"payment_value_1\",\n                        initialValue: 0,\n                        noStyle: true,\n                        children: /*#__PURE__*/_jsx(_InputNumber, {\n                          onChange: setTotal,\n                          size: \"large\",\n                          style: {\n                            width: \"40%\",\n                            marginRight: \"15px\"\n                          }\n                        })\n                      }), /*#__PURE__*/_jsx(_Form.Item, {\n                        name: \"payment_method_1\",\n                        noStyle: true,\n                        children: /*#__PURE__*/_jsxs(_Select, {\n                          placeholder: \"Metode Pembayaran\",\n                          size: \"large\",\n                          style: {\n                            width: \"55%\"\n                          },\n                          children: [/*#__PURE__*/_jsx(_Select.Option, {\n                            value: \"Bank 1\",\n                            children: \"Bank 1\"\n                          }, \"Bank 1\"), /*#__PURE__*/_jsx(_Select.Option, {\n                            value: \"Bank 2\",\n                            children: \"Bank 2\"\n                          }, \"Bank 2\"), /*#__PURE__*/_jsx(_Select.Option, {\n                            value: \"Bank 3\",\n                            children: \"Bank 3\"\n                          }, \"Bank 3\"), /*#__PURE__*/_jsx(_Select.Option, {\n                            value: \"Cash On Delivery\",\n                            children: \"Cash On Delivery\"\n                          }, \"Cash On Delivery\"), /*#__PURE__*/_jsx(_Select.Option, {\n                            value: \"Bayar Langsung\",\n                            children: \"Bayar Langsung\"\n                          }, \"Bayar Langsung\")]\n                        })\n                      })]\n                    })\n                  }), /*#__PURE__*/_jsx(\"div\", {\n                    className: \"pt-3\",\n                    children: /*#__PURE__*/_jsxs(_Row, {\n                      justify: \"start\",\n                      children: [/*#__PURE__*/_jsx(_Form.Item, {\n                        name: \"payment_value_2\",\n                        initialValue: 0,\n                        noStyle: true,\n                        children: /*#__PURE__*/_jsx(_InputNumber, {\n                          onChange: setTotal,\n                          size: \"large\",\n                          style: {\n                            width: \"40%\",\n                            marginRight: \"15px\"\n                          }\n                        })\n                      }), /*#__PURE__*/_jsx(_Form.Item, {\n                        name: \"payment_method_2\",\n                        noStyle: true,\n                        children: /*#__PURE__*/_jsxs(_Select, {\n                          placeholder: \"Metode Pembayaran\",\n                          size: \"large\",\n                          style: {\n                            width: \"55%\"\n                          },\n                          children: [/*#__PURE__*/_jsx(_Select.Option, {\n                            value: \"Bank 1\",\n                            children: \"Bank 1\"\n                          }, \"Bank 1\"), /*#__PURE__*/_jsx(_Select.Option, {\n                            value: \"Bank 2\",\n                            children: \"Bank 2\"\n                          }, \"Bank 2\"), /*#__PURE__*/_jsx(_Select.Option, {\n                            value: \"Bank 3\",\n                            children: \"Bank 3\"\n                          }, \"Bank 3\"), /*#__PURE__*/_jsx(_Select.Option, {\n                            value: \"Cash On Delivery\",\n                            children: \"Cash On Delivery\"\n                          }, \"Cash On Delivery\"), /*#__PURE__*/_jsx(_Select.Option, {\n                            value: \"Bayar Langsung\",\n                            children: \"Bayar Langsung\"\n                          }, \"Bayar Langsung\")]\n                        })\n                      })]\n                    })\n                  }), /*#__PURE__*/_jsx(\"div\", {\n                    className: \"pt-3\",\n                    children: /*#__PURE__*/_jsxs(_Row, {\n                      justify: \"start\",\n                      children: [/*#__PURE__*/_jsx(_Form.Item, {\n                        name: \"payment_value_3\",\n                        initialValue: 0,\n                        noStyle: true,\n                        children: /*#__PURE__*/_jsx(_InputNumber, {\n                          onChange: setTotal,\n                          size: \"large\",\n                          style: {\n                            width: \"40%\",\n                            marginRight: \"15px\"\n                          }\n                        })\n                      }), /*#__PURE__*/_jsx(_Form.Item, {\n                        name: \"payment_method_3\",\n                        noStyle: true,\n                        children: /*#__PURE__*/_jsxs(_Select, {\n                          placeholder: \"Metode Pembayaran\",\n                          size: \"large\",\n                          style: {\n                            width: \"55%\"\n                          },\n                          children: [/*#__PURE__*/_jsx(_Select.Option, {\n                            value: \"Bank 1\",\n                            children: \"Bank 1\"\n                          }, \"Bank 1\"), /*#__PURE__*/_jsx(_Select.Option, {\n                            value: \"Bank 2\",\n                            children: \"Bank 2\"\n                          }, \"Bank 2\"), /*#__PURE__*/_jsx(_Select.Option, {\n                            value: \"Bank 3\",\n                            children: \"Bank 3\"\n                          }, \"Bank 3\"), /*#__PURE__*/_jsx(_Select.Option, {\n                            value: \"Cash On Delivery\",\n                            children: \"Cash On Delivery\"\n                          }, \"Cash On Delivery\"), /*#__PURE__*/_jsx(_Select.Option, {\n                            value: \"Bayar Langsung\",\n                            children: \"Bayar Langsung\"\n                          }, \"Bayar Langsung\")]\n                        })\n                      })]\n                    })\n                  })]\n                }), /*#__PURE__*/_jsxs(\"div\", {\n                  children: [/*#__PURE__*/_jsxs(\"p\", {\n                    className: \"text-sm m-0 pt-1  text-start\",\n                    children: [\"Total Item : \", totalItem]\n                  }), /*#__PURE__*/_jsxs(\"p\", {\n                    className: \"text-sm m-0 pt-1  text-start\",\n                    children: [\"Total Harga : \", formatter.format(getTotalProduct())]\n                  }), /*#__PURE__*/_jsxs(\"p\", {\n                    className: \"text-sm m-0 pt-1  text-start\",\n                    children: [\"Diskon : -\", formatter.format(getDiscPrice())]\n                  }), /*#__PURE__*/_jsxs(\"p\", {\n                    className: \"text-sm m-0 pt-1  text-start\",\n                    children: [\"Biaya Kirim : \", formatter.format(deliveryFee)]\n                  }), /*#__PURE__*/_jsxs(\"p\", {\n                    className: \"text-sm m-0 pt-1  text-start\",\n                    children: [\"Biaya Lain : \", formatter.format(getAdditionalFee())]\n                  }), /*#__PURE__*/_jsxs(\"p\", {\n                    className: \"text-sm m-0 pt-4  text-start\",\n                    children: [\"DPP : \", formatter.format(getDPP())]\n                  }), /*#__PURE__*/_jsxs(\"p\", {\n                    className: \"text-sm m-0 pt-1  text-start\",\n                    children: [\"PPN : \", formatter.format(getPPN())]\n                  }), /*#__PURE__*/_jsx(\"p\", {\n                    className: \"text-lg m-0 pt-4 font-bold text-start\",\n                    children: \"TOTAL PEMBAYARAN INC PAJAK :\"\n                  }), /*#__PURE__*/_jsx(\"p\", {\n                    className: \"text-lg m-0 pt-1 font-bold text-start\",\n                    children: formatter.format(getPriceInclTax())\n                  }), /*#__PURE__*/_jsxs(\"p\", {\n                    className: \"text-sm m-0 pt-5 font-bold text-start\",\n                    children: [\"PEMBAYARAN TEMPO : \", formatter.format(tempoPayment)]\n                  }), /*#__PURE__*/_jsxs(\"p\", {\n                    className: \"text-sm m-0 pt-1 font-bold text-start\",\n                    children: [\"Total Pembayaran : \", formatter.format(getPriceInclTax())]\n                  }), /*#__PURE__*/_jsxs(\"p\", {\n                    className: \"text-sm m-0 pt-1 font-bold text-start\",\n                    children: [\"Total Kembali : \", formatter.format(changePrice)]\n                  })]\n                })]\n              })\n            }), /*#__PURE__*/_jsx(\"div\", {\n              children: /*#__PURE__*/_jsx(_Form.Item, {\n                name: \"additional_note\",\n                children: /*#__PURE__*/_jsx(TextArea, {\n                  rows: 4,\n                  placeholder: \"Catatan Tambahan\"\n                })\n              })\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: \"my-5\",\n              children: [/*#__PURE__*/_jsx(\"p\", {\n                className: \"font-bold\",\n                children: \"Riwayat Pembayaran\"\n              }), purchasingHistory.map(function (element) {\n                var _element$attributes$p, _element$attributes$p2, _element$attributes$a;\n\n                var date = new Date(element.attributes.payment_date).toLocaleDateString();\n                return /*#__PURE__*/_jsx(_Collapse, {\n                  accordion: true,\n                  children: /*#__PURE__*/_jsxs(Panel, {\n                    header: date,\n                    children: [/*#__PURE__*/_jsx(\"p\", {\n                      children: \"Pembayaran 1 : \".concat(formatter.format(element.attributes.payment_value_1), \" (\").concat(element.attributes.payment_method_1, \")\")\n                    }), /*#__PURE__*/_jsx(\"p\", {\n                      children: \"Pembayaran 2 : \".concat(formatter.format(element.attributes.payment_value_2), \" (\").concat((_element$attributes$p = element.attributes.payment_method_2) !== null && _element$attributes$p !== void 0 ? _element$attributes$p : \"-\", \")\")\n                    }), /*#__PURE__*/_jsx(\"p\", {\n                      children: \"Pembayaran 3 : \".concat(formatter.format(element.attributes.payment_value_3), \" (\").concat((_element$attributes$p2 = element.attributes.payment_method_3) !== null && _element$attributes$p2 !== void 0 ? _element$attributes$p2 : \"-\", \")\")\n                    }), /*#__PURE__*/_jsx(\"p\", {\n                      className: \"font-bold pt-5\",\n                      children: \"Pembayaran : \".concat(formatter.format(element.attributes.payment))\n                    }), /*#__PURE__*/_jsx(\"p\", {\n                      className: \"font-bold\",\n                      children: \"Total Pembayaran : \".concat(formatter.format(element.attributes.total_payment))\n                    }), /*#__PURE__*/_jsx(\"p\", {\n                      className: \"font-bold\",\n                      children: \"Sisa Pembayaran : \".concat(formatter.format(element.attributes.payment_remaining))\n                    }), /*#__PURE__*/_jsx(\"p\", {\n                      className: \"font-bold\",\n                      children: \"Kembalian : \".concat(formatter.format(element.attributes.change))\n                    }), /*#__PURE__*/_jsx(\"p\", {\n                      className: \"pt-5 italic\",\n                      children: \"Catatan : \".concat((_element$attributes$a = element.attributes.additional_note) !== null && _element$attributes$a !== void 0 ? _element$attributes$a : \"-\")\n                    })]\n                  }, date)\n                });\n              })]\n            }), /*#__PURE__*/_jsx(_Form.Item, {\n              className: \"mt-5\",\n              children: loading ? /*#__PURE__*/_jsx(\"div\", {\n                className: \" flex float-left ml-3 \",\n                children: /*#__PURE__*/_jsx(_Spin, {})\n              }) : /*#__PURE__*/_jsx(_Button, {\n                htmlType: \"submit\",\n                className: \" hover:text-white hover:bg-cyan-700 border border-cyan-700 ml-1\",\n                children: \"Simpan\"\n              })\n            })]\n          })\n        })]\n      })\n    })]\n  });\n}\n\nexport default Pembayaran;","map":null,"metadata":{},"sourceType":"module"}