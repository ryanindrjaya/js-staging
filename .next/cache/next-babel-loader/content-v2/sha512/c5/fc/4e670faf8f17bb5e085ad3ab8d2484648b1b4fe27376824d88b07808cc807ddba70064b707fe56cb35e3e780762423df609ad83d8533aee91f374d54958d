{"ast":null,"code":"import _Form from \"antd/lib/form\";\nimport _asyncToGenerator from \"/Users/yudiananta/Development/NextJS/ERP Dev/JS Deploy/ERP-Sejati/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _Select from \"antd/lib/select\";\n\nvar _jsxFileName = \"/Users/yudiananta/Development/NextJS/ERP Dev/JS Deploy/ERP-Sejati/components/Form/AddProduct/Groups.js\",\n    _s = $RefreshSig$();\n\nimport _regeneratorRuntime from \"/Users/yudiananta/Development/NextJS/ERP Dev/JS Deploy/ERP-Sejati/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport nookies from \"nookies\";\nimport { useState } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Groups(_ref) {\n  _s();\n\n  var _this = this,\n      _initialValue$attribu;\n\n  var onSelect = _ref.onSelect,\n      selectedGroups = _ref.selectedGroups,\n      initialValue = _ref.initialValue;\n\n  var _useState = useState(selectedGroups),\n      groups = _useState[0],\n      setSelectedGroups = _useState[1];\n\n  var _useState2 = useState([]),\n      data = _useState2[0],\n      setData = _useState2[1];\n\n  var _useState3 = useState(false),\n      loading = _useState3[0],\n      setLoading = _useState3[1];\n\n  var cookies = nookies.get(null, \"token\");\n  var options = data === null || data === void 0 ? void 0 : data.map(function (d) {\n    return /*#__PURE__*/_jsxDEV(_Select.Option, {\n      children: d.label\n    }, d.value, false, {\n      fileName: _jsxFileName,\n      lineNumber: 11,\n      columnNumber: 36\n    }, _this);\n  });\n\n  var handleSearchGroups = function handleSearchGroups(newValue) {\n    if (newValue) {\n      fetchGroups(newValue, setData);\n    } else {\n      setData([]);\n    }\n  };\n\n  var handleChangeGroups = function handleChangeGroups(newValue) {\n    setSelectedGroups(newValue);\n    onSelect(newValue);\n  };\n\n  var fetchGroups = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(query, callback) {\n      var endpoint, _options, req, res, manufactureResult;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (query) {\n                _context.next = 4;\n                break;\n              }\n\n              callback([]);\n              _context.next = 20;\n              break;\n\n            case 4:\n              setLoading(true);\n              _context.prev = 5;\n              endpoint = process.env.NEXT_PUBLIC_URL + \"/groups?filters[$or][0][name][$containsi]=\".concat(query, \"&filters[$or][1][code][$containsi]=\").concat(query);\n              _options = {\n                method: \"GET\",\n                headers: {\n                  \"Content-Type\": \"application/json\",\n                  Authorization: \"Bearer \" + cookies.token\n                }\n              };\n              _context.next = 10;\n              return fetch(endpoint, _options);\n\n            case 10:\n              req = _context.sent;\n              _context.next = 13;\n              return req.json();\n\n            case 13:\n              res = _context.sent;\n\n              if (req.status == 200) {\n                manufactureResult = res.data.map(function (manufacture) {\n                  return {\n                    label: \"\".concat(manufacture.attributes.name),\n                    value: manufacture.id\n                  };\n                });\n                callback(manufactureResult);\n              }\n\n              _context.next = 20;\n              break;\n\n            case 17:\n              _context.prev = 17;\n              _context.t0 = _context[\"catch\"](5);\n              console.log(_context.t0);\n\n            case 20:\n              setLoading(false);\n\n            case 21:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[5, 17]]);\n    }));\n\n    return function fetchGroups(_x, _x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"w-full md:w-full mb-2 md:mb-0\",\n    children: /*#__PURE__*/_jsxDEV(_Form.Item, {\n      name: \"groups\",\n      className: \"w-1/1\",\n      children: /*#__PURE__*/_jsxDEV(_Select, {\n        size: \"large\",\n        value: groups,\n        defaultValue: initialValue && {\n          value: initialValue === null || initialValue === void 0 ? void 0 : initialValue.id,\n          label: initialValue === null || initialValue === void 0 ? void 0 : (_initialValue$attribu = initialValue.attributes) === null || _initialValue$attribu === void 0 ? void 0 : _initialValue$attribu.name\n        },\n        showSearch: true,\n        showArrow: false,\n        filterOption: false,\n        defaultActiveFirstOption: false,\n        loading: loading,\n        placeholder: \"Golongan\",\n        onChange: handleChangeGroups,\n        onSearch: handleSearchGroups,\n        children: options\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Groups, \"zhTK811PbaSOQaaxJQLsTg65EkM=\");\n\n_c = Groups;\n\nvar _c;\n\n$RefreshReg$(_c, \"Groups\");","map":{"version":3,"sources":["/Users/yudiananta/Development/NextJS/ERP Dev/JS Deploy/ERP-Sejati/components/Form/AddProduct/Groups.js"],"names":["nookies","useState","Groups","onSelect","selectedGroups","initialValue","groups","setSelectedGroups","data","setData","loading","setLoading","cookies","get","options","map","d","label","value","handleSearchGroups","newValue","fetchGroups","handleChangeGroups","query","callback","endpoint","process","env","NEXT_PUBLIC_URL","method","headers","Authorization","token","fetch","req","json","res","status","manufactureResult","manufacture","attributes","name","id","console","log"],"mappings":"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","sourcesContent":["import { Form, Select } from \"antd\";\nimport nookies from \"nookies\";\nimport { useState } from \"react\";\n\nexport default function Groups({ onSelect, selectedGroups, initialValue }) {\n  const [groups, setSelectedGroups] = useState(selectedGroups);\n  const [data, setData] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const cookies = nookies.get(null, \"token\");\n\n  const options = data?.map((d) => <Select.Option key={d.value}>{d.label}</Select.Option>);\n\n  const handleSearchGroups = (newValue) => {\n    if (newValue) {\n      fetchGroups(newValue, setData);\n    } else {\n      setData([]);\n    }\n  };\n\n  const handleChangeGroups = (newValue) => {\n    setSelectedGroups(newValue);\n    onSelect(newValue);\n  };\n\n  const fetchGroups = async (query, callback) => {\n    if (!query) {\n      callback([]);\n    } else {\n      setLoading(true);\n      try {\n        const endpoint =\n          process.env.NEXT_PUBLIC_URL + `/groups?filters[$or][0][name][$containsi]=${query}&filters[$or][1][code][$containsi]=${query}`;\n        const options = {\n          method: \"GET\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: \"Bearer \" + cookies.token,\n          },\n        };\n\n        const req = await fetch(endpoint, options);\n        const res = await req.json();\n\n        if (req.status == 200) {\n          const manufactureResult = res.data.map((manufacture) => ({\n            label: `${manufacture.attributes.name}`,\n            value: manufacture.id,\n          }));\n\n          callback(manufactureResult);\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    }\n    setLoading(false);\n  };\n\n  return (\n    <div className=\"w-full md:w-full mb-2 md:mb-0\">\n      <Form.Item name=\"groups\" className=\"w-1/1\">\n        <Select\n          size=\"large\"\n          value={groups}\n          defaultValue={initialValue && { value: initialValue?.id, label: initialValue?.attributes?.name }}\n          showSearch\n          showArrow={false}\n          filterOption={false}\n          defaultActiveFirstOption={false}\n          loading={loading}\n          placeholder=\"Golongan\"\n          onChange={handleChangeGroups}\n          onSearch={handleSearchGroups}\n        >\n          {options}\n        </Select>\n      </Form.Item>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}