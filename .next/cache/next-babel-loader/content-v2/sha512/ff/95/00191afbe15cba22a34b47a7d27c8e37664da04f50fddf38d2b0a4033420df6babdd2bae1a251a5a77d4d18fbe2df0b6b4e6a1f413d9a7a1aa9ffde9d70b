{"ast":null,"code":"import _Form from \"antd/lib/form\";\nimport _Select from \"antd/lib/select\";\nvar _jsxFileName = \"/Users/yudiananta/Development/NextJS/ERP Dev/JS Deploy/JS-Deploy/components/Form/AddProduct/Manufactures.js\";\nimport nookies from \"nookies\";\nimport { useState } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Manufactures({\n  onSelect,\n  initialValue,\n  selectedManufacures,\n  label\n}) {\n  var _initialValue$attribu;\n\n  const {\n    0: manufactures,\n    1: setSelectedManufactures\n  } = useState(selectedManufacures);\n  const {\n    0: data,\n    1: setData\n  } = useState([]);\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(false);\n  const cookies = nookies.get(null, \"token\");\n  const options = data === null || data === void 0 ? void 0 : data.map(d => /*#__PURE__*/_jsxDEV(_Select.Option, {\n    children: d.label\n  }, d.value, false, {\n    fileName: _jsxFileName,\n    lineNumber: 17,\n    columnNumber: 5\n  }, this));\n\n  const handleSearchManufacure = newValue => {\n    if (newValue) {\n      setLoading(true);\n      fetchManufactures(newValue, setData);\n    } else {\n      setData([]);\n    }\n\n    setLoading(false);\n  };\n\n  const handleChangeManufactures = newValue => {\n    setSelectedManufactures(newValue);\n    onSelect(newValue);\n  };\n\n  const fetchManufactures = async (query, callback) => {\n    if (!query) {\n      callback([]);\n    } else {\n      try {\n        const endpoint = process.env.NEXT_PUBLIC_URL + `/manufactures?filters[$or][0][name][$containsi]=${query}&filters[$or][1][code][$containsi]=${query}`;\n        const options = {\n          method: \"GET\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: \"Bearer \" + cookies.token\n          }\n        };\n        const req = await fetch(endpoint, options);\n        const res = await req.json();\n\n        if (req.status == 200) {\n          const manufactureResult = res.data.map(manufacture => ({\n            label: `${manufacture.attributes.name}`,\n            value: manufacture.id\n          }));\n          callback(manufactureResult);\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    }\n  }; // console.log(manufactures ?? initialValue.attributes.name);\n\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"w-full md:w-full mb-2 md:mb-0\",\n    children: /*#__PURE__*/_jsxDEV(_Form.Item, {\n      initialValue: initialValue === null || initialValue === void 0 ? void 0 : initialValue.attributes.name,\n      name: \"manufactures\",\n      className: \"w-1/1\",\n      rules: [{\n        required: true,\n        message: \"Pabrikasi tidak boleh kosong!\"\n      }],\n      children: /*#__PURE__*/_jsxDEV(_Select, {\n        value: manufactures !== null && manufactures !== void 0 ? manufactures : initialValue === null || initialValue === void 0 ? void 0 : initialValue.attributes.name,\n        size: \"large\",\n        defaultValue: initialValue && {\n          value: initialValue === null || initialValue === void 0 ? void 0 : initialValue.id,\n          label: initialValue === null || initialValue === void 0 ? void 0 : (_initialValue$attribu = initialValue.attributes) === null || _initialValue$attribu === void 0 ? void 0 : _initialValue$attribu.name\n        },\n        showSearch: true,\n        showArrow: false,\n        filterOption: false,\n        defaultActiveFirstOption: false,\n        placeholder: \"Pabrikasi\",\n        onChange: handleChangeManufactures,\n        onSearch: handleSearchManufacure,\n        children: options\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 72,\n    columnNumber: 5\n  }, this);\n}","map":{"version":3,"sources":["/Users/yudiananta/Development/NextJS/ERP Dev/JS Deploy/JS-Deploy/components/Form/AddProduct/Manufactures.js"],"names":["nookies","useState","Manufactures","onSelect","initialValue","selectedManufacures","label","manufactures","setSelectedManufactures","data","setData","loading","setLoading","cookies","get","options","map","d","value","handleSearchManufacure","newValue","fetchManufactures","handleChangeManufactures","query","callback","endpoint","process","env","NEXT_PUBLIC_URL","method","headers","Authorization","token","req","fetch","res","json","status","manufactureResult","manufacture","attributes","name","id","error","console","log","required","message"],"mappings":"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","sourcesContent":["import { Form, Select, Spin } from \"antd\";\nimport nookies from \"nookies\";\nimport { useState } from \"react\";\n\nexport default function Manufactures({\n  onSelect,\n  initialValue,\n  selectedManufacures,\n  label,\n}) {\n  const [manufactures, setSelectedManufactures] = useState(selectedManufacures);\n  const [data, setData] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const cookies = nookies.get(null, \"token\");\n\n  const options = data?.map((d) => (\n    <Select.Option key={d.value}>{d.label}</Select.Option>\n  ));\n\n  const handleSearchManufacure = (newValue) => {\n    if (newValue) {\n      setLoading(true);\n      fetchManufactures(newValue, setData);\n    } else {\n      setData([]);\n    }\n\n    setLoading(false);\n  };\n\n  const handleChangeManufactures = (newValue) => {\n    setSelectedManufactures(newValue);\n    onSelect(newValue);\n  };\n\n  const fetchManufactures = async (query, callback) => {\n    if (!query) {\n      callback([]);\n    } else {\n      try {\n        const endpoint =\n          process.env.NEXT_PUBLIC_URL +\n          `/manufactures?filters[$or][0][name][$containsi]=${query}&filters[$or][1][code][$containsi]=${query}`;\n        const options = {\n          method: \"GET\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: \"Bearer \" + cookies.token,\n          },\n        };\n\n        const req = await fetch(endpoint, options);\n        const res = await req.json();\n\n        if (req.status == 200) {\n          const manufactureResult = res.data.map((manufacture) => ({\n            label: `${manufacture.attributes.name}`,\n            value: manufacture.id,\n          }));\n\n          callback(manufactureResult);\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    }\n  };\n\n  // console.log(manufactures ?? initialValue.attributes.name);\n\n  return (\n    <div className=\"w-full md:w-full mb-2 md:mb-0\">\n      <Form.Item\n        initialValue={initialValue?.attributes.name}\n        name=\"manufactures\"\n        className=\"w-1/1\"\n        rules={[\n          {\n            required: true,\n            message: \"Pabrikasi tidak boleh kosong!\",\n          },\n        ]}\n      >\n        <Select\n          value={manufactures ?? initialValue?.attributes.name}\n          size=\"large\"\n          defaultValue={\n            initialValue && {\n              value: initialValue?.id,\n              label: initialValue?.attributes?.name,\n            }\n          }\n          showSearch\n          showArrow={false}\n          filterOption={false}\n          defaultActiveFirstOption={false}\n          placeholder=\"Pabrikasi\"\n          onChange={handleChangeManufactures}\n          onSearch={handleSearchManufacure}\n        >\n          {options}\n        </Select>\n      </Form.Item>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}