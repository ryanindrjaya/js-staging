_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[101],{RNiq:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return E}));var r=n("ATwu"),a=n.n(r),s=n("MM9K"),c=n.n(s),o=n("cpVT"),i=n("rg98"),u=n("qu0K"),l=n.n(u),p=n("xvhg"),d=n("vJKn"),j=n.n(d),m=n("q1tI"),b=n("/MKj"),f=n("20a2"),h=n("7I1n"),O=n("QCuh"),v=n("+i/H"),w=n("w+U0"),y=n("4CJn"),g=n("NyWP"),x=n.n(g),S=n("nKUr");function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}w.a.login;function E(e){Object(b.c)();var t=l.a.useForm(),n=Object(p.a)(t,1)[0],r=Object(f.useRouter)(),s=Object(m.useState)(!1),u=s[0],d=s[1],w=Object(m.useState)(!1),g=w[0],N=w[1],E=Object(m.useState)("Username atau Password salah"),k=(E[0],E[1]),_=Object(m.useState)({}),C=_[0],T=_[1],D=function(){var e=Object(i.a)(j.a.mark((function e(t){var n,a,s,c,o,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),N(!1),d(!0),n={identifier:C.username,password:C.password},a=JSON.stringify(n),"https://js-strapi.keelola.net/api/auth/local",s={method:"POST",headers:{"Content-Type":"application/json"},body:a},e.prev=7,e.next=10,fetch("https://js-strapi.keelola.net/api/auth/local",s);case 10:return c=e.sent,e.next=13,c.json();case 13:if(o=e.sent,console.log(o),!o.jwt){e.next=24;break}return x.a.set(null,"token",o.jwt,{maxAge:60,path:"/",secure:!0,sameSite:"strict"}),e.next=19,I(o.jwt);case 19:i=e.sent,x.a.set(null,"role",i,{maxAge:60,path:"/",secure:!0,sameSite:"strict"}),r.replace("/dashboard"),e.next=25;break;case 24:N(!0);case 25:e.next=31;break;case 27:e.prev=27,e.t0=e.catch(7),N(!0),k("Kesalahan Pada Server. Silahkan cek kembali");case 31:d(!1);case 32:case"end":return e.stop()}}),e,null,[[7,27]])})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(i.a)(j.a.mark((function e(t){var n,r,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://js-strapi.keelola.net/api/users/me?populate=role",n={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}},e.next=4,fetch("https://js-strapi.keelola.net/api/users/me?populate=role",n);case 4:return r=e.sent,e.next=7,r.json();case 7:return a=e.sent,console.log(a),e.abrupt("return",a.role.name);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function U(e){var t=e.target,n=t.name,r=t.value;T(P(P({},C),{},Object(o.a)({},n,r)))}return Object(S.jsx)(l.a,{form:n,name:"add_order",initialValues:{remember:!0},onFinish:D,children:Object(S.jsx)(y.a,{className:"isoSignInPage",children:Object(S.jsx)("div",{className:"isoLoginContentWrapper",children:Object(S.jsx)("div",{className:"isoLoginContent",children:Object(S.jsxs)("div",{className:"isoSignInForm",children:[Object(S.jsx)("div",{className:"font-bold text-lg p-3",children:Object(S.jsx)("center",{children:"LOGIN"})}),Object(S.jsx)("div",{className:"isoInputWrapper",children:Object(S.jsx)(h.c,{onChange:U,name:"username",id:"inputUserName",size:"large",placeholder:"Username"})}),Object(S.jsx)("div",{className:"isoInputWrapper",children:Object(S.jsx)(h.c,{onChange:U,id:"inpuPassword",size:"large",name:"password",type:"password",placeholder:"Password"})}),Object(S.jsx)("div",{className:"isoInputWrapper isoLeftRightComponent",children:u?Object(S.jsx)("div",{className:"center",children:Object(S.jsx)(c.a,{})}):Object(S.jsx)(O.a,{htmlType:"submit",className:"bg-blue-400 text-white w-full hover:bg-blue-600",onClick:D,children:Object(S.jsx)(v.a,{id:"page.signInButton"})})}),g?Object(S.jsx)(a.a,{message:"Login Error",description:"Username atau Password salah",type:"error",closable:!0,onClose:function(e){console.log(e,"I was closed.")}}):Object(S.jsx)("div",{})]})})})})})}},UMre:function(e,t,n){"use strict";var r=n("TqRt").default;Object.defineProperty(t,"__esModule",{value:!0}),t.isStyleSupport=function(e,t){if(!Array.isArray(e)&&void 0!==t)return function(e,t){if(!s(e))return!1;var n=document.createElement("div"),r=n.style[e];return n.style[e]=t,n.style[e]!==r}(e,t);return s(e)};var a=r(n("3Mug")),s=function(e){if((0,a.default)()&&window.document.documentElement){var t=Array.isArray(e)?e:[e],n=window.document.documentElement;return t.some((function(e){return e in n.style}))}return!1}},cBho:function(e,t,n){"use strict";var r=n("TqRt").default;Object.defineProperty(t,"__esModule",{value:!0}),t.detectFlexGapSupported=t.canUseDocElement=void 0,Object.defineProperty(t,"isStyleSupport",{enumerable:!0,get:function(){return c.isStyleSupport}});var a,s=r(n("3Mug")),c=n("UMre"),o=function(){return(0,s.default)()&&window.document.documentElement};t.canUseDocElement=o;t.detectFlexGapSupported=function(){if(!o())return!1;if(void 0!==a)return a;var e=document.createElement("div");return e.style.display="flex",e.style.flexDirection="column",e.style.rowGap="1px",e.appendChild(document.createElement("div")),e.appendChild(document.createElement("div")),document.body.appendChild(e),a=1===e.scrollHeight,document.body.removeChild(e),a}},vlRD:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n("RNiq")}])}},[["vlRD",0,1,2,3,4,5,6,7,9,10,15,34]]]);