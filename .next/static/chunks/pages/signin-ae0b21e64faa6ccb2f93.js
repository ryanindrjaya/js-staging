_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[101],{DB6d:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return P}));var r=n("ATwu"),a=n.n(r),s=n("MM9K"),c=n.n(s),o=n("cpVT"),i=n("rg98"),p=n("vJKn"),u=n.n(p),l=n("q1tI"),j=n("/MKj"),d=n("20a2"),b=n("7I1n"),h=n("QCuh"),O=n("+i/H"),f=n("w+U0"),m=n("4CJn"),w=n("NyWP"),g=n.n(w),v=n("nKUr");function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}f.a.login;function P(e){Object(j.c)();var t=Object(d.useRouter)(),n=Object(l.useState)(!1),r=n[0],s=n[1],p=Object(l.useState)(!1),f=p[0],w=p[1],x=Object(l.useState)("Username atau Password salah"),P=(x[0],x[1]),k=Object(l.useState)({}),N=k[0],S=k[1],_=function(){var e=Object(i.a)(u.a.mark((function e(n){var r,a,c,o,i,p;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),w(!1),s(!0),r={identifier:N.username,password:N.password},a=JSON.stringify(r),"https://js-strapi.keelola.net/api/auth/local",c={method:"POST",headers:{"Content-Type":"application/json"},body:a},e.prev=7,e.next=10,fetch("https://js-strapi.keelola.net/api/auth/local",c);case 10:return o=e.sent,e.next=13,o.json();case 13:if(!(i=e.sent).jwt){e.next=23;break}return g.a.set(null,"token",i.jwt,{maxAge:2592e3,path:"/",secure:!0,sameSite:"strict"}),e.next=18,C(i.jwt);case 18:p=e.sent,g.a.set(null,"role",p,{maxAge:2592e3,path:"/",secure:!0,sameSite:"strict"}),t.replace("/dashboard"),e.next=24;break;case 23:w(!0);case 24:e.next=30;break;case 26:e.prev=26,e.t0=e.catch(7),w(!0),P("Kesalahan Pada Server. Silahkan cek kembali");case 30:s(!1);case 31:case"end":return e.stop()}}),e,null,[[7,26]])})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(i.a)(u.a.mark((function e(t){var n,r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://js-strapi.keelola.net/api/users/me?populate=role",n={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}},e.next=4,fetch("https://js-strapi.keelola.net/api/users/me?populate=role",n);case 4:return r=e.sent,e.next=7,r.json();case 7:return a=e.sent,console.log(a),e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function E(e){var t=e.target,n=t.name,r=t.value;S(y(y({},N),{},Object(o.a)({},n,r)))}return Object(v.jsx)(m.a,{className:"isoSignInPage",children:Object(v.jsx)("div",{className:"isoLoginContentWrapper",children:Object(v.jsxs)("div",{className:"isoLoginContent",children:[Object(v.jsx)("div",{className:"isoLogoWrapper",children:"JAYA SEHAT"}),Object(v.jsxs)("div",{className:"isoSignInForm",children:[Object(v.jsx)("div",{className:"isoInputWrapper",children:Object(v.jsx)(b.c,{onChange:E,name:"username",id:"inputUserName",size:"large",placeholder:"Username"})}),Object(v.jsx)("div",{className:"isoInputWrapper",children:Object(v.jsx)(b.c,{onChange:E,id:"inpuPassword",size:"large",name:"password",type:"password",placeholder:"Password"})}),Object(v.jsx)("div",{className:"isoInputWrapper isoLeftRightComponent",children:r?Object(v.jsx)("div",{className:"center",children:Object(v.jsx)(c.a,{})}):Object(v.jsx)(h.a,{type:"primary",onClick:_,children:Object(v.jsx)(O.a,{id:"page.signInButton"})})}),f?Object(v.jsx)(a.a,{message:"Login Error",description:"Username atau Password salah",type:"error",closable:!0,onClose:function(e){console.log(e,"I was closed.")}}):Object(v.jsx)("div",{})]})]})})})}},hMb1:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/signin",function(){return n("DB6d")}])}},[["hMb1",0,1,2,3,4,5,6,7,9,33]]]);