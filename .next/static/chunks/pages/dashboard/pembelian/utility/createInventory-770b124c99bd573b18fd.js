_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[63],{"85bS":function(e,t,r){"use strict";r.r(t);var n=r("rg98"),a=r("vJKn"),i=r.n(a),o=(r("q1tI"),r("NyWP")),s=r.n(o),c=(r("wd/R"),s.a.get(null,"token"));var u=function(){var e=Object(n.a)(i.a.mark((function e(t,r,n){var a,o,s,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="https://js-strapi.keelola.net/api"+"/inventory-details?filters[locations][id][$eq]=".concat(n,"&filters[products][id][$eq]=").concat(r,"&filters[expired_date][$eq]=2024-10-01&populate=*"),o={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+c.token}},e.next=4,fetch(a,o);case 4:return s=e.sent,e.next=7,s.json();case 7:(u=e.sent).data.length>0?p(u.data[0],t,r,n):d(t,r,n),l(t);case 10:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),p=function(){var e=Object(n.a)(i.a.mark((function e(t,r,n,a){var o,s,u,p,d,l,h;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.attributes.stock,s=o+r.data.stock,t.attributes.stock=s,t.attributes.locations=r.data.locations,t.attributes.products=r.data.products,u={data:t.attributes},p=JSON.stringify(u),d="https://js-strapi.keelola.net/api/inventory-details/"+t.id,l={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer "+c.token},body:p},e.next=11,fetch(d,l);case 11:return h=e.sent,e.next=14,h.json();case 14:e.sent,200===h.status&&f(a,n,r.data.stock,r);case 16:case"end":return e.stop()}}),e)})));return function(t,r,n,a){return e.apply(this,arguments)}}(),d=function(){var e=Object(n.a)(i.a.mark((function e(t,r,n){var a,o,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=JSON.stringify(t),"https://js-strapi.keelola.net/api/inventory-details",o={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+c.token},body:a},e.next=5,fetch("https://js-strapi.keelola.net/api/inventory-details",o);case 5:return s=e.sent,e.next=8,s.json();case 8:e.sent,200===s.status&&f(n,r,t.data.stock,t);case 10:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),l=function(){var e=Object(n.a)(i.a.mark((function e(t){var r,n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=JSON.stringify(t),"https://js-strapi.keelola.net/api/inventory-histories",n={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+c.token},body:r},e.next=5,fetch("https://js-strapi.keelola.net/api/inventory-histories",n);case 5:return a=e.sent,e.next=8,a.json();case 8:e.sent;case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(n.a)(i.a.mark((function e(t,r,n,a){var o,s,u,p,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o="https://js-strapi.keelola.net/api"+"/inventories?filters[locations][id][$eq]=".concat(t,"&filters[products][id][$eq]=").concat(r,"&populate=locations"),s={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+c.token}},e.next=4,fetch(o,s);case 4:return u=e.sent,e.next=7,u.json();case 7:if(!((p=e.sent).data.length>0)){e.next=14;break}return d=p.data[0].attributes.total_stock+n,e.next=12,h(p.data[0].id,p.data[0].attributes,d);case 12:e.next=16;break;case 14:return e.next=16,v(a,t);case 16:case"end":return e.stop()}}),e)})));return function(t,r,n,a){return e.apply(this,arguments)}}(),h=function(){var e=Object(n.a)(i.a.mark((function e(t,r,n){var a,o,s,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.total_stock=n,r.locations={id:r.locations.data[0].id},a={data:r},o=JSON.stringify(a),s="https://js-strapi.keelola.net/api/inventories/"+t,u={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer "+c.token},body:o},e.next=8,fetch(s,u);case 8:e.sent;case 9:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),v=function(){var e=Object(n.a)(i.a.mark((function e(t,r){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.data.total_stock=t.data.stock,t.data.locations={id:r},n=JSON.stringify(t),"https://js-strapi.keelola.net/api/inventories",a={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+c.token},body:n},e.next=7,fetch("https://js-strapi.keelola.net/api/inventories",a);case 7:e.sent;case 8:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();t.default=function(e){e.attributes.purchasing_details.data.forEach((function(e){var t=new Date(e.attributes.expired_date),r=e.attributes.batch,n=e.attributes.unit_order,a=parseInt(e.attributes.total_order),i=e.attributes.product.data,o=function(e,t){for(var r=1,n=0,a="",i=1;i<6;i++)t.attributes["unit_".concat(i)]===e&&(n=i),t.attributes["unit_".concat(i)]&&(a=t.attributes["unit_".concat(i)]);for(var o=n+1;o<6;o++)0===(r*=t.attributes["qty_".concat(o)])&&(r=1);return{total:r,productSmallestUnit:a}}(n,i),s=o.total*a,c=e.attributes.location.data,p={data:{expired_date:t,batch:r,products:{id:i.id},stock:s,smallest_unit:o.productSmallestUnit,locations:{id:c.id},keterangan:"Pembelian"}};u(p,i.id,c.id)}))}},LY0y:function(e,t){(function(t){e.exports=function(){var e={880:function(e){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}}},r={};function n(t){if(r[t])return r[t].exports;var a=r[t]={exports:{}},i=!0;try{e[t](a,a.exports,n),i=!1}finally{i&&delete r[t]}return a.exports}return n.ab=t+"/",n(880)}()}).call(this,"/")},NyWP:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.destroyCookie=t.setCookie=t.parseCookies=void 0;var a=r("iVi/"),i=r("U0US"),o=r("YAAg");function s(e,t){var r,n;return(null===(n=null===(r=null===e||void 0===e?void 0:e.req)||void 0===r?void 0:r.headers)||void 0===n?void 0:n.cookie)?a.parse(e.req.headers.cookie,t):o.isBrowser()?a.parse(document.cookie,t):{}}function c(e,t,r,s){var c,u;if(void 0===s&&(s={}),(null===(c=null===e||void 0===e?void 0:e.res)||void 0===c?void 0:c.getHeader)&&e.res.setHeader){if(null===(u=null===e||void 0===e?void 0:e.res)||void 0===u?void 0:u.finished)return console.warn('Not setting "'+t+'" cookie. Response has finished.'),console.warn("You should set cookie before res.send()"),{};var p=e.res.getHeader("Set-Cookie")||[];"string"===typeof p&&(p=[p]),"number"===typeof p&&(p=[]);var d=i.parse(p,{decodeValues:!1}),l=o.createCookie(t,r,s),f=[];d.forEach((function(e){if(!o.areCookiesEqual(e,l)){var t=a.serialize(e.name,e.value,n({encode:function(e){return e}},e));f.push(t)}})),f.push(a.serialize(t,r,s)),e.res.setHeader("Set-Cookie",f)}if(o.isBrowser()){if(s&&s.httpOnly)throw new Error("Can not set a httpOnly cookie in the browser.");document.cookie=a.serialize(t,r,s)}return{}}function u(e,t,r){return c(e,t,"",n(n({},r||{}),{maxAge:-1}))}t.parseCookies=s,t.setCookie=c,t.destroyCookie=u,t.default={set:c,get:s,destroy:u}},U0US:function(e,t,r){"use strict";var n={decodeValues:!0,map:!1,silent:!1};function a(e){return"string"===typeof e&&!!e.trim()}function i(e,t){var r=e.split(";").filter(a),i=function(e){var t="",r="",n=e.split("=");n.length>1?(t=n.shift(),r=n.join("=")):r=e;return{name:t,value:r}}(r.shift()),o=i.name,s=i.value;t=t?Object.assign({},n,t):n;try{s=t.decodeValues?decodeURIComponent(s):s}catch(u){console.error("set-cookie-parser encountered an error while decoding a cookie with value '"+s+"'. Set options.decodeValues to false to disable this feature.",u)}var c={name:o,value:s};return r.forEach((function(e){var t=e.split("="),r=t.shift().trimLeft().toLowerCase(),n=t.join("=");"expires"===r?c.expires=new Date(n):"max-age"===r?c.maxAge=parseInt(n,10):"secure"===r?c.secure=!0:"httponly"===r?c.httpOnly=!0:"samesite"===r?c.sameSite=n:c[r]=n})),c}function o(e,t){if(t=t?Object.assign({},n,t):n,!e)return t.map?{}:[];if(e.headers&&e.headers["set-cookie"])e=e.headers["set-cookie"];else if(e.headers){var r=e.headers[Object.keys(e.headers).find((function(e){return"set-cookie"===e.toLowerCase()}))];r||!e.headers.cookie||t.silent||console.warn("Warning: set-cookie-parser appears to have been called on a request object. It is designed to parse Set-Cookie headers from responses, not Cookie headers from requests. Set the option {silent: true} to suppress this warning."),e=r}if(Array.isArray(e)||(e=[e]),(t=t?Object.assign({},n,t):n).map){return e.filter(a).reduce((function(e,r){var n=i(r,t);return e[n.name]=n,e}),{})}return e.filter(a).map((function(e){return i(e,t)}))}e.exports=o,e.exports.parse=o,e.exports.parseString=i,e.exports.splitCookiesString=function(e){if(Array.isArray(e))return e;if("string"!==typeof e)return[];var t,r,n,a,i,o=[],s=0;function c(){for(;s<e.length&&/\s/.test(e.charAt(s));)s+=1;return s<e.length}for(;s<e.length;){for(t=s,i=!1;c();)if(","===(r=e.charAt(s))){for(n=s,s+=1,c(),a=s;s<e.length&&"="!==(r=e.charAt(s))&&";"!==r&&","!==r;)s+=1;s<e.length&&"="===e.charAt(s)?(i=!0,s=a,o.push(e.substring(t,n)),t=s):s=n+1}else s+=1;(!i||s>=e.length)&&o.push(e.substring(t,e.length))}return o}},YAAg:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function a(e,t){var r=Object.getOwnPropertyNames(e),n=Object.getOwnPropertyNames(t);if(r.length!==n.length)return!1;for(var a=0;a<r.length;a++){var i=r[a];if(e[i]!==t[i])return!1}return!0}Object.defineProperty(t,"__esModule",{value:!0}),t.areCookiesEqual=t.hasSameProperties=t.createCookie=t.isBrowser=void 0,t.isBrowser=function(){return"undefined"!==typeof window},t.createCookie=function(e,t,r){var a=r.sameSite;!0===a&&(a="strict"),void 0!==a&&!1!==a||(a="lax");var i=n(n({},r),{sameSite:a});return delete i.encode,n({name:e,value:t},i)},t.hasSameProperties=a,t.areCookiesEqual=function(e,t){var r=e.sameSite===t.sameSite;return"string"===typeof e.sameSite&&"string"===typeof t.sameSite&&(r=e.sameSite.toLowerCase()===t.sameSite.toLowerCase()),a(n(n({},e),{sameSite:void 0}),n(n({},t),{sameSite:void 0}))&&r}},"iVi/":function(e,t,r){"use strict";t.parse=function(e,t){if("string"!==typeof e)throw new TypeError("argument str must be a string");for(var r={},a=t||{},i=e.split(";"),s=a.decode||n,c=0;c<i.length;c++){var u=i[c],p=u.indexOf("=");if(!(p<0)){var d=u.substring(0,p).trim();if(void 0==r[d]){var l=u.substring(p+1,u.length).trim();'"'===l[0]&&(l=l.slice(1,-1)),r[d]=o(l,s)}}}return r},t.serialize=function(e,t,r){var n=r||{},o=n.encode||a;if("function"!==typeof o)throw new TypeError("option encode is invalid");if(!i.test(e))throw new TypeError("argument name is invalid");var s=o(t);if(s&&!i.test(s))throw new TypeError("argument val is invalid");var c=e+"="+s;if(null!=n.maxAge){var u=n.maxAge-0;if(isNaN(u)||!isFinite(u))throw new TypeError("option maxAge is invalid");c+="; Max-Age="+Math.floor(u)}if(n.domain){if(!i.test(n.domain))throw new TypeError("option domain is invalid");c+="; Domain="+n.domain}if(n.path){if(!i.test(n.path))throw new TypeError("option path is invalid");c+="; Path="+n.path}if(n.expires){if("function"!==typeof n.expires.toUTCString)throw new TypeError("option expires is invalid");c+="; Expires="+n.expires.toUTCString()}n.httpOnly&&(c+="; HttpOnly");n.secure&&(c+="; Secure");if(n.sameSite){switch("string"===typeof n.sameSite?n.sameSite.toLowerCase():n.sameSite){case!0:c+="; SameSite=Strict";break;case"lax":c+="; SameSite=Lax";break;case"strict":c+="; SameSite=Strict";break;case"none":c+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return c};var n=decodeURIComponent,a=encodeURIComponent,i=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function o(e,t){try{return t(e)}catch(r){return e}}},"oAW/":function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/pembelian/utility/createInventory",function(){return r("85bS")}])},rg98:function(e,t,r){"use strict";function n(e,t,r,n,a,i,o){try{var s=e[i](o),c=s.value}catch(u){return void r(u)}s.done?t(c):Promise.resolve(c).then(n,a)}function a(e){return function(){var t=this,r=arguments;return new Promise((function(a,i){var o=e.apply(t,r);function s(e){n(o,a,i,s,c,"next",e)}function c(e){n(o,a,i,s,c,"throw",e)}s(void 0)}))}}r.d(t,"a",(function(){return a}))}},[["oAW/",0,1,21,2]]]);