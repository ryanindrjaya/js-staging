_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[49],{"29lH":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"unordered-list",theme:"outlined"}},"3YMB":function(e,t,n){"use strict";var a=n("284h"),r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n("3tO9")),s=a(n("q1tI")),o=r(n("29lH")),c=r(n("KQxl")),u=function(e,t){return s.createElement(c.default,(0,i.default)((0,i.default)({},e),{},{ref:t,icon:o.default}))};u.displayName="UnorderedListOutlined";var l=s.forwardRef(u);t.default=l},AVMw:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var a=n("+P9B"),r=n.n(a),i=n("xvhg"),s=n("q1tI"),o=n.n(s),c=n("G7Ku"),u=n("jmRU"),l=n("qw/b"),d=n("3Yy8"),p=n("oun0"),h=n("vWxj"),f=n("nKUr");function b(e){var t=e.onConfirm,n=e.onCancel,a=e.title,s=e.message,b=e.id,j=o.a.useState(!1),v=Object(i.a)(j,2),m=v[0],x=v[1],g=function(){x(!1)},O=function(){n(),g()};return Object(f.jsxs)("div",{children:[Object(f.jsxs)("button",{className:"hover:bg-red-400 text-red-600 hover:text-white transition-colors  text-xs font-normal py-2 px-2 rounded-md",onClick:function(){x(!0)},children:[Object(f.jsx)(r.a,{className:"mr-2 mt-0.5 float float-left"})," Hapus"]}),Object(f.jsxs)(u.a,{open:m,onClose:O,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(f.jsxs)(h.a,{id:"alert-dialog-title",className:"font-bold",children:[" ",a]}),Object(f.jsx)(d.a,{children:Object(f.jsx)(p.a,{id:"alert-dialog-description",children:s})}),Object(f.jsxs)(l.a,{children:[Object(f.jsx)(c.a,{onClick:O,children:"Tidak"}),Object(f.jsx)(c.a,{onClick:function(){t(b),g()},className:"text-red-500",children:"Ya"})]})]})]})}},MUZu:function(e,t,n){"use strict";var a=n("284h"),r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n("3tO9")),s=a(n("q1tI")),o=r(n("ZxNd")),c=r(n("KQxl")),u=function(e,t){return s.createElement(c.default,(0,i.default)((0,i.default)({},e),{},{ref:t,icon:o.default}))};u.displayName="EditOutlined";var l=s.forwardRef(u);t.default=l},PlUM:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M820 436h-40c-4.4 0-8 3.6-8 8v40c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-40c0-4.4-3.6-8-8-8zm32-104H732V120c0-4.4-3.6-8-8-8H300c-4.4 0-8 3.6-8 8v212H172c-44.2 0-80 35.8-80 80v328c0 17.7 14.3 32 32 32h168v132c0 4.4 3.6 8 8 8h424c4.4 0 8-3.6 8-8V772h168c17.7 0 32-14.3 32-32V412c0-44.2-35.8-80-80-80zM360 180h304v152H360V180zm304 664H360V568h304v276zm200-140H732V500H292v204H160V412c0-6.6 5.4-12 12-12h680c6.6 0 12 5.4 12 12v292z"}}]},name:"printer",theme:"outlined"}},ZxNd:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"}},ctRN:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/pembelian/order_pembelian",function(){return n("ovxt")}])},ovxt:function(e,t,n){"use strict";n.r(t);var a=n("rR1Q"),r=n.n(a),i=n("iJl9"),s=n.n(i),o=n("rg98"),c=n("vJKn"),u=n.n(c),l=n("g4pe"),d=n.n(l),p=n("q1tI"),h=n("kM/w"),f=n("0Jbt"),b=n("PKTO"),j=n("aOJk"),v=n.n(j),m=n("EQeY"),x=n.n(m),g=n("MUZu"),O=n.n(g),k=n("3YMB"),w=n.n(k),y=n("wIya"),_=n.n(y),P=n("FAat"),C=n.n(P),N=n("d76Q"),T=n.n(N),M=n("AVMw"),z=n("20a2"),S=n("nKUr");function D(e){var t,n,a=e.data,r=e.onDelete,i=e.onUpdate,s=e.onPageChange,o=e.onChangeStatusPengiriman,c=e.onChangeStatus,u=Object(z.useRouter)(),l=C.a.Option,d=function(e){console.log(e),r(e)},p=function(){console.log("onCancel")};new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",maximumFractionDigits:0});var h=function(e){return Object(S.jsxs)("div",{children:[Object(S.jsx)("div",{children:Object(S.jsxs)("button",{onClick:function(){return function(e){u.push("order_pembelian/print/"+e.id)}(e)},className:" hover:text-cyan-700 transition-colors  text-xs font-normal py-2 px-2 rounded-md ",children:[Object(S.jsx)(_.a,{className:"mr-2 mt-0.5 float float-left"}),"Cetak"]})}),Object(S.jsx)("div",{children:Object(S.jsxs)("button",{onClick:function(){return function(e){u.push("order_pembelian/print/"+e.id)}(e)},className:" hover:text-cyan-700 transition-colors  text-xs font-normal py-2 px-2 rounded-md ",children:[Object(S.jsx)(w.a,{className:"mr-2 mt-0.5 float float-left"}),"Lihat"]})}),"Diterima"===e.attributes.status?Object(S.jsx)("div",{}):Object(S.jsxs)("button",{onClick:function(){return t=e.id,void i(t);var t},className:" hover:text-cyan-700 transition-colors  text-xs font-normal py-2 px-2 rounded-md ",children:[Object(S.jsx)(O.a,{className:"mr-2 mt-0.5 float float-left"}),"Edit"]}),Object(S.jsx)(M.a,{onCancel:p,onConfirm:d,title:"Hapus Kategori",message:"Kategori yang dihapus tidak dapat dikembalikan lagi. Lanjutkan?",id:e.id})]})},f=[{name:"Tanggal",width:"150px",selector:function(e){var t;return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"id-ID";return new Date(e).toLocaleDateString(t)}(null===(t=e.attributes)||void 0===t?void 0:t.order_date)}},{name:"NO PO",width:"180px",selector:function(e){var t,n;return null!==(t=null===(n=e.attributes)||void 0===n?void 0:n.no_po)&&void 0!==t?t:"-"}},{name:"Lokasi",width:"200px",selector:function(e){var t;return null===(t=e.attributes)||void 0===t?void 0:t.location.data.attributes.name}},{name:Object(S.jsx)("div",{className:"ml-6",children:"Status"}),width:"150px",selector:function(e){return Object(S.jsxs)(C.a,{defaultValue:e.attributes.status,bordered:!1,disabled:"Diterima"===e.attributes.status,onChange:function(t){return c(t,e)},children:[Object(S.jsx)(l,{value:"Dipesan",children:Object(S.jsx)(x.a,{color:"default",children:"Dipesan"})}),Object(S.jsx)(l,{value:"Diterima",children:Object(S.jsx)(x.a,{color:"success",children:"Diterima"})})]})}},{name:"Status Pengiriman",width:"150px",selector:function(e){return Object(S.jsx)(S.Fragment,{children:Object(S.jsxs)(C.a,{defaultValue:e.attributes.delivery_status,bordered:!1,disabled:"Terkirim"===e.attributes.delivery_status,onChange:function(t){return o(t,e)},children:[Object(S.jsx)(l,{value:"Loading",children:Object(S.jsx)(x.a,{color:"default",children:"Loading"})}),Object(S.jsx)(l,{value:"Pending",children:Object(S.jsx)(x.a,{color:"warning",children:"Pending"})}),Object(S.jsx)(l,{value:"Antrian",children:Object(S.jsx)(x.a,{color:"processing",children:"Antrian"})}),Object(S.jsx)(l,{value:"Terkirim",children:Object(S.jsx)(x.a,{color:"success",children:"Terkirim"})})]})})}},{name:"Ditambahkan Oleh",width:"150px",sortable:!0,selector:function(e){var t,n;return null!==(t=null===(n=e.attributes)||void 0===n?void 0:n.added_by)&&void 0!==t?t:"-"}},{name:"Tindakan",width:"250px",selector:function(e){return Object(S.jsx)(S.Fragment,{children:Object(S.jsx)(v.a,{content:h(e),placement:"bottom",trigger:"click",children:Object(S.jsx)("button",{className:" text-cyan-700  transition-colors  text-xs font-normal py-2 rounded-md ",children:"Tindakan"})})})}}];return Object(S.jsx)(T.a,{customStyles:{headerStyle:{textAlign:"center"},headCells:{style:{color:"white",background:"#036B82"}}},onChangePage:s,paginationRowsPerPageOptions:[10],paginationTotalRows:null===a||void 0===a||null===(t=a.meta)||void 0===t||null===(n=t.pagination)||void 0===n?void 0:n.total,columns:f,data:a.data,pagination:!0,noDataComponent:"Belum ada data Order Pembelian"})}var E=n("xBBV"),B=n("NyWP"),H=n.n(B);I.getInitialProps=function(){var e=Object(o.a)(u.a.mark((function e(t){var n,a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=H.a.get(t),e.next=3,R(n);case 3:return r=e.sent,e.next=6,r.json();case 6:return a=e.sent,e.abrupt("return",{props:{data:a}});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var R=function(){var e=Object(o.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://strapi-js.keelola.web.id/api/purchases?populate=deep",n={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+t.token}},e.next=4,fetch("https://strapi-js.keelola.web.id/api/purchases?populate=deep",n);case 4:return a=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function I(e){var t=e.props.data,n=Object(p.useState)(t),a=n[0],i=n[1],c=Object(p.useState)(!1),l=c[0],j=c[1],v=s.a.Search,m=Object(z.useRouter)(),x=function(){var e=Object(o.a)(u.a.mark((function e(t){var n,a,r,s,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="https://strapi-js.keelola.web.id/api/purchases/"+t,a=H.a.get(null,"token"),r={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer "+a.token}},e.next=5,fetch(n,r);case 5:return s=e.sent,e.next=8,s.json();case 8:if(!e.sent){e.next=15;break}return e.next=12,_(a);case 12:o=e.sent,y("success","Berhasil menghapus data","Order Pembelian yang dipilih telah berhasil dihapus. Silahkan cek kembali Order Pembelian"),i(o);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(o.a)(u.a.mark((function e(t){var n,a,r,s,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=H.a.get(null,"token"),a="https://strapi-js.keelola.web.id/api/purchases?pagination[page]="+t,r={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+n.token}},e.prev=3,e.next=6,fetch(a,r);case 6:return s=e.sent,e.next=9,s.json();case 9:(o=e.sent)?i((function(e){return{data:filterDuplicateData(e.data.concat(o.data)),meta:e.meta}})):console.log("something is wrong"),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(o.a)(u.a.mark((function e(n){var a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.target.value.length>=2)){e.next=12;break}return j(!0),e.next=4,k(n.target.value);case 4:return a=e.sent,e.next=7,a.json();case 7:r=e.sent,i(r),j(!1),e.next=14;break;case 12:i(t),j(!1);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(o.a)(u.a.mark((function e(t){var n,a,r,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="https://strapi-js.keelola.web.id/api/purchases?filters[$or][0][added_by][$contains]="+t+"&filters[$or][1][no_po][$contains]="+t+"&populate=*",a=H.a.get(null,"token"),r={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+a.token}},e.next=5,fetch(n,r);case 5:return i=e.sent,e.abrupt("return",i);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(o.a)(u.a.mark((function e(t,n){var a,r,s,o,c,l,d,p,h,f,b,j,v,m;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(c in t.attributes)null!==t.attributes[c]&&void 0!==t.attributes[c]||delete t.attributes[c];return null!==(null===(a=t.attributes)||void 0===a||null===(r=a.document)||void 0===r?void 0:r.data)&&void 0!==(null===(s=t.attributes)||void 0===s||null===(o=s.document)||void 0===o?void 0:o.data)||null===(l=t.attributes)||void 0===l||delete l.document,d=[],t.attributes.purchase_details.data.forEach((function(e){d.push({id:e.id})})),t.attributes.supplier={id:t.attributes.supplier.data.id},t.attributes.location={id:t.attributes.location.data.id},t.attributes.purchase_details=d,p={data:t.attributes},h=JSON.stringify(p),f=H.a.get(null,"token"),b="https://strapi-js.keelola.web.id/api/purchases/"+n,j={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer "+f.token},body:h},e.next=14,fetch(b,j);case 14:return v=e.sent,e.next=17,v.json();case 17:if(e.sent,200!==v.status){e.next=26;break}return e.next=21,_(f);case 21:m=e.sent,i(m),y("success","Status berhasil dirubah","Status berhasil dirubah. Silahkan cek detail order pembelian"),e.next=27;break;case 26:y("error","Status gagal dirubah","Tedapat kesalahan yang menyebabkan status tidak dapat dirubah");case 27:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),y=function(e,t,n){r.a[e]({message:t,description:n})},_=function(){var e=Object(o.a)(u.a.mark((function e(t){var n,a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://strapi-js.keelola.web.id/api/purchases?populate=deep",n={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+t.token}},e.next=4,fetch("https://strapi-js.keelola.web.id/api/purchases?populate=deep",n);case 4:return a=e.sent,r=a.json(),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(d.a,{children:Object(S.jsx)("title",{children:"Order Pembelian"})}),Object(S.jsx)(f.a,{children:Object(S.jsxs)(b.a,{style:{},children:[Object(S.jsx)(E.a,{titleText:"Order Pembelian"}),Object(S.jsxs)(h.a,{children:[Object(S.jsxs)("div",{className:"w-full flex justify-between",children:[Object(S.jsx)(v,{className:"",loading:l,onChange:function(e){return O(e)},placeholder:"Cari Pembelian",style:{width:200}}),Object(S.jsx)("button",{onClick:function(){m.push("/dashboard/pembelian/order_pembelian/tambah")},type:"button",className:"bg-cyan-700 rounded px-5 py-2 hover:bg-cyan-800  shadow-sm flex float-right mb-5",children:Object(S.jsx)("div",{className:"text-white text-center text-sm font-bold",children:Object(S.jsx)("a",{className:"text-white no-underline text-xs sm:text-xs",children:"+ Tambah"})})})]}),Object(S.jsx)(D,{data:a,onUpdate:function(e){y("info","Work In Progress","Hai, Fitur ini sedang dikerjakan. Silahkan tunggu pembaruan selanjutnya")},onDelete:x,onPageChange:g,onChangeStatus:function(e,t){t.attributes.status=e,w(t,t.id)},onChangeStatusPengiriman:function(e,t){t.attributes.delivery_status=e,w(t,t.id)}})]})]})})]})}t.default=I},rg98:function(e,t,n){"use strict";function a(e,t,n,a,r,i,s){try{var o=e[i](s),c=o.value}catch(u){return void n(u)}o.done?t(c):Promise.resolve(c).then(a,r)}function r(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var s=e.apply(t,n);function o(e){a(s,r,i,o,c,"next",e)}function c(e){a(s,r,i,o,c,"throw",e)}o(void 0)}))}}n.d(t,"a",(function(){return r}))},wIya:function(e,t,n){"use strict";var a=n("284h"),r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n("3tO9")),s=a(n("q1tI")),o=r(n("PlUM")),c=r(n("KQxl")),u=function(e,t){return s.createElement(c.default,(0,i.default)((0,i.default)({},e),{},{ref:t,icon:o.default}))};u.displayName="PrinterOutlined";var l=s.forwardRef(u);t.default=l}},[["ctRN",0,1,13,2,3,4,5,6,7,9,8,10,12,11,14,16,17,18,19]]]);