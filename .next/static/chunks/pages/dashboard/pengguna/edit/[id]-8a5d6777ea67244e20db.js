_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[69],{Ubvz:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/pengguna/edit/[id]",function(){return r("l8Dz")}])},l8Dz:function(e,t,r){"use strict";r.r(t);var n=r("4IMT"),a=r.n(n),s=r("MM9K"),i=r.n(s),o=r("FAat"),c=r.n(o),l=r("z19R"),u=r.n(l),p=r("iJl9"),d=r.n(p),b=r("SNDM"),j=r.n(b),m=r("cpVT"),h=r("rg98"),f=r("qu0K"),O=r.n(f),x=r("xvhg"),v=r("vJKn"),w=r.n(v),g=r("NyWP"),y=r.n(g),k=r("q1tI"),T=r("g4pe"),P=r.n(T),N=r("kM/w"),_=r("0Jbt"),I=r("PKTO"),z=r("xBBV"),E=r("FGyW"),S=r("20a2"),A=r("0Ize"),D=r("nKUr");function V(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?V(Object(r),!0).forEach((function(t){Object(m.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var B=function(e){var t,r=e.props,n=O.a.useForm(),s=Object(x.a)(n,1)[0],o=Object(k.useState)(!1),l=o[0],p=o[1],b=Object(k.useState)({}),m=(b[0],b[1]),f=y.a.get(null,"token"),v=Object(S.useRouter)(),g=null===r||void 0===r||null===(t=r.role)||void 0===t?void 0:t.roles,T=null===r||void 0===r?void 0:r.user,V=null===r||void 0===r?void 0:r.user.role,B=null===r||void 0===r?void 0:r.user.locations,G=null===r||void 0===r?void 0:r.locations,J=function(){var e=Object(h.a)(w.a.mark((function e(t){var r,n,a,s,i,o,c,l;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),e.next=3,M(t.role_id);case 3:return r=e.sent,n=q(q({},t),{},{role:r,deleteAble:!0}),a="https://strapi-js.keelola.web.id/api/users/"+T.id,s=JSON.stringify(n),i={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer "+f.token},body:s},e.next=10,fetch(a,i);case 10:return o=e.sent,e.next=13,o.json();case 13:c=e.sent,200===o.status?(v.back(),E.b.success("Data Pengguna berhasil diperbarui!",{position:E.b.POSITION.TOP_RIGHT})):null===(l=c.error)||void 0===l||l.details.errors.map((function(e){E.b.error("Tidak dapat memperbarui Pengguna",{position:E.b.POSITION.TOP_RIGHT})})),p(!1);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(h.a)(w.a.mark((function e(t){var r,n,a,s;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="https://strapi-js.keelola.web.id/api/users-permissions/roles/"+t,n={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+f.token}},e.next=4,fetch(r,n);case 4:return a=e.sent,e.next=7,a.json();case 7:return s=e.sent,e.abrupt("return",s.role);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(P.a,{children:Object(D.jsx)("title",{children:"Tambahkan Pengguna"})}),Object(D.jsx)(_.a,{children:Object(D.jsxs)(I.a,{style:{},children:[Object(D.jsx)(z.a,{titleText:"Tambahkan Pengguna"}),Object(D.jsx)(N.a,{children:Object(D.jsxs)(O.a,{form:s,name:"add_user",initialValues:{remember:!0},onFinish:J,children:[Object(D.jsxs)("div",{className:"flex flex-wrap -mx-3 mb-6",children:[Object(D.jsx)("div",{className:"w-full md:w-1/3 px-3 mb-2 md:mb-0",children:Object(D.jsx)(O.a.Item,{initialValue:T.username,name:"username",rules:[{required:!0,message:"Username tidak boleh kosong!"}],children:Object(D.jsx)(d.a,{disabled:!0,style:{height:"50px"},prefix:Object(D.jsx)(j.a,{style:{fontSize:"150%"},className:"site-form-item-icon mr-5"}),placeholder:"Username"})})}),Object(D.jsx)("div",{className:"w-full md:w-1/3 px-3 mb-2 md:mb-0",children:Object(D.jsx)(O.a.Item,{initialValue:T.name,name:"name",rules:[{required:!0,message:"Nama tidak boleh kosong!"}],children:Object(D.jsx)(d.a,{style:{height:"50px"},prefix:Object(D.jsx)(j.a,{style:{fontSize:"150%"},className:"site-form-item-icon mr-5"}),placeholder:"Nama"})})}),Object(D.jsx)("div",{className:"w-full md:w-1/3 px-3 mb-2 md:mb-0",children:Object(D.jsx)(O.a.Item,{name:"email",initialValue:T.email,rules:[{required:!0,message:"Email tidak boleh kosong!"}],children:Object(D.jsx)(d.a,{style:{height:"50px"},prefix:Object(D.jsx)(u.a,{style:{fontSize:"150%"},className:"site-form-item-icon mr-5"}),placeholder:"Email"})})})]}),Object(D.jsx)(A.a,{data:G,onSelect:m,initialValue:B,errMsg:"Harap pilih lokasi user",required:!0}),Object(D.jsx)(O.a.Item,{name:"role_id",className:"w-1/4 mb-5 ml-1",initialValue:V.id,children:Object(D.jsx)(c.a,{placeholder:"Role",children:g.map((function(e){return"Authenticated"===e.name||"Public"===e.name?Object(D.jsx)(c.a.Option,{hidden:!0,disabled:!0,value:e.id,children:e.name}):Object(D.jsx)(c.a.Option,{value:e.id,children:e.name})}))})}),Object(D.jsx)(O.a.Item,{children:l?Object(D.jsx)("div",{className:" flex float-left ml-3",children:Object(D.jsx)(i.a,{})}):Object(D.jsx)(a.a,{htmlType:"submit",className:" hover:text-white hover:bg-cyan-700 border border-cyan-700 ml-1",children:"Submit"})})]})})]})})]})};B.getInitialProps=function(){var e=Object(h.a)(w.a.mark((function e(t){var r,n,a,s,i,o,c,l,u,p;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=y.a.get(t),n=t.query.id,a="https://strapi-js.keelola.web.id/api/users/"+n+"?populate=*",s={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+r.token}},e.next=6,fetch(a,s);case 6:return i=e.sent,e.next=9,i.json();case 9:return o=e.sent,e.next=12,G(r);case 12:return c=e.sent,e.next=15,c.json();case 15:return l=e.sent,e.next=18,J(r,"/locations");case 18:return u=e.sent,e.next=21,u.json();case 21:return p=e.sent,e.abrupt("return",{props:{user:o,role:l,locations:p}});case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var G=function(){var e=Object(h.a)(w.a.mark((function e(t){var r,n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://strapi-js.keelola.web.id/api/users-permissions/roles",r={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+t.token}},e.next=4,fetch("https://strapi-js.keelola.web.id/api/users-permissions/roles",r);case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(h.a)(w.a.mark((function e(t,r){var n,a,s;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="https://strapi-js.keelola.web.id/api"+r,a={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+t.token}},e.next=4,fetch(n,a);case 4:return s=e.sent,e.abrupt("return",s);case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();t.default=B}},[["Ubvz",0,1,13,2,3,4,5,6,7,9,8,10,12,11,14,15,19,31]]]);