_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[69],{"2l6V":function(e,t,a){"use strict";a.r(t);var r=a("4IMT"),n=a.n(r),s=a("MM9K"),i=a.n(s),c=a("FAat"),o=a.n(c),l=a("O1B6"),u=a.n(l),d=a("z19R"),m=a.n(d),p=a("iJl9"),b=a.n(p),j=a("SNDM"),h=a.n(j),f=a("cpVT"),O=a("rg98"),x=a("qu0K"),v=a.n(x),w=a("xvhg"),g=a("vJKn"),y=a.n(g),k=a("q1tI"),P=a("g4pe"),N=a.n(P),T=a("kM/w"),_=a("0Jbt"),S=a("PKTO"),I=a("xBBV"),z=a("NyWP"),E=a.n(z),K=a("FGyW"),V=a("0Ize"),M=a("nKUr");function q(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function A(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?q(Object(a),!0).forEach((function(t){Object(f.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):q(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var B=function(e){var t,a=e.props,r=v.a.useForm(),s=Object(w.a)(r,1)[0],c=Object(k.useState)(!1),l=c[0],d=c[1],p=Object(k.useState)({}),j=(p[0],p[1]),f=E.a.get(null,"token"),x=null===a||void 0===a||null===(t=a.data)||void 0===t?void 0:t.roles,g=null===a||void 0===a?void 0:a.locations,P=function(){var e=Object(O.a)(y.a.mark((function e(t){var a,r,n,i,c,o,l,u,m;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.next=3,z(t.role_id);case 3:for(a=e.sent,r=[],n=0;n<t.locations.length;n++)r.push({id:t.locations[n]});return i=A(A({},t),{},{role:a,locations:r,deleteAble:!0}),"https://strapi-js.keelola.web.id/api/auth/local/register",c=JSON.stringify(i),o={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+f.token},body:c},e.next=12,fetch("https://strapi-js.keelola.web.id/api/auth/local/register",o);case 12:return l=e.sent,e.next=15,l.json();case 15:u=e.sent,200===l.status?(s.resetFields(),K.b.success("Data Pengguna berhasil ditambahkan!",{position:K.b.POSITION.TOP_RIGHT})):null===(m=u.error)||void 0===m||m.details.errors.map((function(e){e.path[0];K.b.error("Tidak dapat menambahkan Pengguna",{position:K.b.POSITION.TOP_RIGHT})})),d(!1);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(O.a)(y.a.mark((function e(t){var a,r,n,s;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="https://strapi-js.keelola.web.id/api/users-permissions/roles/"+t,r={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+f.token}},e.next=4,fetch(a,r);case 4:return n=e.sent,e.next=7,n.json();case 7:return s=e.sent,e.abrupt("return",s.role);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(N.a,{children:Object(M.jsx)("title",{children:"Tambahkan Pengguna"})}),Object(M.jsx)(_.a,{children:Object(M.jsxs)(S.a,{style:{},children:[Object(M.jsx)(I.a,{titleText:"Tambahkan Pengguna"}),Object(M.jsx)(T.a,{children:Object(M.jsxs)(v.a,{form:s,name:"add_user",initialValues:{remember:!0},onFinish:P,children:[Object(M.jsxs)("div",{className:"flex flex-wrap -mx-3 mb-6",children:[Object(M.jsx)("div",{className:"w-full md:w-1/3 px-3 mb-2 md:mb-0",children:Object(M.jsx)(v.a.Item,{name:"username",rules:[{required:!0,message:"Username tidak boleh kosong!"}],children:Object(M.jsx)(b.a,{style:{height:"50px"},prefix:Object(M.jsx)(h.a,{style:{fontSize:"150%"},className:"site-form-item-icon mr-5"}),placeholder:"Username"})})}),Object(M.jsx)("div",{className:"w-full md:w-1/3 px-3 mb-2 md:mb-0",children:Object(M.jsx)(v.a.Item,{name:"name",rules:[{required:!0,message:"Nama tidak boleh kosong!"}],children:Object(M.jsx)(b.a,{style:{height:"50px"},prefix:Object(M.jsx)(h.a,{style:{fontSize:"150%"},className:"site-form-item-icon mr-5"}),placeholder:"Nama"})})}),Object(M.jsx)("div",{className:"w-full md:w-1/3 px-3 mb-2 md:mb-0",children:Object(M.jsx)(v.a.Item,{name:"email",rules:[{required:!0,message:"Email tidak boleh kosong!"}],children:Object(M.jsx)(b.a,{style:{height:"50px"},prefix:Object(M.jsx)(m.a,{style:{fontSize:"150%"},className:"site-form-item-icon mr-5"}),placeholder:"Email"})})}),Object(M.jsx)("div",{className:"w-full md:w-1/3 px-3 mb-2 md:mb-0",children:Object(M.jsx)(v.a.Item,{name:"password",rules:[{required:!0,message:"Password tidak boleh kosong!"}],children:Object(M.jsx)(b.a.Password,{style:{height:"50px"},prefix:Object(M.jsx)(u.a,{style:{fontSize:"150%"},className:"site-form-item-icon mr-5"}),placeholder:"Kata Sandi"})})}),Object(M.jsx)("div",{className:"w-full md:w-1/3 px-3 mb-2 md:mb-0",children:Object(M.jsx)(v.a.Item,{name:"confirm",dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:"Konfirmasi Kata Sandi diperlukan"},function(e){var t=e.getFieldValue;return{validator:function(e,a){return a&&t("password")!==a?Promise.reject(new Error("Kata Sandi tidak cocok!")):Promise.resolve()}}}],children:Object(M.jsx)(b.a.Password,{style:{height:"50px"},prefix:Object(M.jsx)(u.a,{style:{fontSize:"150%"},className:"site-form-item-icon mr-5"}),placeholder:"Konfirmasi Kata Sandi"})})})]}),Object(M.jsx)(V.a,{data:g,onSelect:j,errMsg:"Harap pilih lokasi user",required:!0}),Object(M.jsx)(v.a.Item,{name:"role_id",className:"w-1/4 mb-5 ml-1",children:Object(M.jsx)(o.a,{size:"large",placeholder:"Role",children:x.map((function(e){return"Authenticated"===e.name||"Public"===e.name?Object(M.jsx)(o.a.Option,{hidden:!0,disabled:!0,value:e.id,children:e.name}):Object(M.jsx)(o.a.Option,{value:e.id,children:e.name})}))})}),Object(M.jsx)(v.a.Item,{children:l?Object(M.jsx)("div",{className:" flex float-left ml-3",children:Object(M.jsx)(i.a,{})}):Object(M.jsx)(n.a,{htmlType:"submit",className:" hover:text-white hover:bg-cyan-700 border border-cyan-700 ml-1",children:"Submit"})})]})})]})})]})};B.getInitialProps=function(){var e=Object(O.a)(y.a.mark((function e(t){var a,r,n,s,i;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=E.a.get(t),e.next=3,F(a,"/users-permissions/roles");case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,e.next=9,F(a,"/locations");case 9:return s=e.sent,e.next=12,s.json();case 12:return i=e.sent,e.abrupt("return",{props:{data:r,locations:i}});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var F=function(){var e=Object(O.a)(y.a.mark((function e(t,a){var r,n,s;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="https://strapi-js.keelola.web.id/api"+a,n={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+t.token}},e.next=4,fetch(r,n);case 4:return s=e.sent,e.abrupt("return",s);case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();t.default=B},"4OAV":function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/pengguna/tambah",function(){return a("2l6V")}])},O1B6:function(e,t,a){"use strict";var r=a("284h"),n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=n(a("3tO9")),i=r(a("q1tI")),c=n(a("wWdt")),o=n(a("KQxl")),l=function(e,t){return i.createElement(o.default,(0,s.default)((0,s.default)({},e),{},{ref:t,icon:c.default}))};l.displayName="LockOutlined";var u=i.forwardRef(l);t.default=u},wWdt:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"}}},[["4OAV",0,1,13,2,3,4,5,6,7,9,8,10,12,11,14,15,19,30]]]);