_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[90],{"2b+2":function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/produk/subkategori/edit/[id]",function(){return a("4uM7")}])},"4uM7":function(e,t,a){"use strict";a.r(t);var r=a("4IMT"),n=a.n(r),i=a("MM9K"),s=a.n(i),c=a("FAat"),o=a.n(c),u=a("cpVT"),l=a("rg98"),b=a("qu0K"),d=a.n(b),p=a("xvhg"),j=a("iJl9"),h=a.n(j),m=a("vJKn"),f=a.n(m),O=a("NyWP"),x=a.n(O),g=a("q1tI"),w=a("g4pe"),v=a.n(w),y=a("kM/w"),k=a("PKTO"),_=a("FGyW"),T=a("20a2"),S=a("0Jbt"),I=a("xBBV"),N=(a("Vy9V"),a("nKUr"));function P(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function E(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?P(Object(a),!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):P(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var K=function(e){var t,a=e.props,r=(null===a||void 0===a||null===(t=a.categories)||void 0===t||t.data,null===a||void 0===a?void 0:a.subCategory.data),i=r.attributes.category.data,c=Object(g.useState)([]),u=c[0],b=c[1],j=Object(g.useState)(i.id),m=j[0],O=j[1],w=h.a.TextArea,P=d.a.useForm(),K=Object(p.a)(P,1)[0],V=Object(g.useState)(!1),A=V[0],D=V[1],C=x.a.get(null,"token"),B=(Object(T.useRouter)(),function(){var e=Object(l.a)(f.a.mark((function e(t){var a,n,i,s,c,o,u,l,b,d;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return D(!0),a={id:parseInt(t.category_id)},delete t.category_id,n=E(E({},t),{},{category:a}),i={data:n},s="https://strapi-js.keelola.web.id/api/sub-categories/"+r.id,c=JSON.stringify(i),o={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer "+C.token},body:c},e.next=10,fetch(s,o);case 10:return u=e.sent,e.next=13,u.json();case 13:l=e.sent,200===u.status?_.b.success("Sub Kategori berhasil diperbarui!",{position:_.b.POSITION.TOP_RIGHT}):null===(b=l.error)||void 0===b||null===(d=b.details)||void 0===d||d.errors.map((function(e){var t=e.path[0];_.b.error("sub_id"===t?"ID Sub Kategori udah digunakan":"Tidak dapat menambahkan Sub Kategori",{position:_.b.POSITION.TOP_RIGHT})})),D(!1);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),F=function(){var e=Object(l.a)(f.a.mark((function e(t,a){var r,n,i,s,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=4;break}a([]),e.next=19;break;case 4:return e.prev=4,r="https://strapi-js.keelola.web.id/api"+"/categories?filters[$or][0][name][$contains]=".concat(t,"&filters[$or][1][category_id][$contains]=").concat(t),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+C.token}},e.next=9,fetch(r,n);case 9:return i=e.sent,e.next=12,i.json();case 12:s=e.sent,200==i.status&&(c=s.data.map((function(e){return{label:"".concat(e.attributes.category_id," - ").concat(e.attributes.name),value:e.id}})),a(c)),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[4,16]])})));return function(t,a){return e.apply(this,arguments)}}(),G=u.map((function(e){return Object(N.jsx)(Option,{children:e.label},e.value)}));return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(v.a,{children:Object(N.jsx)("title",{children:"Edit Sub Kategori"})}),Object(N.jsx)(S.a,{children:Object(N.jsxs)(k.a,{style:{},children:[Object(N.jsx)(I.a,{titleText:"Edit Sub Kategori"}),Object(N.jsx)(y.a,{children:Object(N.jsxs)(d.a,{form:K,name:"add_category",initialValues:{remember:!0},onFinish:B,children:[Object(N.jsx)("div",{className:"flex flex-wrap -mx-3 mb-6",children:Object(N.jsx)(d.a.Item,{name:"category_id",initialValues:i.id,className:"w-full md:w-1/3 px-3 mb-2 md:mb-0",children:Object(N.jsx)(o.a,{defaultValue:"".concat(i.attributes.category_id," - ").concat(i.attributes.name),size:"large",showSearch:!0,value:m,showArrow:!1,placeholder:"Pilih Induk Kategori",onSearch:function(e){e?(F(e,b),console.log(u)):b([])},onChange:function(e){O(e)},filterOption:!1,defaultActiveFirstOption:!1,children:G})})}),Object(N.jsxs)("div",{className:"flex flex-wrap -mx-3 mb-6",children:[Object(N.jsx)("div",{className:"w-full md:w-1/2 px-3 mb-2 md:mb-0",children:Object(N.jsx)(d.a.Item,{initialValue:r.attributes.sub_id,name:"sub_id",rules:[{required:!0,message:"Sub ID tidak boleh kosong!"}],children:Object(N.jsx)(h.a,{style:{height:"50px"},placeholder:"Sub ID"})})}),Object(N.jsx)("div",{className:"w-full md:w-1/2 px-3 mb-2 md:mb-0",children:Object(N.jsx)(d.a.Item,{initialValue:r.attributes.name,name:"name",rules:[{required:!0,message:"Nama Sub tidak boleh kosong!"}],children:Object(N.jsx)(h.a,{style:{height:"50px"},placeholder:"Nama Sub Kategori"})})}),Object(N.jsx)("div",{className:"w-full md:w-full px-3 mb-2 md:mb-0",children:Object(N.jsx)(d.a.Item,{name:"description",initialValue:r.attributes.description,children:Object(N.jsx)(w,{rows:4,placeholder:"Deskripsi"})})})]}),Object(N.jsx)(d.a.Item,{children:A?Object(N.jsx)("div",{className:" flex float-left ml-3",children:Object(N.jsx)(s.a,{})}):Object(N.jsx)(n.a,{htmlType:"submit",className:" hover:text-white hover:bg-cyan-700 border border-cyan-700 ml-1",children:"Submit"})})]})})]})})]})};K.getInitialProps=function(){var e=Object(l.a)(f.a.mark((function e(t){var a,r,n,i,s,c,o,u;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=x.a.get(t),r=t.query.id,n="https://strapi-js.keelola.web.id/api/sub-categories/"+r+"?populate=*",i={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+a.token}},e.next=6,fetch(n,i);case 6:return s=e.sent,e.next=9,s.json();case 9:return c=e.sent,e.next=12,V(a);case 12:return o=e.sent,e.next=15,o.json();case 15:return u=e.sent,e.abrupt("return",{props:{subCategory:c,categories:u}});case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var V=function(){var e=Object(l.a)(f.a.mark((function e(t){var a,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://strapi-js.keelola.web.id/api/categories?populate=*",a={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+t.token}},e.next=4,fetch("https://strapi-js.keelola.web.id/api/categories?populate=*",a);case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.default=K}},[["2b+2",0,1,13,2,3,4,5,6,7,9,8,10,12,11,14,15,16,19,32]]]);