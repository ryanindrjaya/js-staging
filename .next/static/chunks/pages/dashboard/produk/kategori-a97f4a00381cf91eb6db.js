_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[79],{fn6E:function(e,t,n){"use strict";n.r(t);var r=n("rg98"),a=n("iJl9"),s=n.n(a),o=n("vJKn"),c=n.n(o),i=n("g4pe"),u=n.n(i),p=n("q1tI"),l=n("kM/w"),h=n("PKTO"),d=n("20a2"),f=n("FGyW"),b=n("NyWP"),j=n.n(b),x=n("0Jbt"),g=n("xBBV"),w=n("QoXh"),k=n("nKUr"),v=function(e){var t=e.props.data,n=Object(p.useState)(!1),a=n[0],o=n[1],i=Object(p.useState)(t),b=i[0],v=i[1],O=Object(d.useRouter)(),y=s.a.Search,E=function(){var e=Object(r.a)(c.a.mark((function e(n){var r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.target.value.length>=2)){e.next=12;break}return o(!0),e.next=4,T(n.target.value);case 4:return r=e.sent,e.next=7,r.json();case 7:a=e.sent,v(a),o(!1),e.next=15;break;case 12:console.log("clear"),v(t),o(!1);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(r.a)(c.a.mark((function e(t){var n,r,a,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="https://strapi-js.keelola.web.id/api/categories?filters[$or][0][name][$contains]="+t+"&filters[$or][1][category_id][$contains]="+t,r=j.a.get(null,"token"),a={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+r.token}},e.next=5,fetch(n,a);case 5:return s=e.sent,e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(r.a)(c.a.mark((function e(t){var n,r,a,s,o,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="https://strapi-js.keelola.web.id/api/categories/"+t,r=j.a.get(null,"token"),a={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer "+r.token}},e.next=5,fetch(n,a);case 5:return s=e.sent,e.next=8,s.json();case 8:if(!e.sent){e.next=18;break}return e.next=12,m(r);case 12:return o=e.sent,e.next=15,o.json();case 15:i=e.sent,f.b.success("Satuan berhasil dihapus"),v(i);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(r.a)(c.a.mark((function e(t){var n,r,a,s,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=j.a.get(null,"token"),r="https://strapi-js.keelola.web.id/api/categories?pagination[page]="+t,a={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+n.token}},e.prev=3,e.next=6,fetch(r,a);case 6:return s=e.sent,e.next=9,s.json();case 9:(o=e.sent)?v((function(e){return{data:C(e.data.concat(o.data)),meta:e.meta}})):console.log("something is wrong"),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(t){return e.apply(this,arguments)}}(),C=function(e){var t=new Set;return e.filter((function(e){var n=t.has(e.id);return t.add(e.id),!n}))};return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(u.a,{children:Object(k.jsx)("title",{children:"Kategori Produk"})}),Object(k.jsx)(x.a,{children:Object(k.jsxs)(h.a,{style:{},children:[Object(k.jsx)(g.a,{titleText:"Kategori"}),Object(k.jsxs)(l.a,{children:[Object(k.jsxs)("div",{children:[Object(k.jsx)(y,{loading:a,onChange:function(e){return E(e)},placeholder:"Cari Kategori",style:{width:200}}),Object(k.jsx)("button",{onClick:function(){O.push("/dashboard/produk/kategori/tambah")},type:"button",className:"bg-cyan-700 rounded px-5 py-2 hover:bg-cyan-800  shadow-sm flex float-right mb-5",children:Object(k.jsx)("div",{className:"text-white text-center text-sm font-bold",children:Object(k.jsx)("a",{className:"text-white no-underline text-xs sm:text-xs",children:"+ Tambah"})})})]}),Object(k.jsx)(w.a,{categoryData:b,onDelete:_,onUpdate:function(e){O.push("/dashboard/produk/kategori/edit/"+e)},onPageChange:N})]})]})})]})};v.getInitialProps=function(){var e=Object(r.a)(c.a.mark((function e(t){var n,r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=j.a.get(t),e.next=3,m(n);case 3:return a=e.sent,e.next=6,a.json();case 6:return r=e.sent,e.abrupt("return",{props:{data:r}});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var m=function(){var e=Object(r.a)(c.a.mark((function e(t){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://strapi-js.keelola.web.id/api/categories",n={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+t.token}},e.next=4,fetch("https://strapi-js.keelola.web.id/api/categories",n);case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.default=v},o1K6:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/produk/kategori",function(){return n("fn6E")}])}},[["o1K6",0,1,13,2,3,4,5,6,7,9,8,10,12,11,14,16,17,18,32]]]);