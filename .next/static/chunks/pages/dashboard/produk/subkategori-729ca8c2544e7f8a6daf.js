_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[89],{Mdum:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/produk/subkategori",function(){return n("nNUm")}])},nNUm:function(e,t,n){"use strict";n.r(t);var a=n("rg98"),r=n("iJl9"),s=n.n(r),o=n("vJKn"),c=n.n(o),u=n("g4pe"),i=n.n(u),p=n("q1tI"),l=n("kM/w"),h=n("PKTO"),d=n("20a2"),b=n("FGyW"),f=n("NyWP"),j=n.n(f),x=n("0Jbt"),g=n("QoXh"),k=n("xBBV"),v=n("nKUr"),w=function(e){var t=e.props.data,n=Object(p.useState)(t),r=n[0],o=n[1],u=Object(p.useState)(!1),f=u[0],w=u[1],O=Object(d.useRouter)(),y=s.a.Search,T=function(){var e=Object(a.a)(c.a.mark((function e(n){var a,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.target.value.length>=2)){e.next=12;break}return w(!0),e.next=4,_(n.target.value);case 4:return a=e.sent,e.next=7,a.json();case 7:r=e.sent,o(r),w(!1),e.next=14;break;case 12:o(t),w(!1);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(a.a)(c.a.mark((function e(t){var n,a,r,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="https://js-strapi.keelola.net/api/sub-categories?filters[$or][0][name][$contains]="+t+"&filters[$or][1][sub_id][$contains]="+t+"&populate=*",a=j.a.get(null,"token"),r={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+a.token}},e.next=5,fetch(n,r);case 5:return s=e.sent,e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(a.a)(c.a.mark((function e(t){var n,a,r,s,u,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="https://js-strapi.keelola.net/api/sub-categories/"+t,a=j.a.get(null,"token"),r={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer "+a.token}},e.next=5,fetch(n,r);case 5:return s=e.sent,e.next=8,s.json();case 8:if(!e.sent){e.next=18;break}return e.next=12,m(a);case 12:return u=e.sent,e.next=15,u.json();case 15:i=e.sent,b.b.success("Satuan berhasil dihapus"),o(i);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(a.a)(c.a.mark((function e(t){var n,a,r,s,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=j.a.get(null,"token"),a="https://js-strapi.keelola.net/api/sub-categories?pagination[page]="+t,r={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+n.token}},e.prev=3,e.next=6,fetch(a,r);case 6:return s=e.sent,e.next=9,s.json();case 9:(u=e.sent)?o((function(e){return{data:C(e.data.concat(u.data)),meta:e.meta}})):console.log("something is wrong"),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(t){return e.apply(this,arguments)}}(),C=function(e){var t=new Set;return e.filter((function(e){var n=t.has(e.id);return t.add(e.id),!n}))};return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(i.a,{children:Object(v.jsx)("title",{children:"Sub Kategori Produk"})}),Object(v.jsx)(x.a,{children:Object(v.jsxs)(h.a,{style:{},children:[Object(v.jsx)(k.a,{titleText:"Sub Kategori"}),Object(v.jsxs)(l.a,{children:[Object(v.jsxs)("div",{children:[Object(v.jsx)(y,{loading:f,onChange:function(e){return T(e)},placeholder:"Cari Sub Kategori",style:{width:200}}),Object(v.jsx)("button",{onClick:function(){O.push("/dashboard/produk/subkategori/tambah")},type:"button",className:"bg-cyan-700 rounded px-5 py-2 hover:bg-cyan-800  shadow-sm flex float-right mb-5",children:Object(v.jsx)("div",{className:"text-white text-center text-sm font-bold",children:Object(v.jsx)("a",{className:"text-white no-underline text-xs sm:text-xs",children:"+ Tambah"})})})]}),Object(v.jsx)(g.a,{categoryData:r,onDelete:E,onUpdate:function(e){O.push("/dashboard/produk/subkategori/edit/"+e)},onPageChange:N,isSubCategory:!0})]})]})})]})};w.getInitialProps=function(){var e=Object(a.a)(c.a.mark((function e(t){var n,a,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=j.a.get(t),e.next=3,m(n);case 3:return r=e.sent,e.next=6,r.json();case 6:return a=e.sent,e.abrupt("return",{props:{data:a}});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var m=function(){var e=Object(a.a)(c.a.mark((function e(t){var n,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://js-strapi.keelola.net/api/sub-categories?populate=*",n={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+t.token}},e.next=4,fetch("https://js-strapi.keelola.net/api/sub-categories?populate=*",n);case 4:return a=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.default=w}},[["Mdum",0,1,13,2,3,4,5,6,7,9,8,10,12,11,14,16,17,18,33]]]);